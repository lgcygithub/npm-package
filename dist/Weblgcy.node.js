module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("ethers")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("bignumber.js")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("elliptic")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("jssha")},function(e,t){e.exports=require("validator")},function(e,t){e.exports=require("eventemitter3")},function(e){e.exports=JSON.parse('{"a":"2.0.0"}')},function(e,t){e.exports=require("semver")},function(e,t){e.exports=require("querystring")},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ht}));var n={};r.r(n),r.d(n,"byte2hexStr",(function(){return F})),r.d(n,"bytesToString",(function(){return O})),r.d(n,"hextoString",(function(){return E})),r.d(n,"byteArray2hexStr",(function(){return B})),r.d(n,"base64DecodeFromString",(function(){return K})),r.d(n,"base64EncodeToString",(function(){return q}));var i={};r.r(i),r.d(i,"bin2String",(function(){return H})),r.d(i,"arrayEquals",(function(){return z})),r.d(i,"stringToBytes",(function(){return V})),r.d(i,"byte2hexStr",(function(){return F})),r.d(i,"bytesToString",(function(){return O})),r.d(i,"hextoString",(function(){return E})),r.d(i,"byteArray2hexStr",(function(){return B})),r.d(i,"base64DecodeFromString",(function(){return K})),r.d(i,"base64EncodeToString",(function(){return q})),r.d(i,"hexChar2byte",(function(){return W})),r.d(i,"isHexChar",(function(){return M})),r.d(i,"hexStr2byteArray",(function(){return J})),r.d(i,"strToDate",(function(){return G})),r.d(i,"isNumber",(function(){return $})),r.d(i,"getStringType",(function(){return X}));var s={};r.r(s),r.d(s,"encode58",(function(){return ee})),r.d(s,"decode58",(function(){return te}));var a={};r.r(a),r.d(a,"getBase58CheckAddress",(function(){return ie})),r.d(a,"decodeBase58Address",(function(){return se})),r.d(a,"signTransaction",(function(){return ae})),r.d(a,"arrayToBase64String",(function(){return oe})),r.d(a,"signBytes",(function(){return ue})),r.d(a,"getRowBytesFromTransactionBase64",(function(){return ce})),r.d(a,"genPriKey",(function(){return de})),r.d(a,"computeAddress",(function(){return le})),r.d(a,"getAddressFromPriKey",(function(){return he})),r.d(a,"decode58Check",(function(){return fe})),r.d(a,"isAddressValid",(function(){return ve})),r.d(a,"getBase58CheckAddressFromPriKeyBase64String",(function(){return ge})),r.d(a,"getHexStrAddressFromPriKeyBase64String",(function(){return pe})),r.d(a,"getAddressFromPriKeyBase64String",(function(){return ye})),r.d(a,"getPubKeyFromPriKey",(function(){return be})),r.d(a,"ECKeySign",(function(){return we})),r.d(a,"SHA256",(function(){return me})),r.d(a,"passwordToAddress",(function(){return ke})),r.d(a,"pkToAddress",(function(){return xe}));var o={};r.r(o),r.d(o,"generateAccount",(function(){return Ie}));var u={};r.r(u),r.d(u,"decodeParams",(function(){return Pe})),r.d(u,"encodeParams",(function(){return Se}));var c=r(1),d=r.n(c),l=r(6),h=r.n(l),f=r(2),v=r.n(f),g=r(3),p=r.n(g),y=r(10),b=r.n(y),w=r(13),m=r.n(w),k=r(14),x=r.n(k),I=r(12),A=r.n(I),P=r(5),S=r.n(P),_=r(0),N=r.n(_),j=r(15),C=r.n(j);function T(){var e=this;this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(t){for(var r,n,i,s,a,o,u,c="",d=0;d<t.length;)s=(r=t.charCodeAt(d++))>>2,a=(3&r)<<4|(n=t.charCodeAt(d++))>>4,o=(15&n)<<2|(i=t.charCodeAt(d++))>>6,u=63&i,isNaN(n)?o=u=64:isNaN(i)&&(u=64),c=c+e._keyStr.charAt(s)+e._keyStr.charAt(a)+e._keyStr.charAt(o)+e._keyStr.charAt(u);return c},this.encodeIgnoreUtf8=function(t){for(var r,n,i,s,a,o,u,c="",d=0;d<t.length;)s=(r=t[d++])>>2,a=(3&r)<<4|(n=t[d++])>>4,o=(15&n)<<2|(i=t[d++])>>6,u=63&i,isNaN(n)?o=u=64:isNaN(i)&&(u=64),c=c+e._keyStr.charAt(s)+e._keyStr.charAt(a)+e._keyStr.charAt(o)+e._keyStr.charAt(u);return c},this.decode=function(t){var r,n,i,s,a,o,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=e._keyStr.indexOf(t.charAt(c++))<<2|(s=e._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&s)<<4|(a=e._keyStr.indexOf(t.charAt(c++)))>>2,i=(3&a)<<6|(o=e._keyStr.indexOf(t.charAt(c++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(n)),64!=o&&(u+=String.fromCharCode(i));return e._utf8_decode(u)},this.decodeToByteArray=function(t){var r,n,i,s,a,o,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=e._keyStr.indexOf(t.charAt(c++))<<2|(s=e._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&s)<<4|(a=e._keyStr.indexOf(t.charAt(c++)))>>2,i=(3&a)<<6|(o=e._keyStr.indexOf(t.charAt(c++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(n)),64!=o&&(u+=String.fromCharCode(i));return e._out2ByteArray(u)},this._out2ByteArray=function(e){for(var t=new Array(e.length),r=0,n=0;r<e.length;)n=e.charCodeAt(r),t[r]=n,r++;return t},this._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},this._utf8_decode=function(e){for(var t="",r=0,n=0,i=0,s=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=e.charCodeAt(r+1),s=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s),r+=3);return t}}function F(e){if("number"!=typeof e)throw new Error("Input must be a number");if(e<0||e>255)throw new Error("Input must be a byte");var t="";return t+="0123456789ABCDEF".charAt(e>>4),t+="0123456789ABCDEF".charAt(15&e)}function O(e){if("string"==typeof e)return e;for(var t="",r=0;r<e.length;r++){var n=e[r].toString(2),i=n.match(/^1+?(?=0)/);if(i&&8===n.length){for(var s=i[0].length,a=e[r].toString(2).slice(7-s),o=1;o<s;o++)a+=e[o+r].toString(2).slice(2);t+=String.fromCharCode(parseInt(a,2)),r+=s-1}else t+=String.fromCharCode(e[r])}return t}function E(e){for(var t=e.replace(/^0x/,"").split(""),r="",n=0;n<t.length/2;n++){var i="0x".concat(t[2*n]).concat(t[2*n+1]);r+=String.fromCharCode(i)}return r}function B(e){for(var t="",r=0;r<e.length;r++)t+=F(e[r]);return t}function K(e){return(new T).decodeToByteArray(e)}function q(e){return(new T).encodeIgnoreUtf8(e)}var U=r(7),R=r.n(U),D=r(16),L=r.n(D);function H(e){return O(e)}function z(e,t,r){if(e.length!=t.length)return!1;var n;for(n=0;n<e.length;n++)if(r){if(e[n]!=t[n])return!1}else if(JSON.stringify(e[n])!=JSON.stringify(t[n]))return!1;return!0}function V(e){if("string"!=typeof e)throw new Error("The passed string is not a string");var t,r,n=new Array;t=e.length;for(var i=0;i<t;i++)(r=e.charCodeAt(i))>=65536&&r<=1114111?(n.push(r>>18&7|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128)):r>=2048&&r<=65535?(n.push(r>>12&15|224),n.push(r>>6&63|128),n.push(63&r|128)):r>=128&&r<=2047?(n.push(r>>6&31|192),n.push(63&r|128)):n.push(255&r);return n}function W(e){var t;if(e>="A"&&e<="F"?t=e.charCodeAt(0)-"A".charCodeAt(0)+10:e>="a"&&e<="f"?t=e.charCodeAt(0)-"a".charCodeAt(0)+10:e>="0"&&e<="9"&&(t=e.charCodeAt(0)-"0".charCodeAt(0)),"number"==typeof t)return t;throw new Error("The passed hex char is not a valid hex char")}function M(e){return e>="A"&&e<="F"||e>="a"&&e<="f"||e>="0"&&e<="9"?1:0}function J(e){if("string"!=typeof e)throw new Error("The passed string is not a string");for(var t=Array(),r=0,n=0,i=0,s=0;s<e.length;s++){var a=e.charAt(s);if(!M(a))throw new Error("The passed hex char is not a valid hex string");r<<=4,r+=W(a),0==++n%2&&(t[i++]=r,r=0)}return t}function G(e){if(!/^\d{4}-\d{2}-\d{2}( \d{2}-\d{2}-\d{2}|)/.test(e))throw new Error("The passed date string is not valid");var t=e.split(" "),r=t[0].split("-"),n=parseInt(r[0],10),i=parseInt(r[1],10)-1,s=parseInt(r[2],10);if(t.length>1){var a=t[1].split("-"),o=parseInt(a[0],10),u=parseInt(a[1],10),c=parseInt(a[2],10);return new Date(n,i,s,o,u,c)}return new Date(n,i,s)}function $(e){return e>="0"&&e<="9"?1:0}function X(e){if(null==e)return-1;if("string"!=typeof e)return-1;if(0==e.length||""==e)return-1;var t=0;if(40==e.length)for(;t<40;t++){if(!M(e.charAt(t)))break}if(40==t)return 1;for(t=0;t<e.length;t++){if(!$(e.charAt(t)))break}if(t==e.length)return 2;for(t=0;t<e.length;t++){if(e.charAt(t)>" ")return 3}return-1}for(var Y="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Z={},Q=0;Q<Y.length;Q++)Z[Y.charAt(Q)]=Q;function ee(e){if(0===e.length)return"";var t,r,n=[0];for(t=0;t<e.length;t++){for(r=0;r<n.length;r++)n[r]<<=8;n[0]+=e[t];var i=0;for(r=0;r<n.length;++r)n[r]+=i,i=n[r]/58|0,n[r]%=58;for(;i;)n.push(i%58),i=i/58|0}for(t=0;0===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse().map((function(e){return Y[e]})).join("")}function te(e){if(0===e.length)return[];var t,r,n=[0];for(t=0;t<e.length;t++){var i=e[t];if(!(i in Z))throw new Error("Non-base58 character");for(r=0;r<n.length;r++)n[r]*=58;n[0]+=Z[i];var s=0;for(r=0;r<n.length;++r)n[r]+=s,s=n[r]>>8,n[r]&=255;for(;s;)n.push(255&s),s>>=8}for(t=0;"1"===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse()}var re=r(11),ne=r(4);function ie(e){var t=me(e),r=me(t).slice(0,4);return ee(r=e.concat(r))}function se(e){if("string"!=typeof e)return!1;if(e.length<=4)return!1;var t=te(e);if(e.length<=4)return!1;var r=t.length-4,n=t.slice(r),i=me(t=t.slice(0,r)),s=me(i).slice(0,4);if(n[0]==s[0]&&n[1]==s[1]&&n[2]==s[2]&&n[3]==s[3])return t;throw new Error("Invalid address provided")}function ae(e,t){"string"==typeof e&&(e=J(e));var r=we(J(t.txID),e);return Array.isArray(t.signature)?t.signature.includes(r)||t.signature.push(r):t.signature=[r],t}function oe(e){return btoa(String.fromCharCode.apply(String,R()(e)))}function ue(e,t){return"string"==typeof e&&(e=J(e)),we(me(t),e)}function ce(e){var t=K(e);return proto.protocol.Transaction.deserializeBinary(t).getRawData().serializeBinary()}function de(){for(var e=new re.ec("secp256k1").genKeyPair().getPrivate().toString("hex");e.length<64;)e="0".concat(e);return J(e)}function le(e){return 65===e.length&&(e=e.slice(1)),J("30"+ne.utils.keccak256(e).toString().substring(2).substring(24))}function he(e){return le(be(e))}function fe(e){var t=te(e);if(t.length<=4)return!1;var r=t.slice(0,t.length-4),n=me(r),i=me(n);return i[0]===t[r.length]&&i[1]===t[r.length+1]&&i[2]===t[r.length+2]&&i[3]===t[r.length+3]&&r}function ve(e){if("string"!=typeof e)return!1;if(34!==e.length)return!1;var t=te(e);if(25!==t.length)return!1;if(48!==t[0])return!1;var r=t.slice(21),n=me(t=t.slice(0,21)),i=me(n).slice(0,4);return r[0]==i[0]&&r[1]==i[1]&&r[2]==i[2]&&r[3]==i[3]}function ge(e){return ie(le(be(K(e))))}function pe(e){return B(le(be(K(e))))}function ye(e){return q(le(be(K(e))))}function be(e){for(var t=new re.ec("secp256k1").keyFromPrivate(e,"bytes").getPublic(),r=t.x,n=t.y,i=r.toString("hex");i.length<64;)i="0".concat(i);for(var s=n.toString("hex");s.length<64;)s="0".concat(s);return J("04".concat(i).concat(s))}function we(e,t){for(var r=new re.ec("secp256k1").keyFromPrivate(t,"bytes").sign(e),n=r.r,i=r.s,s=r.recoveryParam,a=n.toString("hex");a.length<64;)a="0".concat(a);for(var o=i.toString("hex");o.length<64;)o="0".concat(o);return a+o+F(s)}function me(e){var t=new L.a("SHA-256","HEX"),r=B(e);return t.update(r),J(t.getHash("HEX"))}function ke(e){return ie(he(K(e)))}function xe(e){return ie(he(J(e)))}function Ie(){var e=de(),t=be(e),r=he(e);return{privateKey:B(e),publicKey:B(t),address:{base58:ie(r),hex:B(r)}}}var Ae=new ne.utils.AbiCoder;function Pe(e,t,r,n){if(r&&"boolean"!=typeof r||(n=r,r=t,t=e,e=[]),n&&r.replace(/^0x/,"").length%64==8&&(r="0x"+r.replace(/^0x/,"").substring(8)),r.replace(/^0x/,"").length%64)throw new Error("The encoded string is not valid. Its length must be a multiple of 64.");return Ae.decode(t,r).reduce((function(r,n,i){return"address"==t[i]&&(n="30"+n.substr(2).toLowerCase()),e.length?r[e[i]]=n:r.push(n),r}),e.length?{}:[])}function Se(e,t){for(var r=0;r<e.length;r++)"address"===e[r]&&(t[r]=ht.address.toHex(t[r]).replace(/^30/,"0x"));return Ae.encode(e,t)}var _e=r(17),Ne=r.n(_e),je=r(9),Ce=r.n(je);function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe=Fe(Fe({},{isValidURL:function(e){return"string"==typeof e&&Ne.a.isURL(e.toString(),{protocols:["http","https"],require_tld:!1})},isObject:function(e){return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e)},isArray:function(e){return Array.isArray(e)},isJson:function(e){try{return!!JSON.parse(e)}catch(e){return!1}},isBoolean:function(e){return"boolean"==typeof e},isBigNumber:function(e){return e&&(e instanceof Ce.a||e.constructor&&"BigNumber"===e.constructor.name)},isString:function(e){return"string"==typeof e||e&&e.constructor&&"String"===e.constructor.name},isFunction:function(e){return"function"==typeof e},isHex:function(e){return"string"==typeof e&&!isNaN(parseInt(e,16))&&/^(0x|)[a-fA-F0-9]+$/.test(e)},isInteger:function(e){return null!==e&&Number.isInteger(Number(e))},hasProperty:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},hasProperties:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.length&&!n.map((function(r){return t.hasProperty(e,r)})).includes(!1)},injectPromise:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise((function(t,n){e.apply(void 0,r.concat([function(e,r){e?n(e):t(r)}]))}))},promiseInjector:function(e){var t=this;return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return t.injectPromise.apply(t,[r.bind(e)].concat(i))}},mapEvent:function(e){var t={block:e.block_number,timestamp:e.block_timestamp,contract:e.contract_address,name:e.event_name,transaction:e.transaction_id,result:e.result,resourceNode:e.resource_Node||(e._unconfirmed?"fullNode":"solidityNode")};return e._unconfirmed&&(t.unconfirmed=e._unconfirmed),e._fingerprint&&(t.fingerprint=e._fingerprint),t},parseEvent:function(e,t){var r=t.inputs;if(!e.result)return e;if(this.isObject(e.result))for(var n=0;n<r.length;n++){var i=r[n];"address"==i.type&&i.name in e.result&&(e.result[i.name]="30"+e.result[i.name].substr(2).toLowerCase())}else this.isArray(e.result)&&(e.result=e.result.reduce((function(e,t,n){var i=r[n],s=i.name;return"address"==i.type&&(t="30"+t.substr(2).toLowerCase()),e[s]=t,e}),{}));return e},padLeft:function(e,t,r){for(var n=e.toString();n.length<r;)n=t+n;return n},isNotNullOrUndefined:function(e){return null!=e}}),{},{code:i,accounts:o,base58:s,bytes:n,crypto:a,abi:u}),Ee={HttpProvider:function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"/";if(v()(this,e),!Oe.isValidURL(t))throw new Error("Invalid URL provided to HttpProvider");if(isNaN(r)||r<0)throw new Error("Invalid timeout duration provided");if(!Oe.isObject(s))throw new Error("Invalid headers object provided");t=t.replace(/\/+$/,""),this.host=t,this.timeout=r,this.user=n,this.password=i,this.headers=s,this.statusPage=a,this.instance=C.a.create({baseURL:t,timeout:r,headers:s,auth:n&&{user:n,password:i}})}var t;return p()(e,[{key:"setStatusPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.statusPage=e}},{key:"isConnected",value:(t=d()(N.a.mark((function e(){var t,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.statusPage,e.abrupt("return",this.request(t).then((function(e){return Oe.hasProperties(e,"blockID","block_header")})).catch((function(){return!1})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return r=r.toLowerCase(),this.instance.request({data:"post"==r&&Object.keys(t).length?t:null,params:"get"==r&&t,url:e,method:r}).then((function(e){return e.data}))}}]),e}()},Be=r(18),Ke=r.n(Be),qe=r(19),Ue=r(8),Re=r.n(Ue);function De(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw s}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He,ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v()(this,e),!t||!t instanceof ht)throw new Error("Expected instance of Weblgcy");this.weblgcy=t}return p()(e,[{key:"invalid",value:function(e){return e.msg||"Invalid ".concat(e.name).concat("address"===e.type?" address":""," provided")}},{key:"notEqual",value:function(e){return e.msg||"".concat(e.names[0]," can not be equal to ").concat(e.names[1])}},{key:"notValid",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Function,n={},i=De(t);try{for(i.s();!(e=i.n()).done;){var s=e.value,a=s.name,o=s.names,u=s.value,c=s.type,d=s.gt,l=s.lt,h=s.gte,f=s.lte,v=s.optional;if(v&&!Oe.isNotNullOrUndefined(u))return!1;switch(c){case"address":if(!this.weblgcy.isAddress(u))return r(this.invalid(s)),!0;n[a]=this.weblgcy.address.toHex(u);break;case"integer":if(!(Oe.isInteger(u)&&("number"!=typeof d||u>s.gt)&&("number"!=typeof l||u<s.lt)&&("number"!=typeof h||u>=s.gte)&&("number"!=typeof f||u<=s.lte)))return r(this.invalid(s)),!0;n[s.name]=s.value;break;case"tokenId":if(!Oe.isString(u)||!u.length)return r(this.invalid(s)),!0;break;case"notEmptyObject":if(!Oe.isObject(u)||!Object.keys(u).length)return r(this.invalid(s)),!0;case"notEqual":if(n[o[0]]===n[o[1]])return r(this.notEqual(s)),!0}}}catch(e){i.e(e)}finally{i.f()}return!1}}]),e}();function Ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw s}}}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e){return He.weblgcy.address.toHex(e)}function Je(e){return He.weblgcy.fromUtf8(e)}function Ge(e,t){return e.Error?t(e.Error):e.result&&e.result.message?t(this.weblgcy.toUtf8(e.result.message)):t(null,e)}var $e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v()(this,e),!t||!t instanceof ht)throw new Error("Expected instance of Weblgcy");He=this,this.weblgcy=t,this.injectPromise=Oe.promiseInjector(this),this.validator=new ze(t)}return p()(e,[{key:"sendUsdl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.weblgcy.defaultAddress.hex,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultAddress.hex),!n)return this.injectPromise(this.sendUsdl,e,t,r);t=parseInt(t),this.validator.notValid([{name:"recipient",type:"address",value:e},{name:"origin",type:"address",value:r},{names:["recipient","origin"],type:"notEqual",msg:"Cannot transfer USDL to the same account"},{name:"amount",type:"integer",gt:0,value:t}],n)||this.weblgcy.fullNode.request("wallet/createtransaction",{to_address:Me(e),owner_address:Me(r),amount:t},"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)}))}},{key:"sendToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Oe.isFunction(n)&&(i=n,n=this.weblgcy.defaultAddress.hex),!i)return this.injectPromise(this.sendToken,e,t,r,n);t=parseInt(t),this.validator.notValid([{name:"recipient",type:"address",value:e},{name:"origin",type:"address",value:n},{names:["recipient","origin"],type:"notEqual",msg:"Cannot transfer tokens to the same account"},{name:"amount",type:"integer",gt:0,value:t},{name:"token ID",type:"tokenId",value:r}],i)||this.weblgcy.fullNode.request("wallet/transferasset",{to_address:Me(e),owner_address:Me(n),asset_name:Je(r),amount:parseInt(t)},"post").then((function(e){return Ge(e,i)})).catch((function(e){return i(e)}))}},{key:"purchaseToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Oe.isFunction(n)&&(i=n,n=this.weblgcy.defaultAddress.hex),i?this.weblgcy.isAddress(e)?Oe.isString(t)&&t.length?!Oe.isInteger(r)||r<=0?i("Invalid amount provided"):this.weblgcy.isAddress(n)?void this.weblgcy.fullNode.request("wallet/participateassetissue",{to_address:Me(e),owner_address:Me(n),asset_name:Je(t),amount:parseInt(r)},"post").then((function(e){return Ge(e,i)})).catch((function(e){return i(e)})):i("Invalid buyer address provided"):i("Invalid token ID provided"):i("Invalid issuer address provided"):this.injectPromise(this.purchaseToken,e,t,r,n)}},{key:"freezeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"USDL_POWER",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(Oe.isFunction(i)&&(s=i,i=void 0),Oe.isFunction(n)&&(s=n,n=this.weblgcy.defaultAddress.hex),Oe.isFunction(t)&&(s=t,t=3),Oe.isFunction(r)&&(s=r,r="USDL_POWER"),!s)return this.injectPromise(this.freezeBalance,e,t,r,n,i);if(!["USDL_POWER"].includes(r))return s('Invalid resource provided: Expected "USDL_POWER"');if(!Oe.isInteger(e)||e<=0)return s("Invalid amount provided");if(!Oe.isInteger(t)||t<3)return s("Invalid duration provided, minimum of 3 days");if(!this.weblgcy.isAddress(n))return s("Invalid address provided");if(Oe.isNotNullOrUndefined(i)&&!this.weblgcy.isAddress(i))return s("Invalid receiver address provided");var a={owner_address:Me(n),frozen_balance:parseInt(e),frozen_duration:parseInt(t),resource:r};Oe.isNotNullOrUndefined(i)&&(a.receiver_address=Me(i)),this.weblgcy.fullNode.request("wallet/freezebalance",a,"post").then((function(e){return Ge(e,s)})).catch((function(e){return s(e)}))}},{key:"unfreezeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USDL_POWER",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Oe.isFunction(r)&&(n=r,r=void 0),Oe.isFunction(t)&&(n=t,t=this.weblgcy.defaultAddress.hex),Oe.isFunction(e)&&(n=e,e="USDL_POWER"),!n)return this.injectPromise(this.unfreezeBalance,e,t,r);if(!["USDL_POWER"].includes(e))return n('Invalid resource provided: Expected "USDL_POWER"');if(!this.weblgcy.isAddress(t))return n("Invalid address provided");if(Oe.isNotNullOrUndefined(r)&&!this.weblgcy.isAddress(r))return n("Invalid receiver address provided");var i={owner_address:Me(t),resource:e};Oe.isNotNullOrUndefined(r)&&(i.receiver_address=Me(r)),this.weblgcy.fullNode.request("wallet/unfreezebalance",i,"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)}))}},{key:"withdrawBlockRewards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),t?this.weblgcy.isAddress(e)?void this.weblgcy.fullNode.request("wallet/withdrawbalance",{owner_address:Me(e)},"post").then((function(e){return Ge(e,t)})).catch((function(e){return t(e)})):t("Invalid address provided"):this.injectPromise(this.withdrawBlockRewards,e)}},{key:"applyForSR",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isValidURL(e)&&(r=t||!1,t=e,e=this.weblgcy.defaultAddress.hex),r?this.weblgcy.isAddress(e)?Oe.isValidURL(t)?void this.weblgcy.fullNode.request("wallet/createwitness",{owner_address:Me(e),url:Je(t)},"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)})):r("Invalid url provided"):r("Invalid address provided"):this.injectPromise(this.applyForSR,e,t)}},{key:"vote",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultAddress.hex),!n)return this.injectPromise(this.vote,t,r);if(!this.validator.notValid([{name:"voter",type:"address",value:r},{name:"votes",type:"notEmptyObject",value:t}],n)){var i=!1;t=Object.entries(t).map((function(t){var r=Re()(t,2),n=r[0],s=r[1];if(!i)return e.validator.notValid([{name:"SR",type:"address",value:n},{name:"vote count",type:"integer",gt:0,value:s,msg:"Invalid vote count provided for SR: "+n}])?i=!0:{vote_address:Me(n),vote_count:parseInt(s)}})),i||this.weblgcy.fullNode.request("wallet/votewitnessaccount",{owner_address:Me(r),votes:t},"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)}))}}},{key:"createSmartContract",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),!r)return this.injectPromise(this.createSmartContract,e,t);var n=e.feeLimit||1e9,i=e.userFeePercentage;"number"==typeof i&&i||(i=100);var s=e.originKandyLimit||1e7,a=e.callValue||0,o=e.tokenValue,u=e.tokenId||e.token_id,c=e.abi,d=void 0!==c&&c,l=e.bytecode,h=void 0!==l&&l,f=e.parameters,v=void 0===f?[]:f,g=e.name,p=void 0===g?"":g;if(d&&Oe.isString(d))try{d=JSON.parse(d)}catch(e){return r("Invalid options.abi provided")}if(!Oe.isArray(d))return r("Invalid options.abi provided in array");var y=d.some((function(e){return"constructor"==e.type&&e.payable}));if(!Oe.isHex(h))return r("Invalid options.bytecode provided");if(!Oe.isInteger(n)||n<=0||n>1e9)return r("Invalid options.feeLimit provided");if(!Oe.isInteger(a)||a<0)return r("Invalid options.callValue provided");if(y&&0==a)return r("When contract is payable, options.callValue must be a positive integer");if(!y&&a>0)return r("When contract is not payable, options.callValue must be 0");if(!Oe.isInteger(i)||i<0||i>100)return r("Invalid options.userFeePercentage provided");if(!Oe.isInteger(s)||s<0||s>1e7)return r("Invalid options.originKandyLimit provided");if(!Oe.isArray(v))return r("Invalid parameters provided");if(!this.weblgcy.isAddress(t))return r("Invalid issuer address provided");var b=d.find((function(e){return"constructor"===e.type}));if(Oe.isNotNullOrUndefined(o)&&(!Oe.isInteger(o)||o<0))return r("Invalid options.tokenValue provided");if(Oe.isNotNullOrUndefined(u)&&(!Oe.isInteger(u)||u<0))return r("Invalid options.tokenValue provided");if(void 0!==b&&b){var w=new ne.utils.AbiCoder,m=[],k=[];if(b=b.inputs,v.length!=b.length)return r("constructor needs ".concat(b.length," but ").concat(v.length," provided"));for(var x=0;x<v.length;x++){var I=b[x].type,A=v[x];if(!I||!Oe.isString(I)||!I.length)return r("Invalid parameter type provided: "+I);"address"==I&&(A=Me(A).replace(/^(30)/,"0x")),m.push(I),k.push(A)}try{v=w.encode(m,k).replace(/^(0x)/,"")}catch(e){return r(e)}}else v="";var P={owner_address:Me(t),fee_limit:parseInt(n),call_value:parseInt(a),consume_user_resource_percent:i,origin_kandy_limit:s,abi:JSON.stringify(d),bytecode:h,parameter:v,name:p};Oe.isNotNullOrUndefined(o)&&(P.call_token_value=parseInt(o)),Oe.isNotNullOrUndefined(u)&&(P.token_id=parseInt(u)),this.weblgcy.fullNode.request("wallet/deploycontract",P,"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)}))}},{key:"triggerSmartContract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"object"!==h()(t[2])&&(t[2]={feeLimit:t[2],callValue:t[3]},t.splice(3,1)),this._triggerSmartContract.apply(this,t)}},{key:"triggerConstantContract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[2]._isConstant=!0,this._triggerSmartContract.apply(this,t)}},{key:"triggerConfirmedConstantContract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[2]._isConstant=!0,t[2].confirmed=!0,this.triggerSmartContract.apply(this,t)}},{key:"_triggerSmartContract",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.weblgcy.defaultAddress.hex,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(Oe.isFunction(i)&&(s=i,i=this.weblgcy.defaultAddress.hex),Oe.isFunction(n)&&(s=n,n=[]),!s)return this.injectPromise(this._triggerSmartContract,e,t,r,n,i);var a=Object.assign({callValue:0,feeLimit:1e9},r),o=a.tokenValue,u=a.tokenId,c=a.callValue,d=a.feeLimit;if(Oe.isNotNullOrUndefined(o)&&(!Oe.isInteger(o)||o<0))return s("Invalid options.tokenValue provided");if(Oe.isNotNullOrUndefined(u)&&(!Oe.isInteger(u)||u<0))return s("Invalid options.tokenValue provided");if(!this.weblgcy.isAddress(e))return s("Invalid contract address provided");if(!Oe.isString(t)||!t.length)return s("Invalid function selector provided");if(!Oe.isInteger(c)||c<0)return s("Invalid call value provided");if(!Oe.isInteger(d)||d<=0||d>1e9)return s("Invalid fee limit provided");if(!Oe.isArray(n))return s("Invalid parameters provided");if(!1!==i&&!this.weblgcy.isAddress(i))return s("Invalid issuer address provided");if(t=t.replace("/s*/g",""),n.length){for(var l=new ne.utils.AbiCoder,h=[],f=[],v=0;v<n.length;v++){var g=n[v],p=g.type,y=g.value;if(!p||!Oe.isString(p)||!p.length)return s("Invalid parameter type provided: "+p);"address"==p&&(y=Me(y).replace(/^(30)/,"0x")),h.push(p),f.push(y)}try{h=h.map((function(e){return/trcToken/.test(e)&&(e=e.replace(/trcToken/,"uint256")),e})),n=l.encode(h,f).replace(/^(0x)/,"")}catch(e){return s(e)}}else n="";var b={contract_address:Me(e),owner_address:Me(i),function_selector:t,fee_limit:parseInt(d),call_value:parseInt(c),parameter:n};Oe.isNotNullOrUndefined(o)&&(b.call_token_value=parseInt(o)),Oe.isNotNullOrUndefined(u)&&(b.token_id=parseInt(u)),this.weblgcy.fullNode.request("wallet/triggersmartcontract",b,"post").then((function(e){return Ge(e,s)})).catch((function(e){return s(e)}))}},{key:"createToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),!r)return this.injectPromise(this.createToken,e,t);var n=e.name,i=void 0!==n&&n,s=e.abbreviation,a=void 0!==s&&s,o=e.description,u=void 0!==o&&o,c=e.url,d=void 0!==c&&c,l=e.totalSupply,h=void 0===l?0:l,f=e.usdlRatio,v=void 0===f?1:f,g=e.tokenRatio,p=void 0===g?1:g,y=e.saleStart,b=void 0===y?Date.now():y,w=e.saleEnd,m=void 0!==w&&w,k=e.freeBandwidth,x=void 0===k?0:k,I=e.freeBandwidthLimit,A=void 0===I?0:I,P=e.frozenAmount,S=void 0===P?0:P,_=e.frozenDuration,N=void 0===_?0:_,j=e.voteScore,C=e.precision;if(!Oe.isString(i)||!i.length)return r("Invalid token name provided");if(!Oe.isString(a)||!a.length)return r("Invalid token abbreviation provided");if(!Oe.isInteger(h)||h<=0)return r("Invalid supply amount provided");if(!Oe.isInteger(v)||v<=0)return r("USDL ratio must be a positive integer");if(!Oe.isInteger(p)||p<=0)return r("Token ratio must be a positive integer");if(!Oe.isInteger(b)||b<Date.now())return r("Invalid sale start timestamp provided");if(!Oe.isInteger(m)||m<=b)return r("Invalid sale end timestamp provided");if(!Oe.isString(u)||!u.length)return r("Invalid token description provided");if(!Oe.isString(d)||!d.length||!Oe.isValidURL(d))return r("Invalid token url provided");if(!Oe.isInteger(x)||x<0)return r("Invalid free bandwidth amount provided");if(!Oe.isInteger(A)||A<0||x&&!A)return r("Invalid free bandwidth limit provided");if(!Oe.isInteger(S)||S<0||!N&&S)return r("Invalid frozen supply provided");if(!Oe.isInteger(N)||N<0||N&&!S)return r("Invalid frozen duration provided");if(!this.weblgcy.isAddress(t))return r("Invalid issuer address provided");if(Oe.isNotNullOrUndefined(j)&&(!Oe.isInteger(j)||j<=0))return r("voteScore must be a positive integer greater than 0");if(Oe.isNotNullOrUndefined(C)&&(!Oe.isInteger(C)||C<=0||C>18))return r("precision must be a positive integer > 0 and <= 18");var T={owner_address:Me(t),name:Je(i),abbr:Je(a),description:Je(u),url:Je(d),total_supply:parseInt(h),lgcy_num:parseInt(v),num:parseInt(p),start_time:parseInt(b),end_time:parseInt(m),free_asset_net_limit:parseInt(x),public_free_asset_net_limit:parseInt(A),frozen_supply:{frozen_amount:parseInt(S),frozen_days:parseInt(N)}};C&&!isNaN(parseInt(C))&&(T.precision=parseInt(C)),j&&!isNaN(parseInt(j))&&(T.vote_score=parseInt(j)),this.weblgcy.fullNode.request("wallet/createassetissue",T,"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)}))}},{key:"updateAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),r?Oe.isString(e)&&e.length?this.weblgcy.isAddress(t)?void this.weblgcy.fullNode.request("wallet/updateaccount",{account_name:Je(e),owner_address:Me(t)},"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)})):r("Invalid origin address provided"):r("Name must be a string"):this.injectPromise(this.updateAccount,e,t)}},{key:"updateToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),!r)return this.injectPromise(this.updateToken,e,t);var n=e.description,i=void 0!==n&&n,s=e.url,a=void 0!==s&&s,o=e.freeBandwidth,u=void 0===o?0:o,c=e.freeBandwidthLimit,d=void 0===c?0:c;return Oe.isString(i)&&i.length?Oe.isString(a)&&a.length&&Oe.isValidURL(a)?!Oe.isInteger(u)||u<0?r("Invalid free bandwidth amount provided"):!Oe.isInteger(d)||d<0||u&&!d?r("Invalid free bandwidth limit provided"):this.weblgcy.isAddress(t)?void this.weblgcy.fullNode.request("wallet/updateasset",{owner_address:Me(t),description:Je(i),url:Je(a),new_limit:parseInt(u),new_public_limit:parseInt(d)},"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)})):r("Invalid issuer address provided"):r("Invalid token url provided"):r("Invalid token description provided")}},{key:"sendAsset",value:function(){return this.sendToken.apply(this,arguments)}},{key:"purchaseAsset",value:function(){return this.purchaseToken.apply(this,arguments)}},{key:"createAsset",value:function(){return this.createToken.apply(this,arguments)}},{key:"updateAsset",value:function(){return this.updateToken.apply(this,arguments)}},{key:"createProposal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),!r)return this.injectPromise(this.createProposal,e,t);if(!this.weblgcy.isAddress(t))return r("Invalid issuerAddress provided");var n="Invalid proposal parameters provided";if(!e)return r(n);Oe.isArray(e)||(e=[e]);var i,s=Ve(e);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(!Oe.isObject(a))return r(n)}}catch(e){s.e(e)}finally{s.f()}this.weblgcy.fullNode.request("wallet/proposalcreate",{owner_address:Me(t),parameters:e},"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)}))}},{key:"deleteProposal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.weblgcy.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),r?this.weblgcy.isAddress(t)?!Oe.isInteger(e)||e<0?r("Invalid proposalID provided"):void this.weblgcy.fullNode.request("wallet/proposaldelete",{owner_address:Me(t),proposal_id:parseInt(e)},"post").then((function(e){return Ge(e,r)})).catch((function(e){return r(e)})):r("Invalid issuerAddress provided"):this.injectPromise(this.deleteProposal,e,t)}},{key:"voteProposal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.weblgcy.defaultAddress.hex,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultAddress.hex),n?this.weblgcy.isAddress(r)?!Oe.isInteger(e)||e<0?n("Invalid proposalID provided"):Oe.isBoolean(t)?void this.weblgcy.fullNode.request("wallet/proposalapprove",{owner_address:Me(r),proposal_id:parseInt(e),is_add_approval:t},"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)})):n("Invalid hasApproval provided"):n("Invalid voterAddress address provided"):this.injectPromise(this.voteProposal,e,t,r)}},{key:"createUSDLExchange",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Oe.isFunction(n)&&(i=n,n=this.weblgcy.defaultAddress.hex),i?this.weblgcy.isAddress(n)?Oe.isString(e)&&e.length?!Oe.isInteger(t)||t<=0||!Oe.isInteger(r)||r<=0?i("Invalid amount provided"):void this.weblgcy.fullNode.request("wallet/exchangecreate",{owner_address:Me(n),first_token_id:Je(e),first_token_balance:t,second_token_id:"5f",second_token_balance:r},"post").then((function(e){i(null,e)})).catch((function(e){return i(e)})):i("Invalid tokenName provided"):i("Invalid address provided"):this.injectPromise(this.createUSDLExchange,e,t,r,n)}},{key:"createTokenExchange",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.weblgcy.defaultAddress.hex,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Oe.isFunction(i)&&(s=i,i=this.weblgcy.defaultAddress.hex),s?this.weblgcy.isAddress(i)?Oe.isString(e)&&e.length?Oe.isString(r)&&r.length?!Oe.isInteger(t)||t<=0||!Oe.isInteger(n)||n<=0?s("Invalid amount provided"):void this.weblgcy.fullNode.request("wallet/exchangecreate",{owner_address:Me(i),first_token_id:Je(e),first_token_balance:t,second_token_id:Je(r),second_token_balance:n},"post").then((function(e){s(null,e)})).catch((function(e){return s(e)})):s("Invalid secondTokenName provided"):s("Invalid firstTokenName provided"):s("Invalid address provided"):this.injectPromise(this.createTokenExchange,e,t,r,n,i)}},{key:"injectExchangeTokens",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Oe.isFunction(n)&&(i=n,n=this.weblgcy.defaultAddress.hex),i?this.weblgcy.isAddress(n)?!Oe.isInteger(e)||e<0?i("Invalid exchangeID provided"):Oe.isString(t)&&t.length?!Oe.isInteger(r)||r<1?i("Invalid tokenAmount provided"):void this.weblgcy.fullNode.request("wallet/exchangeinject",{owner_address:Me(n),exchange_id:parseInt(e),token_id:Je(t),quant:parseInt(r)},"post").then((function(e){return Ge(e,i)})).catch((function(e){return i(e)})):i("Invalid tokenName provided"):i("Invalid ownerAddress provided"):this.injectPromise(this.injectExchangeTokens,e,t,r,n)}},{key:"withdrawExchangeTokens",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.weblgcy.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Oe.isFunction(n)&&(i=n,n=this.weblgcy.defaultAddress.hex),i?this.weblgcy.isAddress(n)?!Oe.isInteger(e)||e<0?i("Invalid exchangeID provided"):Oe.isString(t)&&t.length?!Oe.isInteger(r)||r<1?i("Invalid tokenAmount provided"):void this.weblgcy.fullNode.request("wallet/exchangewithdraw",{owner_address:Me(n),exchange_id:parseInt(e),token_id:Je(t),quant:parseInt(r)},"post").then((function(e){return Ge(e,i)})).catch((function(e){return i(e)})):i("Invalid tokenName provided"):i("Invalid ownerAddress provided"):this.injectPromise(this.withdrawExchangeTokens,e,t,r,n)}},{key:"tradeExchangeTokens",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.weblgcy.defaultAddress.hex,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Oe.isFunction(i)&&(s=i,i=this.weblgcy.defaultAddress.hex),s?this.weblgcy.isAddress(i)?!Oe.isInteger(e)||e<0?s("Invalid exchangeID provided"):Oe.isString(t)&&t.length?!Oe.isInteger(r)||r<1?s("Invalid tokenAmountSold provided"):!Oe.isInteger(n)||n<1?s("Invalid tokenAmountExpected provided"):void this.weblgcy.fullNode.request("wallet/exchangetransaction",{owner_address:Me(i),exchange_id:parseInt(e),token_id:this.weblgcy.fromAscii(t),quant:parseInt(r),expected:parseInt(n)},"post").then((function(e){return Ge(e,s)})).catch((function(e){return s(e)})):s("Invalid tokenName provided"):s("Invalid ownerAddress provided"):this.injectPromise(this.tradeExchangeTokens,e,t,r,n,i)}},{key:"updateSetting",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.weblgcy.defaultAddress.hex,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultAddress.hex),n?this.weblgcy.isAddress(r)?this.weblgcy.isAddress(e)?!Oe.isInteger(t)||t<0||t>100?n("Invalid options.userFeePercentage provided"):void this.weblgcy.fullNode.request("wallet/updatesetting",{owner_address:Me(r),contract_address:Me(e),consume_user_resource_percent:t},"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)})):n("Invalid contractAddress provided"):n("Invalid ownerAddress provided"):this.injectPromise(this.updateSetting,e,t,r)}},{key:"updateKandyLimit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.weblgcy.defaultAddress.hex,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultAddress.hex),n?this.weblgcy.isAddress(r)?this.weblgcy.isAddress(e)?!Oe.isInteger(t)||t<0||t>1e7?n("Invalid options.originKandyLimit provided"):void this.weblgcy.fullNode.request("wallet/updatekandylimit",{owner_address:Me(r),contract_address:Me(e),origin_kandy_limit:t},"post").then((function(e){return Ge(e,n)})).catch((function(e){return n(e)})):n("Invalid contractAddress provided"):n("Invalid ownerAddress provided"):this.injectPromise(this.updateKandyLimit,e,t,r)}},{key:"checkPermissions",value:function(e,t){if(e){if(e.type!==t||!e.permission_name||!Oe.isString(e.permission_name)||!Oe.isInteger(e.threshold)||e.threshold<1||!e.keys)return!1;var r,n=Ve(e.key);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!this.weblgcy.isAddress(i.address)||!Oe.isInteger(i.weight)||i.weight>e.threshold||i.weight<1||2===t&&!e.operations)return!1}}catch(e){n.e(e)}finally{n.f()}}return!0}},{key:"updateAccountPermissions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Oe.isFunction(n)&&(i=n,n=!1),Oe.isFunction(r)&&(i=r,r=n=!1),Oe.isFunction(t)&&(i=t,t=r=n=!1),!i)return this.injectPromise(this.updateAccountPermissions,e,t,r,n);if(!this.weblgcy.isAddress(e))return i("Invalid ownerAddress provided");if(!this.checkPermissions(t,0))return i("Invalid ownerPermissions provided");if(!this.checkPermissions(r,1))return i("Invalid witnessPermissions provided");Array.isArray(n)||(n=[n]);var s,a=Ve(n);try{for(a.s();!(s=a.n()).done;){var o=s.value;if(!this.checkPermissions(o,2))return i("Invalid activesPermissions provided")}}catch(e){a.e(e)}finally{a.f()}var u={owner_address:e};t&&(u.owner=t),r&&(u.witness=r),n&&(u.actives=1===n.length?n[0]:n),this.weblgcy.fullNode.request("wallet/accountpermissionupdate",u,"post").then((function(e){return Ge(e,i)})).catch((function(e){return i(e)}))}}]),e}();function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v()(this,e),!t||!t instanceof ht)throw new Error("Expected instance of Weblgcy");this.weblgcy=t,this.injectPromise=Oe.promiseInjector(this)}var t,r,n,i,s,a,o,u,c,l,f,g,y,b,w,m,k,x,I;return p()(e,[{key:"_parseToken",value:function(e){return Ye(Ye({},e),{},{name:this.weblgcy.toUtf8(e.name),abbr:e.abbr&&this.weblgcy.toUtf8(e.abbr),description:e.description&&this.weblgcy.toUtf8(e.description),url:e.url&&this.weblgcy.toUtf8(e.url)})}},{key:"getCurrentBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getCurrentBlock);this.weblgcy.fullNode.request("wallet/getnowblock").then((function(t){e(null,t)})).catch((function(t){return e(t)}))}},{key:"getConfirmedCurrentBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getConfirmedCurrentBlock);this.weblgcy.solidityNode.request("walletsolidity/getnowblock").then((function(t){e(null,t)})).catch((function(t){return e(t)}))}},{key:"getBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultBlock),t?!1===e?t("No block identifier provided"):("earliest"==e&&(e=0),"latest"==e?this.getCurrentBlock(t):isNaN(e)&&Oe.isHex(e)?this.getBlockByHash(e,t):void this.getBlockByNumber(e,t)):this.injectPromise(this.getBlock,e)}},{key:"getBlockByHash",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getBlockByHash,e);this.weblgcy.fullNode.request("wallet/getblockbyid",{value:e},"post").then((function(e){if(!Object.keys(e).length)return t("Block not found");t(null,e)})).catch((function(e){return t(e)}))}},{key:"getBlockByNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Oe.isInteger(e)||e<0?t("Invalid block number provided"):void this.weblgcy.fullNode.request("wallet/getblockbynum",{num:parseInt(e)},"post").then((function(e){if(!Object.keys(e).length)return t("Block not found");t(null,e)})).catch((function(e){return t(e)})):this.injectPromise(this.getBlockByNumber,e)}},{key:"getBlockTransactionCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultBlock),!t)return this.injectPromise(this.getBlockTransactionCount,e);this.getBlock(e).then((function(e){var r=e.transactions;t(null,(void 0===r?[]:r).length)})).catch((function(e){return t(e)}))}},{key:"getTransactionFromBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t=0),Oe.isFunction(e)&&(r=e,e=this.weblgcy.defaultBlock),r?!Oe.isInteger(t)||t<0?r("Invalid transaction index provided"):void this.getBlock(e).then((function(e){var n=e.transactions,i=void 0!==n&&n;if(!i||i.length<t)return r("Transaction not found in block");r(null,i[t])})).catch((function(e){return r(e)})):this.injectPromise(this.getTransactionFromBlock,e,t)}},{key:"getTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getTransaction,e);this.weblgcy.fullNode.request("wallet/gettransactionbyid",{value:e},"post").then((function(e){if(!Object.keys(e).length)return t("Transaction not found in gettransaction");t(null,e)})).catch((function(e){return t(e)}))}},{key:"getConfirmedTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getConfirmedTransaction,e);this.weblgcy.solidityNode.request("walletsolidity/gettransactionbyid",{value:e},"post").then((function(e){if(!Object.keys(e).length)return t("Transaction not found in confirmation");t(null,e)})).catch((function(e){return t(e)}))}},{key:"getTransactionInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getTransactionInfo,e);this.weblgcy.solidityNode.request("walletsolidity/gettransactioninfobyid",{value:e},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)}))}},{key:"getTransactionsToAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oe.isFunction(r)&&(n=r,r=0),Oe.isFunction(t)&&(n=t,t=30),n?(e=this.weblgcy.address.toHex(e),this.getTransactionsRelated(e,"to",t,r,n)):this.injectPromise(this.getTransactionsToAddress,e,t,r)}},{key:"getTransactionsFromAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oe.isFunction(r)&&(n=r,r=0),Oe.isFunction(t)&&(n=t,t=30),n?(e=this.weblgcy.address.toHex(e),this.getTransactionsRelated(e,"from",t,r,n)):this.injectPromise(this.getTransactionsFromAddress,e,t,r)}},{key:"getTransactionsRelated",value:(I=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c,d=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:this.weblgcy.defaultAddress.hex,r=d.length>1&&void 0!==d[1]?d[1]:"all",n=d.length>2&&void 0!==d[2]?d[2]:30,i=d.length>3&&void 0!==d[3]?d[3]:0,s=d.length>4&&void 0!==d[4]&&d[4],Oe.isFunction(i)&&(s=i,i=0),Oe.isFunction(n)&&(s=n,n=30),Oe.isFunction(r)&&(s=r,r="all"),Oe.isFunction(t)&&(s=t,t=this.weblgcy.defaultAddress.hex),s){e.next=11;break}return e.abrupt("return",this.injectPromise(this.getTransactionsRelated,t,r,n,i));case 11:if(["to","from","all"].includes(r)){e.next=13;break}return e.abrupt("return",s('Invalid direction provided: Expected "to", "from" or "all"'));case 13:if("all"!=r){e.next=27;break}return e.prev=14,e.next=17,Promise.all([this.getTransactionsRelated(t,"from",n,i),this.getTransactionsRelated(t,"to",n,i)]);case 17:return a=e.sent,o=Re()(a,2),u=o[0],c=o[1],e.abrupt("return",s(null,[].concat(R()(u.map((function(e){return e.direction="from",e}))),R()(c.map((function(e){return e.direction="to",e})))).sort((function(e,t){return t.raw_data.timestamp-e.raw_data.timestamp}))));case 24:return e.prev=24,e.t0=e.catch(14),e.abrupt("return",s(e.t0));case 27:if(this.weblgcy.isAddress(t)){e.next=29;break}return e.abrupt("return",s("Invalid address provided"));case 29:if(!(!Oe.isInteger(n)||n<0||i&&n<1)){e.next=31;break}return e.abrupt("return",s("Invalid limit provided"));case 31:if(Oe.isInteger(i)&&!(i<0)){e.next=33;break}return e.abrupt("return",s("Invalid offset provided"));case 33:t=this.weblgcy.address.toHex(t),this.weblgcy.solidityNode.request("walletextension/gettransactions".concat(r,"this"),{account:{address:t},offset:i,limit:n},"post").then((function(e){var t=e.transaction;s(null,t)})).catch((function(e){return s(e)}));case 35:case"end":return e.stop()}}),e,this,[[14,24]])}))),function(){return I.apply(this,arguments)})},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),t?this.weblgcy.isAddress(e)?(e=this.weblgcy.address.toHex(e),void this.weblgcy.solidityNode.request("walletsolidity/getaccount",{address:e},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)}))):t("Invalid address provided"):this.injectPromise(this.getAccount,e)}},{key:"getBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),!t)return this.injectPromise(this.getBalance,e);this.getAccount(e).then((function(e){var r=e.balance;t(null,void 0===r?0:r)})).catch((function(e){return t(e)}))}},{key:"getUnconfirmedAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),t?this.weblgcy.isAddress(e)?(e=this.weblgcy.address.toHex(e),void this.weblgcy.fullNode.request("wallet/getaccount",{address:e},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)}))):t("Invalid address provided"):this.injectPromise(this.getUnconfirmedAccount,e)}},{key:"getUnconfirmedBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),!t)return this.injectPromise(this.getUnconfirmedBalance,e);this.getUnconfirmedAccount(e).then((function(e){var r=e.balance;t(null,void 0===r?0:r)})).catch((function(e){return t(e)}))}},{key:"getBandwidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(e)&&(t=e,e=this.weblgcy.defaultAddress.hex),t?this.weblgcy.isAddress(e)?(e=this.weblgcy.address.toHex(e),void this.weblgcy.fullNode.request("wallet/getaccountnet",{address:e},"post").then((function(e){var r=e.freeNetUsed,n=void 0===r?0:r,i=e.freeNetLimit,s=void 0===i?0:i,a=e.NetUsed,o=void 0===a?0:a,u=e.NetLimit;t(null,s-n+((void 0===u?0:u)-o))})).catch((function(e){return t(e)}))):t("Invalid address provided"):this.injectPromise(this.getBandwidth,e)}},{key:"getTokensIssuedByAddress",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Oe.isFunction(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),r?this.weblgcy.isAddress(t)?(t=this.weblgcy.address.toHex(t),void this.weblgcy.fullNode.request("wallet/getassetissuebyaccount",{address:t},"post").then((function(t){var n=t.assetIssue,i=void 0!==n&&n;if(!i)return r(null,{});var s=i.map((function(t){return e._parseToken(t)})).reduce((function(e,t){return e[t.name]=t,e}),{});r(null,s)})).catch((function(e){return r(e)}))):r("Invalid address provided"):this.injectPromise(this.getTokensIssuedByAddress,t)}},{key:"getTokenFromID",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r?(Oe.isInteger(t)&&(t=t.toString()),Oe.isString(t)&&t.length?void this.weblgcy.fullNode.request("wallet/getassetissuebyname",{value:this.weblgcy.fromUtf8(t)},"post").then((function(t){if(!t.name)return r("Token does not exist");r(null,e._parseToken(t))})).catch((function(e){return r(e)})):r("Invalid token ID provided")):this.injectPromise(this.getTokenFromID,t)}},{key:"listNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return this.injectPromise(this.listNodes);this.weblgcy.fullNode.request("wallet/listnodes").then((function(r){var n=r.nodes;t(null,(void 0===n?[]:n).map((function(t){var r=t.address,n=r.host,i=r.port;return"".concat(e.weblgcy.toUtf8(n),":").concat(i)})))})).catch((function(e){return t(e)}))}},{key:"getBlockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t=30),Oe.isFunction(e)&&(r=e,e=0),r?!Oe.isInteger(e)||e<0?r("Invalid start of range provided"):!Oe.isInteger(t)||t<=e?r("Invalid end of range provided"):void this.weblgcy.fullNode.request("wallet/getblockbylimitnext",{startNum:parseInt(e),endNum:parseInt(t)+1},"post").then((function(e){var t=e.block;r(null,void 0===t?[]:t)})).catch((function(e){return r(e)})):this.injectPromise(this.getBlockRange,e,t)}},{key:"listSuperRepresentatives",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listSuperRepresentatives);this.weblgcy.fullNode.request("wallet/listwitnesses").then((function(t){var r=t.witnesses;e(null,void 0===r?[]:r)})).catch((function(t){return e(t)}))}},{key:"listTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(r)&&(n=r,r=0),Oe.isFunction(t)&&(n=t,t=0),n?!Oe.isInteger(t)||t<0||r&&t<1?n("Invalid limit provided"):!Oe.isInteger(r)||r<0?n("Invalid offset provided"):t?void this.weblgcy.fullNode.request("wallet/getpaginatedassetissuelist",{offset:parseInt(r),limit:parseInt(t)},"post").then((function(t){var r=t.assetIssue;n(null,(void 0===r?[]:r).map((function(t){return e._parseToken(t)})))})).catch((function(e){return n(e)})):this.weblgcy.fullNode.request("wallet/getassetissuelist").then((function(t){var r=t.assetIssue;n(null,(void 0===r?[]:r).map((function(t){return e._parseToken(t)})))})).catch((function(e){return n(e)})):this.injectPromise(this.listTokens,t,r)}},{key:"timeUntilNextVoteCycle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.timeUntilNextVoteCycle);this.weblgcy.fullNode.request("wallet/getnextmaintenancetime").then((function(t){var r=t.num,n=void 0===r?-1:r;if(-1==n)return e("Failed to get time until next vote cycle");e(null,Math.floor(n/1e3))})).catch((function(t){return e(t)}))}},{key:"getContract",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.weblgcy.isAddress(e)?(e=this.weblgcy.address.toHex(e),void this.weblgcy.fullNode.request("wallet/getcontract",{value:e}).then((function(e){if(e.Error)return t("Contract does not exist");t(null,e)})).catch((function(e){return t(e)}))):t("Invalid contract address provided"):this.injectPromise(this.getContract,e)}},{key:"verifyMessage",value:(x=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c,d=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]&&d[0],r=d.length>1&&void 0!==d[1]&&d[1],n=d.length>2&&void 0!==d[2]?d[2]:this.weblgcy.defaultAddress.base58,i=!(d.length>3&&void 0!==d[3])||d[3],s=d.length>4&&void 0!==d[4]&&d[4],Oe.isFunction(n)&&(s=n,n=this.weblgcy.defaultAddress.base58,i=!0),Oe.isFunction(i)&&(s=i,i=!0),s){e.next=9;break}return e.abrupt("return",this.injectPromise(this.verifyMessage,t,r,n,i));case 9:if(Oe.isHex(t)){e.next=11;break}return e.abrupt("return",s("Expected hex message input"));case 11:if("0x"==t.substr(0,2)&&(t=t.substring(2)),"0x"==r.substr(0,2)&&(r=r.substr(2)),a=[].concat(R()(ne.utils.toUtf8Bytes(i?"LGCY Signed Message:\n32":"Ethereum Signed Message:\n32")),R()(Oe.code.hexStr2byteArray(t))),o=ne.utils.keccak256(a),u=ne.utils.recoverAddress(o,{recoveryParam:"1c"==r.substring(128,130)?1:0,r:"0x"+r.substring(0,64),s:"0x"+r.substring(64,128)}),c="30"+u.substr(2),this.weblgcy.address.fromHex(c)!=this.weblgcy.address.fromHex(n)){e.next=20;break}return e.abrupt("return",s(null,!0));case 20:s("Signature does not match");case 21:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"sign",value:(k=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c,d,l=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],r=l.length>1&&void 0!==l[1]?l[1]:this.weblgcy.defaultPrivateKey,n=!(l.length>2&&void 0!==l[2])||l[2],i=l.length>3&&void 0!==l[3]&&l[3],s=l.length>4&&void 0!==l[4]&&l[4],Oe.isFunction(i)&&(s=i,i=!1),Oe.isFunction(n)&&(s=n,n=!0,i=!1),Oe.isFunction(r)&&(s=r,r=this.weblgcy.defaultPrivateKey,n=!0,i=!1),s){e.next=10;break}return e.abrupt("return",this.injectPromise(this.sign,t,r,n,i));case 10:if(!Oe.isString(t)){e.next=26;break}if("0x"==t.substring(0,2)&&(t=t.substring(2)),Oe.isHex(t)){e.next=14;break}return e.abrupt("return",s("Expected hex message input"));case 14:return e.prev=14,a=new ne.utils.SigningKey(r),o=[].concat(R()(ne.utils.toUtf8Bytes(n?"LGCY Signed Message:\n32":"Ethereum Signed Message:\n32")),R()(Oe.code.hexStr2byteArray(t))),u=ne.utils.keccak256(o),c=a.signDigest(u),d=["0x",c.r.substring(2),c.s.substring(2),Number(c.v).toString(16)].join(""),e.abrupt("return",s(null,d));case 23:e.prev=23,e.t0=e.catch(14),s(e.t0);case 26:if(Oe.isObject(t)){e.next=28;break}return e.abrupt("return",s("Invalid transaction provided"));case 28:if(i||!t.signature){e.next=30;break}return e.abrupt("return",s("Transaction is already signed"));case 30:if(e.prev=30,i){e.next=35;break}if(this.weblgcy.address.toHex(this.weblgcy.address.fromPrivateKey(r)).toLowerCase()===t.raw_data.contract[0].parameter.value.owner_address.toLowerCase()){e.next=35;break}return e.abrupt("return",s("Private key does not match address in transaction"));case 35:return e.abrupt("return",s(null,Oe.crypto.signTransaction(r,t)));case 38:e.prev=38,e.t1=e.catch(30),s(e.t1);case 41:case"end":return e.stop()}}),e,this,[[14,23],[30,38]])}))),function(){return k.apply(this,arguments)})},{key:"sendRawTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t={}),r?Oe.isObject(e)?Oe.isObject(t)?e.signature&&Oe.isArray(e.signature)?void this.weblgcy.fullNode.request("wallet/broadcasttransaction",e,"post").then((function(t){t.result&&(t.transaction=e),r(null,t)})).catch((function(e){return r(e)})):r("Transaction is not signed"):r("Invalid options provided"):r("Invalid transaction provided"):this.injectPromise(this.sendRawTransaction,e,t)}},{key:"sendTransaction",value:(m=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],r=c.length>1&&void 0!==c[1]&&c[1],n=c.length>2&&void 0!==c[2]?c[2]:{},i=c.length>3&&void 0!==c[3]&&c[3],Oe.isFunction(n)&&(i=n,n={}),"string"==typeof n&&(n={privateKey:n}),i){e.next=8;break}return e.abrupt("return",this.injectPromise(this.sendTransaction,t,r,n));case 8:if(this.weblgcy.isAddress(t)){e.next=10;break}return e.abrupt("return",i("Invalid recipient provided"));case 10:if(Oe.isInteger(r)&&!(r<=0)){e.next=12;break}return e.abrupt("return",i("Invalid amount provided"));case 12:if((n=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},n)).privateKey||n.address){e.next=15;break}return e.abrupt("return",i("Function requires either a private key or address to be set"));case 15:return e.prev=15,s=n.privateKey?this.weblgcy.address.fromPrivateKey(n.privateKey):n.address,e.next=19,this.weblgcy.transactionBuilder.sendUsdl(t,r,s);case 19:return a=e.sent,e.next=22,this.sign(a,n.privateKey||void 0);case 22:return o=e.sent,e.next=25,this.sendRawTransaction(o);case 25:return u=e.sent,e.abrupt("return",i(null,u));case 29:return e.prev=29,e.t0=e.catch(15),e.abrupt("return",i(e.t0));case 32:case"end":return e.stop()}}),e,this,[[15,29]])}))),function(){return m.apply(this,arguments)})},{key:"sendToken",value:(w=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c,d=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]&&d[0],r=d.length>1&&void 0!==d[1]&&d[1],n=d.length>2&&void 0!==d[2]&&d[2],i=d.length>3&&void 0!==d[3]?d[3]:{},s=d.length>4&&void 0!==d[4]&&d[4],Oe.isFunction(i)&&(s=i,i={}),"string"==typeof i&&(i={privateKey:i}),s){e.next=9;break}return e.abrupt("return",this.injectPromise(this.sendToken,t,r,n,i));case 9:if(this.weblgcy.isAddress(t)){e.next=11;break}return e.abrupt("return",s("Invalid recipient provided"));case 11:if(Oe.isInteger(r)&&!(r<=0)){e.next=13;break}return e.abrupt("return",s("Invalid amount provided"));case 13:if(Oe.isInteger(n)&&(n=n.toString()),Oe.isString(n)){e.next=16;break}return e.abrupt("return",s("Invalid token ID provided"));case 16:if((i=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},i)).privateKey||i.address){e.next=19;break}return e.abrupt("return",s("Function requires either a private key or address to be set"));case 19:return e.prev=19,a=i.privateKey?this.weblgcy.address.fromPrivateKey(i.privateKey):i.address,e.next=23,this.weblgcy.transactionBuilder.sendToken(t,r,n,a);case 23:return o=e.sent,e.next=26,this.sign(o,i.privateKey||void 0);case 26:return u=e.sent,e.next=29,this.sendRawTransaction(u);case 29:return c=e.sent,e.abrupt("return",s(null,c));case 33:return e.prev=33,e.t0=e.catch(19),e.abrupt("return",s(e.t0));case 36:case"end":return e.stop()}}),e,this,[[19,33]])}))),function(){return w.apply(this,arguments)})},{key:"freezeBalance",value:(b=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c,d,l=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:0,r=l.length>1&&void 0!==l[1]?l[1]:3,n=l.length>2&&void 0!==l[2]?l[2]:"USDL_POWER",i=l.length>3&&void 0!==l[3]?l[3]:{},s=l.length>4&&void 0!==l[4]?l[4]:void 0,a=l.length>5&&void 0!==l[5]&&l[5],Oe.isFunction(s)&&(a=s,s=void 0),Oe.isFunction(r)&&(a=r,r=3),Oe.isFunction(n)&&(a=n,n="USDL_POWER"),Oe.isFunction(i)&&(a=i,i={}),"string"==typeof i&&(i={privateKey:i}),a){e.next=13;break}return e.abrupt("return",this.injectPromise(this.freezeBalance,t,r,n,i,s));case 13:if(["USDL_POWER"].includes(n)){e.next=15;break}return e.abrupt("return",a('Invalid resource provided: Expected "USDL_POWER"'));case 15:if(Oe.isInteger(t)&&!(t<=0)){e.next=17;break}return e.abrupt("return",a("Invalid amount provided"));case 17:if(Oe.isInteger(r)&&!(r<3)){e.next=19;break}return e.abrupt("return",a("Invalid duration provided, minimum of 3 days"));case 19:if((i=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},i)).privateKey||i.address){e.next=22;break}return e.abrupt("return",a("Function requires either a private key or address to be set"));case 22:return e.prev=22,o=i.privateKey?this.weblgcy.address.fromPrivateKey(i.privateKey):i.address,e.next=26,this.weblgcy.transactionBuilder.freezeBalance(t,r,n,o,s);case 26:return u=e.sent,e.next=29,this.sign(u,i.privateKey||void 0);case 29:return c=e.sent,e.next=32,this.sendRawTransaction(c);case 32:return d=e.sent,e.abrupt("return",a(null,d));case 36:return e.prev=36,e.t0=e.catch(22),e.abrupt("return",a(e.t0));case 39:case"end":return e.stop()}}),e,this,[[22,36]])}))),function(){return b.apply(this,arguments)})},{key:"unfreezeBalance",value:(y=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"USDL_POWER",r=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:void 0,i=c.length>3&&void 0!==c[3]&&c[3],Oe.isFunction(n)&&(i=n,n=void 0),Oe.isFunction(t)&&(i=t,t="USDL_POWER"),Oe.isFunction(r)&&(i=r,r={}),"string"==typeof r&&(r={privateKey:r}),i){e.next=10;break}return e.abrupt("return",this.injectPromise(this.unfreezeBalance,t,r,n));case 10:if(["USDL_POWER"].includes(t)){e.next=12;break}return e.abrupt("return",i('Invalid resource provided: Expected "USDL_POWER"'));case 12:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=15;break}return e.abrupt("return",i("Function requires either a private key or address to be set"));case 15:return e.prev=15,s=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=19,this.weblgcy.transactionBuilder.unfreezeBalance(t,s,n);case 19:return a=e.sent,e.next=22,this.sign(a,r.privateKey||void 0);case 22:return o=e.sent,e.next=25,this.sendRawTransaction(o);case 25:return u=e.sent,e.abrupt("return",i(null,u));case 29:return e.prev=29,e.t0=e.catch(15),e.abrupt("return",i(e.t0));case 32:case"end":return e.stop()}}),e,this,[[15,29]])}))),function(){return y.apply(this,arguments)})},{key:"createProposal",value:(g=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.createProposal,t,r));case 7:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=10;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 10:return e.prev=10,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=14,this.weblgcy.transactionBuilder.createProposal(t,i);case 14:return s=e.sent,e.next=17,this.sign(s,r.privateKey||void 0);case 17:return a=e.sent,e.next=20,this.sendRawTransaction(a);case 20:return o=e.sent,e.abrupt("return",n(null,o));case 24:return e.prev=24,e.t0=e.catch(10),e.abrupt("return",n(e.t0));case 27:case"end":return e.stop()}}),e,this,[[10,24]])}))),function(){return g.apply(this,arguments)})},{key:"voteProposal",value:(f=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],r=c.length>1&&void 0!==c[1]&&c[1],n=c.length>2&&void 0!==c[2]?c[2]:{},i=c.length>3&&void 0!==c[3]&&c[3],Oe.isFunction(n)&&(i=n,n={}),"string"==typeof n&&(n={privateKey:n}),i){e.next=8;break}return e.abrupt("return",this.injectPromise(this.voteProposal,t,r,n));case 8:if((n=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},n)).privateKey||n.address){e.next=11;break}return e.abrupt("return",i("Function requires either a private key or address to be set"));case 11:return e.prev=11,s=n.privateKey?this.weblgcy.address.fromPrivateKey(n.privateKey):n.address,e.next=15,this.weblgcy.transactionBuilder.voteProposal(t,r,s);case 15:return a=e.sent,e.next=18,this.sign(a,n.privateKey||void 0);case 18:return o=e.sent,e.next=21,this.sendRawTransaction(o);case 21:return u=e.sent,e.abrupt("return",i(null,u));case 25:return e.prev=25,e.t0=e.catch(11),e.abrupt("return",i(e.t0));case 28:case"end":return e.stop()}}),e,this,[[11,25]])}))),function(){return f.apply(this,arguments)})},{key:"deleteProposal",value:(l=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.deleteProposal,t,r));case 7:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=10;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 10:return e.prev=10,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=14,this.weblgcy.transactionBuilder.deleteProposal(t,i);case 14:return s=e.sent,e.next=17,this.sign(s,r.privateKey||void 0);case 17:return a=e.sent,e.next=20,this.sendRawTransaction(a);case 20:return o=e.sent,e.abrupt("return",n(null,o));case 24:return e.prev=24,e.t0=e.catch(10),e.abrupt("return",n(e.t0));case 27:case"end":return e.stop()}}),e,this,[[10,24]])}))),function(){return l.apply(this,arguments)})},{key:"createSmartContract",value:(c=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.createSmartContract,t,r));case 7:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,issuer:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=10;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 10:return e.prev=10,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=14,this.weblgcy.transactionBuilder.createSmartContract(t,i);case 14:return s=e.sent,e.next=17,this.sign(s,r.privateKey||void 0);case 17:return a=e.sent,e.next=20,this.sendRawTransaction(a);case 20:return o=e.sent,e.abrupt("return",n(null,o));case 24:return e.prev=24,e.t0=e.catch(10),e.abrupt("return",n(e.t0));case 27:case"end":return e.stop()}}),e,this,[[10,24]])}))),function(){return c.apply(this,arguments)})},{key:"_triggerSmartContract",value:(u=d()(N.a.mark((function e(t,r){var n,i,s,a,o,u,c,d,l=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:{},i=l.length>3&&void 0!==l[3]?l[3]:[],s=l.length>4&&void 0!==l[4]?l[4]:{},a=l.length>5&&void 0!==l[5]&&l[5],Oe.isFunction(s)&&(a=s,s={}),"string"==typeof s&&(s={privateKey:s}),a){e.next=8;break}return e.abrupt("return",this.injectPromise(this._triggerSmartContract,t,r,n,i,s));case 8:if(Oe.isFunction(i)&&(a=i,i=[]),Oe.isFunction(n)&&(a=n,n={}),(s=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},s)).privateKey||s.address){e.next=13;break}return e.abrupt("return",a("Function requires either a private key or address to be set"));case 13:return e.prev=13,o=s.privateKey?this.weblgcy.address.fromPrivateKey(s.privateKey):s.address,e.next=17,this.weblgcy.transactionBuilder._triggerSmartContract(t,r,n,i,o);case 17:return u=e.sent,e.next=20,this.sign(u,s.privateKey||void 0);case 20:return c=e.sent,e.next=23,this.sendRawTransaction(c);case 23:return d=e.sent,e.abrupt("return",a(null,d));case 27:return e.prev=27,e.t0=e.catch(13),e.abrupt("return",a(e.t0));case 30:case"end":return e.stop()}}),e,this,[[13,27]])}))),function(e,t){return u.apply(this,arguments)})},{key:"createToken",value:(o=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=address,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.createToken,t,r));case 7:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,issuer:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=10;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 10:return e.prev=10,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=14,this.weblgcy.transactionBuilder.createToken(t,i);case 14:return s=e.sent,e.next=17,this.sign(s,r.privateKey||void 0);case 17:return a=e.sent,e.next=20,this.sendRawTransaction(a);case 20:return o=e.sent,e.abrupt("return",n(null,o));case 24:return e.prev=24,e.t0=e.catch(10),e.abrupt("return",n(e.t0));case 27:case"end":return e.stop()}}),e,this,[[10,24]])}))),function(){return o.apply(this,arguments)})},{key:"applyForSR",value:(a=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]&&u[1],n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(t)&&(n=t,t={}),"string"==typeof t&&(t={privateKey:t}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.applyForSR,t,r));case 7:if((t=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},t)).privateKey||t.address){e.next=10;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 10:return e.prev=10,i=t.privateKey?this.weblgcy.address.fromPrivateKey(t.privateKey):t.address,e.next=14,this.weblgcy.transactionBuilder.applyForSR(i,r);case 14:return s=e.sent,e.next=17,this.sign(s,t.privateKey||void 0);case 17:return a=e.sent,e.next=20,this.sendRawTransaction(a);case 20:return o=e.sent,e.abrupt("return",n(null,o));case 24:return e.prev=24,e.t0=e.catch(10),e.abrupt("return",n(e.t0));case 27:case"end":return e.stop()}}),e,this,[[10,24]])}))),function(){return a.apply(this,arguments)})},{key:"vote",value:(s=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r=void 0),Oe.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=8;break}return e.abrupt("return",this.injectPromise(this.vote,t,r));case 8:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=11;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 11:return e.prev=11,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=15,this.weblgcy.transactionBuilder.vote(t,i);case 15:return s=e.sent,e.next=18,this.sign(s,r.privateKey||void 0);case 18:return a=e.sent,e.next=21,this.sendRawTransaction(a);case 21:return o=e.sent,e.abrupt("return",n(null,o));case 25:return e.prev=25,e.t0=e.catch(11),e.abrupt("return",n(e.t0));case 28:case"end":return e.stop()}}),e,this,[[11,25]])}))),function(){return s.apply(this,arguments)})},{key:"getReward",value:(i=d()(N.a.mark((function e(t){var r,n,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2&&void 0!==i[2]&&i[2],r.confirmed=!0,e.abrupt("return",this._getReward(t,r,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_getReward",value:(n=d()(N.a.mark((function e(){var t,r,n,i,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:this.weblgcy.defaultAddress.hex,r=s.length>1?s[1]:void 0,n=s.length>2&&void 0!==s[2]&&s[2],Oe.isFunction(r)&&(n=r,r={}),Oe.isFunction(t)?(n=t,t=this.weblgcy.defaultAddress.hex):Oe.isObject(t)&&(r=t,t=this.weblgcy.defaultAddress.hex),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this._getReward,t,r));case 7:i={address:this.weblgcy.address.toHex(t)},this.weblgcy[r.confirmed?"solidityNode":"fullNode"].request("wallet".concat(r.confirmed?"solidity":"","/getReward"),i,"post").then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e.reward)return n("Not found.");n(null,e.reward)})).catch((function(e){return n(e)}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateAccount",value:(r=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.updateAccount,t,r));case 7:if(Oe.isString(t)&&t.length){e.next=9;break}return e.abrupt("return",n("Name must be a string"));case 9:if((r=Ye({privateKey:this.weblgcy.defaultPrivateKey,address:this.weblgcy.defaultAddress.hex},r)).privateKey||r.address){e.next=12;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 12:return e.prev=12,i=r.privateKey?this.weblgcy.address.fromPrivateKey(r.privateKey):r.address,e.next=16,this.weblgcy.transactionBuilder.updateAccount(t,i);case 16:return s=e.sent,e.next=19,this.sign(s,r.privateKey||void 0);case 19:return a=e.sent,e.next=22,this.sendRawTransaction(a);case 22:return o=e.sent,e.abrupt("return",n(null,o));case 26:return e.prev=26,e.t0=e.catch(12),e.abrupt("return",n(e.t0));case 29:case"end":return e.stop()}}),e,this,[[12,26]])}))),function(){return r.apply(this,arguments)})},{key:"triggerSmartContract",value:(t=d()(N.a.mark((function e(){var t,r,n,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return"object"!==h()(r[2])&&(r[2]={feeLimit:r[2],callValue:r[3]},r.splice(3,1)),e.abrupt("return",this._triggerSmartContract.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"signMessage",value:function(){return this.sign.apply(this,arguments)}},{key:"sendAsset",value:function(){return this.sendToken.apply(this,arguments)}},{key:"send",value:function(){return this.sendTransaction.apply(this,arguments)}},{key:"sendUsdl",value:function(){return this.sendTransaction.apply(this,arguments)}},{key:"broadcast",value:function(){return this.sendRawTransaction.apply(this,arguments)}},{key:"signTransaction",value:function(){return this.sign.apply(this,arguments)}},{key:"getProposal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Oe.isInteger(e)||e<0?t("Invalid proposalID provided"):void this.weblgcy.fullNode.request("wallet/getproposalbyid",{id:parseInt(e)},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)})):this.injectPromise(this.getProposal,e)}},{key:"listProposals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listProposals);this.weblgcy.fullNode.request("wallet/listproposals",{},"post").then((function(t){var r=t.proposals;e(null,void 0===r?[]:r)})).catch((function(t){return e(t)}))}},{key:"getChainParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getChainParameters);this.weblgcy.fullNode.request("wallet/getchainparameters",{},"post").then((function(t){var r=t.chainParameter;e(null,void 0===r?[]:r)})).catch((function(t){return e(t)}))}},{key:"getAccountResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.weblgcy.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.weblgcy.isAddress(e)?void this.weblgcy.fullNode.request("wallet/getaccountresource",{address:this.weblgcy.address.toHex(e)},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)})):t("Invalid address provided"):this.injectPromise(this.getAccountResources,e)}},{key:"getExchangeByID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Oe.isInteger(e)||e<0?t("Invalid exchangeID provided"):void this.weblgcy.fullNode.request("wallet/getexchangebyid",{id:e},"post").then((function(e){t(null,e)})).catch((function(e){return t(e)})):this.injectPromise(this.getExchangeByID,e)}},{key:"listExchanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listExchanges);this.weblgcy.fullNode.request("wallet/listexchanges",{},"post").then((function(t){var r=t.exchanges;e(null,void 0===r?[]:r)}),"post").catch((function(t){return e(t)}))}},{key:"listExchangesPaginated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe.isFunction(t)&&(r=t,t=0),Oe.isFunction(e)&&(r=e,e=30),!r)return this.injectPromise(this.listExchanges);this.weblgcy.fullNode.request("wallet/listexchangespaginated",{limit:e,offset:t},"post").then((function(e){var t=e.exchanges;r(null,void 0===t?[]:t)})).catch((function(e){return r(e)}))}},{key:"getNodeInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getNodeInfo);this.weblgcy.fullNode.request("wallet/getnodeinfo",{},"post").then((function(t){e(null,t)}),"post").catch((function(t){return e(t)}))}},{key:"getTokenListByName",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r?(Oe.isInteger(t)&&(t=t.toString()),Oe.isString(t)&&t.length?void this.weblgcy.fullNode.request("wallet/getassetissuelistbyname",{value:this.weblgcy.fromUtf8(t)},"post").then((function(t){if(!t.name)return r("Token does not exist");r(null,e._parseToken(t))})).catch((function(e){return r(e)})):r("Invalid token ID provided")):this.injectPromise(this.getTokenListByName,t)}},{key:"getTokenByID",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r?(Oe.isInteger(t)&&(t=t.toString()),Oe.isString(t)&&t.length?void this.weblgcy.fullNode.request("wallet/getassetissuebyid",{value:t},"post").then((function(t){if(!t.name)return r("Token does not exist");r(null,e._parseToken(t))})).catch((function(e){return r(e)})):r("Invalid token ID provided")):this.injectPromise(this.getTokenByID,t)}}]),e}();function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tt=function(e){return e.map((function(e){return e.type}))},rt=function(e,t){var r=e.map((function(e){return e.name})).filter((function(e){return!!e})),n=e.map((function(e){return e.type}));return Oe.abi.decodeParams(r,n,t)},nt=function(){function e(t,r){v()(this,e),this.weblgcy=t.weblgcy,this.contract=t,this.abi=r,this.name=r.name||(r.name=r.type),this.inputs=r.inputs||[],this.outputs=r.outputs||[],this.functionSelector=function(e){return e.name+"("+tt(e.inputs||[]).join(",")+")"}(r),this.signature=this.weblgcy.sha3(this.functionSelector,!1).slice(0,8),this.injectPromise=Oe.promiseInjector(this),this.defaultOptions={feeLimit:1e9,callValue:0,userFeePercentage:100,shouldPollResponse:!1}}var t,r,n;return p()(e,[{key:"decodeInput",value:function(e){return rt(this.inputs,"0x"+e)}},{key:"onMethod",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=tt(this.inputs);return r.forEach((function(t,n){"address"==i[n]&&(r[n]=e.weblgcy.address.toHex(t).replace(/^(30)/,"0x")),"address[]"==i[n]&&(r[n]=r[n].map((function(t){return e.weblgcy.address.toHex(t).replace(/^(30)/,"0x")})))})),{call:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._call.apply(e,[i,r].concat(n))},send:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._send.apply(e,[i,r].concat(n))},watch:function(){return e._watch.apply(e,arguments)}}}},{key:"_call",value:(n=d()(N.a.mark((function e(t,r){var n,i,s,a,o=this,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},i=u.length>3&&void 0!==u[3]&&u[3],Oe.isFunction(n)&&(i=n,n={}),i){e.next=5;break}return e.abrupt("return",this.injectPromise(this._call,t,r,n));case 5:if(t.length===r.length){e.next=7;break}return e.abrupt("return",i("Invalid argument count provided"));case 7:if(this.contract.address){e.next=9;break}return e.abrupt("return",i("Smart contract is missing address"));case 9:if(this.contract.deployed){e.next=11;break}return e.abrupt("return",i("Calling smart contracts requires you to load the contract first"));case 11:if(s=this.abi.stateMutability,["pure","view"].includes(s.toLowerCase())){e.next=14;break}return e.abrupt("return",i('Methods with state mutability "'.concat(s,'" must use send()')));case 14:n=et(et({},this.defaultOptions),{},{from:this.weblgcy.defaultAddress.hex},n),a=r.map((function(e,r){return{type:t[r],value:e}})),this.weblgcy.transactionBuilder.triggerSmartContract(this.contract.address,this.functionSelector,n,a,!!n.from&&this.weblgcy.address.toHex(n.from),(function(e,t){if(e)return i(e);if(!Oe.hasProperty(t,"constant_result"))return i("Failed to execute");try{var r=t.constant_result[0].length;if(0===r||r%64==8){var n="The call has been reverted or has thrown an error.";if(0!==r){n+=" Error message: ";for(var s="",a=t.constant_result[0].substring(8),u=0;u<r-8;u+=64)s+=o.weblgcy.toUtf8(a.substring(u,u+64));n+=s.replace(/(\u0000|\u000b|\f)+/g," ").replace(/ +/g," ").replace(/\s+$/g,"")}return i(n)}var c=rt(o.outputs,"0x"+t.constant_result[0]);return 1===c.length&&(c=c[0]),i(null,c)}catch(e){return i(e)}}));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_send",value:(r=d()(N.a.mark((function e(t,r){var n,i,s,a,o,u,c,l,h,f,v=this,g=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>2&&void 0!==g[2]?g[2]:{},i=g.length>3&&void 0!==g[3]?g[3]:this.weblgcy.defaultPrivateKey,s=g.length>4&&void 0!==g[4]&&g[4],Oe.isFunction(i)&&(s=i,i=this.weblgcy.defaultPrivateKey),Oe.isFunction(n)&&(s=n,n={}),s){e.next=7;break}return e.abrupt("return",this.injectPromise(this._send,t,r,n,i));case 7:if(t.length===r.length){e.next=9;break}throw new Error("Invalid argument count provided");case 9:if(this.contract.address){e.next=11;break}return e.abrupt("return",s("Smart contract is missing address"));case 11:if(this.contract.deployed){e.next=13;break}return e.abrupt("return",s("Calling smart contracts requires you to load the contract first"));case 13:if(a=this.abi.stateMutability,!["pure","view"].includes(a.toLowerCase())){e.next=16;break}return e.abrupt("return",s('Methods with state mutability "'.concat(a,'" must use call()')));case 16:return["payable"].includes(a.toLowerCase())||(n.callValue=0),n=et(et({},this.defaultOptions),{},{from:this.weblgcy.defaultAddress.hex},n),o=r.map((function(e,r){return{type:t[r],value:e}})),e.prev=19,u=i?this.weblgcy.address.fromPrivateKey(i):this.weblgcy.defaultAddress.base58,e.next=23,this.weblgcy.transactionBuilder.triggerSmartContract(this.contract.address,this.functionSelector,n,o,this.weblgcy.address.toHex(u));case 23:if((c=e.sent).result&&c.result.result){e.next=26;break}return e.abrupt("return",s("Unknown error: "+JSON.stringify(c,null,2)));case 26:return e.next=28,this.weblgcy.legacy.sign(c.transaction,i);case 28:if((l=e.sent).signature){e.next=33;break}if(i){e.next=32;break}return e.abrupt("return",s("Transaction was not signed properly"));case 32:return e.abrupt("return",s("Invalid private key provided"));case 33:return e.next=35,this.weblgcy.legacy.sendRawTransaction(l);case 35:if(!(h=e.sent).code){e.next=38;break}return e.abrupt("return",s({error:h.code,message:this.weblgcy.toUtf8(h.message)}));case 38:if(n.shouldPollResponse){e.next=40;break}return e.abrupt("return",s(null,l.txID));case 40:(f=function(){var e=d()(N.a.mark((function e(){var t,r,i,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(20!=(t=a.length>0&&void 0!==a[0]?a[0]:0)){e.next=3;break}return e.abrupt("return",s({error:"Cannot find result in solidity node",transaction:l}));case 3:return e.next=5,v.weblgcy.legacy.getTransactionInfo(l.txID);case 5:if(r=e.sent,Object.keys(r).length){e.next=8;break}return e.abrupt("return",setTimeout((function(){f(t+1)}),3e3));case 8:if(!r.result||"FAILED"!=r.result){e.next=10;break}return e.abrupt("return",s({error:v.weblgcy.toUtf8(r.resMessage),transaction:l,output:r}));case 10:if(Oe.hasProperty(r,"contractResult")){e.next=12;break}return e.abrupt("return",s({error:"Failed to execute: "+JSON.stringify(r,null,2),transaction:l,output:r}));case 12:if(!n.rawResponse){e.next=14;break}return e.abrupt("return",s(null,r));case 14:return 1===(i=rt(v.outputs,"0x"+r.contractResult[0])).length&&(i=i[0]),e.abrupt("return",s(null,i));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),e.next=47;break;case 44:return e.prev=44,e.t0=e.catch(19),e.abrupt("return",s(e.t0));case 47:case"end":return e.stop()}}),e,this,[[19,44]])}))),function(e,t){return r.apply(this,arguments)})},{key:"_watch",value:(t=d()(N.a.mark((function e(){var t,r,n,i,s,a,o,u=this,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1&&void 0!==c[1]&&c[1],Oe.isFunction(t)&&(r=t,t={}),Oe.isFunction(r)){e.next=5;break}throw new Error("Expected callback to be provided");case 5:if(this.contract.address){e.next=7;break}return e.abrupt("return",r("Smart contract is missing address"));case 7:if("event"===this.abi.type.toLowerCase()){e.next=9;break}return e.abrupt("return",r("Invalid method type for event watching"));case 9:if(this.weblgcy.eventServer){e.next=11;break}return e.abrupt("return",r("No event server configured"));case 11:return n=!1,i=!1,s=Date.now()-1e3,a=function(){var e=d()(N.a.mark((function e(){var r,n,a,o,c,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={since:s,eventName:u.name,sort:"block_timestamp",blockNumber:"latest",filters:t.filters},t.resourceNode&&(/full/i.test(t.resourceNode)?r.onlyUnconfirmed=!0:r.onlyConfirmed=!0),e.next=5,u.weblgcy.event.getEventsByContactAddress(u.contract.address,r);case 5:return n=e.sent,a=n.sort((function(e,t){return t.block-e.block})),o=Re()(a,1),c=o[0],d=n.filter((function(e,r){return!(t.resourceNode&&e.resourceNode&&t.resourceNode.toLowerCase()!==e.resourceNode.toLowerCase()||n.slice(0,r).some((function(t){return JSON.stringify(t)==JSON.stringify(e)}))||i&&!(e.block>i))})),c&&(i=c.block),e.abrupt("return",d);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),o=function(){n&&clearInterval(n),n=setInterval((function(){a().then((function(e){return e.forEach((function(e){r(null,Oe.parseEvent(e,u.abi))}))})).catch((function(e){return r(e)}))}),3e3)},e.next=18,a();case 18:return o(),e.abrupt("return",{start:o(),stop:function(){n&&(clearInterval(n),n=!1)}});case 20:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(v()(this,e),!t||!t instanceof ht)throw new Error("Expected instance of Weblgcy");this.weblgcy=t,this.injectPromise=Oe.promiseInjector(this),this.address=n,this.abi=r,this.eventListener=!1,this.bytecode=!1,this.deployed=!1,this.lastBlock=!1,this.methods={},this.methodInstances={},this.props=[],this.weblgcy.isAddress(n)?this.deployed=!0:this.address=!1,this.loadAbi(r)}var t,r,n,i;return p()(e,[{key:"_getEvents",value:(i=d()(N.a.mark((function e(){var t,r,n,i,s,a,o=this,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.weblgcy.event.getEventsByContactAddress(this.address,t);case 3:return r=e.sent,n=r.sort((function(e,t){return t.block-e.block})),i=Re()(n,1),s=i[0],a=r.filter((function(e,n){return!(t.resourceNode&&e.resourceNode&&t.resourceNode.toLowerCase()!==e.resourceNode.toLowerCase()||r.slice(0,n).some((function(t){return JSON.stringify(t)==JSON.stringify(e)}))||o.lastBlock&&!(e.block>o.lastBlock))})),s&&(this.lastBlock=s.block),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_startEventListener",value:(n=d()(N.a.mark((function e(){var t,r,n=this,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1?i[1]:void 0,Oe.isFunction(t)&&(r=t,t={}),this.eventListener&&clearInterval(this.eventListener),this.weblgcy.eventServer){e.next=6;break}throw new Error("Event server is not configured");case 6:if(this.address){e.next=8;break}throw new Error("Contract is not configured with an address");case 8:return this.eventCallback=r,e.next=11,this._getEvents(t);case 11:this.eventListener=setInterval((function(){n._getEvents(t).then((function(e){return e.forEach((function(e){n.eventCallback&&n.eventCallback(e)}))})).catch((function(e){console.error("Failed to get event list",e)}))}),3e3);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_stopEventListener",value:function(){this.eventListener&&(clearInterval(this.eventListener),this.eventListener=!1,this.eventCallback=!1)}},{key:"hasProperty",value:function(e){return this.hasOwnProperty(e)||this.__proto__.hasOwnProperty(e)}},{key:"loadAbi",value:function(e){var t=this;this.abi=e,this.methods={},this.props.forEach((function(e){return delete t[e]})),e.forEach((function(e){if("constructor"!==e.type.toLowerCase()){var r=new nt(t,e),n=r.onMethod.bind(r),i=r.name,s=r.functionSelector,a=r.signature;t.methods[i]=n,t.methods[s]=n,t.methods[a]=n,t.methodInstances[i]=r,t.methodInstances[s]=r,t.methodInstances[a]=r,t.hasProperty(i)||(t[i]=n,t.props.push(i)),t.hasProperty(s)||(t[s]=n,t.props.push(s)),t.hasProperty(a)||(t[a]=n,t.props.push(a))}}))}},{key:"decodeInput",value:function(e){var t=e.substring(0,8),r=e.substring(8);if(!this.methodInstances[t])throw new Error("Contract method "+t+" not found");return{name:this.methodInstances[t].name,params:this.methodInstances[t].decodeInput(r)}}},{key:"new",value:(r=d()(N.a.mark((function e(t){var r,n,i,s,a,o,u=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:this.weblgcy.defaultPrivateKey,n=u.length>2&&void 0!==u[2]&&u[2],Oe.isFunction(r)&&(n=r,r=this.weblgcy.defaultPrivateKey),n){e.next=5;break}return e.abrupt("return",this.injectPromise(this.new,t,r));case 5:return e.prev=5,i=this.weblgcy.address.fromPrivateKey(r),e.next=9,this.weblgcy.transactionBuilder.createSmartContract(t,i);case 9:return s=e.sent,e.next=12,this.weblgcy.legacy.sign(s,r);case 12:return a=e.sent,e.next=15,this.weblgcy.legacy.sendRawTransaction(a);case 15:if(!(o=e.sent).code){e.next=18;break}return e.abrupt("return",n({error:o.code,message:this.weblgcy.toUtf8(o.message)}));case 18:return e.abrupt("return",this.at(a.contract_address,n));case 21:return e.prev=21,e.t0=e.catch(5),e.abrupt("return",n(e.t0));case 24:case"end":return e.stop()}}),e,this,[[5,21]])}))),function(e){return r.apply(this,arguments)})},{key:"at",value:(t=d()(N.a.mark((function e(t){var r,n,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1]){e.next=3;break}return e.abrupt("return",this.injectPromise(this.at,t));case 3:return e.prev=3,e.next=6,this.weblgcy.legacy.getContract(t);case 6:if((n=e.sent).contract_address){e.next=9;break}return e.abrupt("return",r("Unknown error: "+JSON.stringify(n,null,2)));case 9:return this.address=n.contract_address,this.bytecode=n.bytecode,this.deployed=!0,this.loadAbi(n.abi.entrys),e.abrupt("return",r(null,this));case 16:if(e.prev=16,e.t0=e.catch(3),!e.t0.toString().includes("does not exist")){e.next=20;break}return e.abrupt("return",r("Contract has not been deployed on the network"));case 20:return e.abrupt("return",r(e.t0));case 21:case"end":return e.stop()}}),e,this,[[3,16]])}))),function(e){return t.apply(this,arguments)})},{key:"events",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Oe.isFunction(e)&&(t=e,e={}),!Oe.isFunction(t))throw new Error("Callback function expected");var r=this;return{start:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n?(r._startEventListener(e,t).then((function(){n()})).catch((function(e){n(e)})),this):(r._startEventListener(e,t),this)},stop:function(){r._stopEventListener()}}}}]),e}(),st=r(20),at=r.n(st),ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v()(this,e),!t||!t instanceof ht)throw new Error("Expected instance of Weblgcy");this.weblgcy=t,this.pluginNoOverride=["register"]}return p()(e,[{key:"register",value:function(e){var t={requires:"0.0.0",components:{}},r={plugged:[],skipped:[]},n=new e(this.weblgcy);if(Oe.isFunction(n.pluginInterface)&&(t=n.pluginInterface()),!at.a.satisfies(ht.version,t.requires))throw new Error("The plugin is not compatible with this version of Weblgcy");for(var i in t.components)if(this.weblgcy.hasOwnProperty(i)){var s=t.components[i],a=this.weblgcy[i].pluginNoOverride||[];for(var o in s)"constructor"===o||this.weblgcy[i][o]&&(a.includes(o)||/^_/.test(o))?r.skipped.push(o):(this.weblgcy[i][o]=s[o].bind(this.weblgcy[i]),r.plugged.push(o))}return r}}]),e}(),ut=r(21),ct=r.n(ut),dt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v()(this,e),!(t&&t instanceof ht))throw new Error("Expected instance of Weblgcy");this.weblgcy=t,this.injectPromise=Oe.promiseInjector(this)}return p()(e,[{key:"setServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"healthcheck";if(!t)return this.weblgcy.eventServer=!1;if(Oe.isString(t)&&(t=new Ee.HttpProvider(t)),!this.weblgcy.isValidProvider(t))throw new Error("Invalid event server provided");this.weblgcy.eventServer=t,this.weblgcy.eventServer.isConnected=function(){return e.weblgcy.eventServer.request(r).then((function(){return!0})).catch((function(){return!1}))}}},{key:"getEventsByContactAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.assign({sinceTimestamp:0,eventName:!1,blockNumber:!1,size:20,page:1},t),i=n.sinceTimestamp,s=n.since,a=n.fromTimestamp,o=n.eventName,u=n.blockNumber,c=n.size,d=n.page,l=n.onlyConfirmed,f=n.onlyUnconfirmed,v=n.previousLastEventFingerprint,g=n.previousFingerprint,p=n.fingerprint,y=n.rawResponse,b=n.sort,w=n.filters;if(!r)return this.injectPromise(this.getEventsByContactAddress,e,t);if(a=a||i||s,!this.weblgcy.eventServer)return r("No event server configured");var m=[];if(!this.weblgcy.isAddress(e))return r("Invalid contract address provided");if(o&&!e)return r("Usage of event name filtering requires a contract address");if(void 0!==a&&!Oe.isInteger(a))return r("Invalid fromTimestamp provided");if(!Oe.isInteger(c))return r("Invalid size provided");if(c>200&&(console.warn("Defaulting to maximum accepted size: 200"),c=200),!Oe.isInteger(d))return r("Invalid page provided");if(u&&!o)return r("Usage of block number filtering requires an event name");e&&m.push(this.weblgcy.address.fromHex(e)),o&&m.push(o),u&&m.push(u);var k={size:c,page:d};return"object"===h()(w)&&Object.keys(w).length>0&&(k.filters=JSON.stringify(w)),a&&(k.fromTimestamp=k.since=a),l&&(k.onlyConfirmed=l),f&&!l&&(k.onlyUnconfirmed=f),b&&(k.sort=b),(p=p||g||v)&&(k.fingerprint=p),this.weblgcy.eventServer.request("event/contract/".concat(m.join("/"),"?").concat(ct.a.stringify(k))).then((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Oe.isArray(e)?r(null,!0===y?e:e.map((function(e){return Oe.mapEvent(e)}))):r(e):r("Unknown error occurred")})).catch((function(e){return r(e.response&&e.response.data||e)}))}},{key:"getEventsByTransactionID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oe.isFunction(t)&&(r=t,t={}),r?this.weblgcy.eventServer?this.weblgcy.eventServer.request("event/transaction/".concat(e)).then((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Oe.isArray(e)?r(null,!0===t.rawResponse?e:e.map((function(e){return Oe.mapEvent(e)}))):r(e):r("Unknown error occurred")})).catch((function(e){return r(e.response&&e.response.data||e)})):r("No event server configured"):this.injectPromise(this.getEventsByTransactionID,e,t)}}]),e}();function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A()(e);if(t){var i=A()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x()(this,r)}}var ht=function(e){m()(i,e);var t,r,n=lt(i);function i(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return v()(this,i),e=n.call(this),"object"===h()(r)&&(r.fullNode||r.fullHost)?(o=r.privateKey||s,t=r.fullNode||r.fullHost,s=r.solidityNode||r.fullHost,a=r.eventServer||r.fullHost):t=r,Oe.isString(t)&&(t=new Ee.HttpProvider(t)),Oe.isString(s)&&(s=new Ee.HttpProvider(s)),Oe.isString(a)&&(a=new Ee.HttpProvider(a)),e.event=new dt(b()(e)),e.transactionBuilder=new $e(b()(e)),e.legacy=new Ze(b()(e)),e.plugin=new ot(b()(e)),e.utils=Oe,e.setFullNode(t),e.setSolidityNode(s),e.setEventServer(a),e.providers=Ee,e.BigNumber=Ce.a,e.defaultBlock=!1,e.defaultPrivateKey=!1,e.defaultAddress={hex:!1,base58:!1},["sha3","toHex","toUtf8","fromUtf8","toAscii","fromAscii","toDecimal","fromDecimal","toSun","fromSun","toBigNumber","isAddress","createAccount","address"].forEach((function(t){e[t]=i[t]})),o&&e.setPrivateKey(o),e.injectPromise=Oe.promiseInjector(b()(e)),e}return p()(i,[{key:"setDefaultBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if([!1,"latest","earliest",0].includes(e))return this.defaultBlock=e;if(!Oe.isInteger(e)||!e)throw new Error("Invalid block ID provided");this.defaultBlock=Math.abs(e)}},{key:"setPrivateKey",value:function(e){try{this.setAddress(this.address.fromPrivateKey(e))}catch(e){throw new Error("Invalid private key provided")}this.defaultPrivateKey=e,this.emit("privateKeyChanged",e)}},{key:"setAddress",value:function(e){if(!this.isAddress(e))throw new Error("Invalid address provided");var t=this.address.toHex(e),r=this.address.fromHex(e);this.defaultPrivateKey&&this.address.fromPrivateKey(this.defaultPrivateKey)!==r&&(this.defaultPrivateKey=!1),this.defaultAddress={hex:t,base58:r},this.emit("addressChanged",{hex:t,base58:r})}},{key:"isValidProvider",value:function(e){return Object.values(Ee).some((function(t){return e instanceof t}))}},{key:"setFullNode",value:function(e){if(Oe.isString(e)&&(e=new Ee.HttpProvider(e)),!this.isValidProvider(e))throw new Error("Invalid full node provided");this.fullNode=e,this.fullNode.setStatusPage("wallet/getnowblock")}},{key:"setSolidityNode",value:function(e){if(Oe.isString(e)&&(e=new Ee.HttpProvider(e)),!this.isValidProvider(e))throw new Error("Invalid solidity node provided");this.solidityNode=e,this.solidityNode.setStatusPage("walletsolidity/getnowblock")}},{key:"setEventServer",value:function(){var e;(e=this.event).setServer.apply(e,arguments)}},{key:"currentProviders",value:function(){return{fullNode:this.fullNode,solidityNode:this.solidityNode,eventServer:this.eventServer}}},{key:"currentProvider",value:function(){return this.currentProviders()}},{key:"getEventResult",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"object"!==h()(r[1])&&(r[1]={sinceTimestamp:r[1]||0,eventName:r[2]||!1,blockNumber:r[3]||!1,size:r[4]||20,page:r[5]||1},r.splice(2,4),Oe.isFunction(r[2])||(Oe.isFunction(r[1].page)?(r[2]=r[1].page,r[1].page=1):Oe.isFunction(r[1].size)&&(r[2]=r[1].size,r[1].size=20,r[1].page=1))),(e=this.event).getEventsByContactAddress.apply(e,r)}},{key:"getEventByTransactionID",value:function(){var e;return(e=this.event).getEventsByTransactionID.apply(e,arguments)}},{key:"contract",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new it(this,e,t)}},{key:"isConnected",value:(r=d()(N.a.mark((function e(){var t,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0]){e.next=3;break}return e.abrupt("return",this.injectPromise(this.isConnected));case 3:return e.t0=t,e.next=6,this.fullNode.isConnected();case 6:return e.t1=e.sent,e.next=9,this.solidityNode.isConnected();case 9:if(e.t2=e.sent,e.t3=this.eventServer,!e.t3){e.next=15;break}return e.next=14,this.eventServer.isConnected();case 14:e.t3=e.sent;case 15:return e.t4=e.t3,e.t5={fullNode:e.t1,solidityNode:e.t2,eventServer:e.t4},e.abrupt("return",(0,e.t0)(null,e.t5));case 18:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"address",get:function(){return{fromHex:function(e){return Oe.isHex(e)?Oe.crypto.getBase58CheckAddress(Oe.code.hexStr2byteArray(e.replace(/^0x/,"30"))):e},toHex:function(e){return Oe.isHex(e)?e.toLowerCase().replace(/^0x/,"30"):Oe.code.byteArray2hexStr(Oe.crypto.decodeBase58Address(e)).toLowerCase()},fromPrivateKey:function(e){try{return Oe.crypto.pkToAddress(e)}catch(e){return!1}}}}},{key:"sha3",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?"0x":"")+ne.utils.keccak256(Buffer.from(e,"utf-8")).toString().substring(2)}},{key:"toHex",value:function(e){if(Oe.isBoolean(e))return i.fromDecimal(+e);if(Oe.isBigNumber(e))return i.fromDecimal(e);if("object"===h()(e))return i.fromUtf8(JSON.stringify(e));if(Oe.isString(e)){if(/^(-|)0x/.test(e))return e;if(!isFinite(e))return i.fromUtf8(e)}var t=i.fromDecimal(e);if("0xNaN"===t)throw new Error("The passed value is not convertible to a hex string");return t}},{key:"toUtf8",value:function(e){if(Oe.isHex(e))return e=e.replace(/^0x/,""),Buffer.from(e,"hex").toString("utf8");throw new Error("The passed value is not a valid hex string")}},{key:"fromUtf8",value:function(e){if(!Oe.isString(e))throw new Error("The passed value is not a valid utf-8 string");return"0x"+Buffer.from(e,"utf8").toString("hex")}},{key:"toAscii",value:function(e){if(Oe.isHex(e)){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}throw new Error("The passed value is not a valid hex string")}},{key:"fromAscii",value:function(e,t){if(!Oe.isString(e))throw new Error("The passed value is not a valid utf-8 string");return"0x"+Buffer.from(e,"ascii").toString("hex").padEnd(t,"0")}},{key:"toDecimal",value:function(e){return i.toBigNumber(e).toNumber()}},{key:"fromDecimal",value:function(e){var t=i.toBigNumber(e),r=t.toString(16);return t.isLessThan(0)?"-0x"+r.substr(1):"0x"+r}},{key:"fromSun",value:function(e){var t=i.toBigNumber(e).div(1e6);return Oe.isBigNumber(e)?t:t.toString(10)}},{key:"toSun",value:function(e){var t=i.toBigNumber(e).times(1e6);return Oe.isBigNumber(e)?t:t.toString(10)}},{key:"toBigNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Oe.isBigNumber(e)?e:Oe.isString(e)&&/^(-|)0x/.test(e)?new Ce.a(e.replace("0x",""),16):new Ce.a(e.toString(10),10)}},{key:"isAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Oe.isString(e))return!1;if(42===e.length)try{return i.isAddress(Oe.crypto.getBase58CheckAddress(Oe.code.hexStr2byteArray(e)))}catch(e){return!1}try{return Oe.crypto.isAddressValid(e)}catch(e){return!1}}},{key:"createAccount",value:(t=d()(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.accounts.generateAccount(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),i}(Ke.a);S()(ht,"providers",Ee),S()(ht,"BigNumber",Ce.a),S()(ht,"TransactionBuilder",$e),S()(ht,"Legacy",Ze),S()(ht,"Contract",it),S()(ht,"Plugin",ot),S()(ht,"Event",dt),S()(ht,"version",qe.a)}]).default;
//# sourceMappingURL=Weblgcy.node.js.map