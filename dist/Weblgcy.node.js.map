{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"ethers\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/typeof\"","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"bignumber.js\"","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\"","webpack:///external \"elliptic\"","webpack:///external \"@babel/runtime/helpers/getPrototypeOf\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///external \"axios\"","webpack:///external \"jssha\"","webpack:///external \"validator\"","webpack:///external \"eventemitter3\"","webpack:///external \"semver\"","webpack:///external \"querystring\"","webpack:///./src/utils/base64.js","webpack:///./src/utils/bytes.js","webpack:///./src/utils/code.js","webpack:///./src/utils/base58.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/address.js","webpack:///./src/utils/accounts.js","webpack:///./src/utils/abi.js","webpack:///./src/utils/index.js","webpack:///./src/lib/providers/index.js","webpack:///./src/lib/providers/HttpProvider.js","webpack:///./src/paramValidator/index.js","webpack:///./src/lib/transactionBuilder.js","webpack:///./src/lib/legacy.js","webpack:///./src/lib/contract/method.js","webpack:///./src/lib/contract/index.js","webpack:///./src/lib/plugin.js","webpack:///./src/lib/event.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Base64","this","_keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","length","charCodeAt","isNaN","charAt","encodeIgnoreUtf8","inputBytes","decode","replace","indexOf","String","fromCharCode","_utf8_decode","decodeToByteArray","_out2ByteArray","utftext","byteArray","Array","_utf8_encode","string","c2","c3","byte2hexStr","byte","Error","str","bytesToString","arr","one","toString","v","match","bytesLength","store","slice","st","parseInt","hextoString","hex","split","out","tmp","byteArray2hexStr","base64DecodeFromString","string64","base64EncodeToString","bytes","bin2String","array","arrayEquals","array1","array2","strict","JSON","stringify","stringToBytes","len","push","hexChar2byte","isHexChar","hexStr2byteArray","j","k","strToDate","test","tempStrs","dateStrs","year","month","day","timeStrs","hour","minute","second","Date","isNumber","getStringType","ALPHABET","ALPHABET_MAP","encode58","buffer","digits","carry","reverse","map","digit","join","decode58","getBase58CheckAddress","addressBytes","hash0","SHA256","checkSum","concat","decodeBase58Address","base58Sting","address","offset","checkSum1","signTransaction","priKeyBytes","transaction","signature","ECKeySign","txID","isArray","includes","arrayToBase64String","a","btoa","signBytes","privateKey","contents","getRowBytesFromTransactionBase64","base64Data","bytesDecode","proto","protocol","Transaction","deserializeBinary","getRawData","serializeBinary","genPriKey","priKeyHex","EC","genKeyPair","getPrivate","computeAddress","pubBytes","Ethers","keccak256","substring","getAddressFromPriKey","getPubKeyFromPriKey","decode58Check","addressStr","decodeCheck","decodeData","hash1","isAddressValid","base58Str","getBase58CheckAddressFromPriKeyBase64String","priKeyBase64String","getHexStrAddressFromPriKeyBase64String","getAddressFromPriKeyBase64String","pubkey","keyFromPrivate","getPublic","x","y","xHex","yHex","hashBytes","sign","id","recoveryParam","rHex","sHex","msgBytes","shaObj","jsSHA","msgHex","update","getHash","passwordToAddress","password","pkToAddress","generateAccount","pubKeyBytes","publicKey","base58","abiCoder","AbiCoder","decodeParams","names","types","ignoreMethodHash","reduce","obj","arg","index","substr","toLowerCase","encodeParams","values","Weblgcy","toHex","isValidURL","url","validator","isURL","protocols","require_tld","isObject","isJson","parse","ex","isBoolean","bool","isBigNumber","number","BigNumber","constructor","isString","isFunction","isHex","isInteger","Number","hasProperty","hasProperties","properties","injectPromise","func","args","Promise","resolve","reject","err","res","promiseInjector","scope","mapEvent","event","data","block","block_number","timestamp","block_timestamp","contract","contract_address","event_name","transaction_id","result","resourceNode","resource_Node","_unconfirmed","unconfirmed","_fingerprint","fingerprint","parseEvent","abi","inputs","type","padLeft","padding","amount","isNotNullOrUndefined","val","code","accounts","crypto","HttpProvider","host","timeout","user","headers","statusPage","utils","instance","axios","baseURL","auth","request","then","payload","method","keys","params","self","Validator","weblgcy","param","msg","callback","Function","normalized","gt","lt","gte","lte","optional","isAddress","invalid","notEqual","fromUtf8","resultManager","message","toUtf8","TransactionBuilder","to","from","defaultAddress","sendUsdl","notValid","fullNode","to_address","owner_address","tokenID","sendToken","asset_name","issuerAddress","buyer","purchaseToken","duration","resource","receiverAddress","undefined","freezeBalance","frozen_balance","frozen_duration","receiver_address","unfreezeBalance","withdrawBlockRewards","applyForSR","votes","voterAddress","vote","entries","srAddress","voteCount","vote_address","vote_count","options","createSmartContract","feeLimit","userFeePercentage","originKandyLimit","callValue","tokenValue","tokenId","token_id","bytecode","parameters","payable","some","constructorParams","find","it","fee_limit","call_value","consume_user_resource_percent","origin_kandy_limit","parameter","call_token_value","splice","_triggerSmartContract","_isConstant","confirmed","triggerSmartContract","contractAddress","functionSelector","assign","function_selector","createToken","abbreviation","description","totalSupply","usdlRatio","tokenRatio","saleStart","now","saleEnd","freeBandwidth","freeBandwidthLimit","frozenAmount","frozenDuration","voteScore","precision","abbr","total_supply","lgcy_num","num","start_time","end_time","free_asset_net_limit","public_free_asset_net_limit","frozen_supply","frozen_amount","frozen_days","vote_score","accountName","account_name","updateAccount","updateToken","new_limit","new_public_limit","createProposal","proposalID","proposal_id","deleteProposal","isApproval","is_add_approval","voteProposal","tokenName","tokenBalance","usdlBalance","ownerAddress","first_token_id","first_token_balance","second_token_id","second_token_balance","resources","createUSDLExchange","firstTokenName","firstTokenBalance","secondTokenName","secondTokenBalance","createTokenExchange","exchangeID","tokenAmount","exchange_id","quant","injectExchangeTokens","withdrawExchangeTokens","tokenAmountSold","tokenAmountExpected","fromAscii","expected","tradeExchangeTokens","updateSetting","updateKandyLimit","permissions","permission_name","threshold","weight","operations","ownerPermissions","witnessPermissions","activesPermissions","updateAccountPermissions","checkPermissions","activesPermission","owner","witness","actives","Legacy","token","getCurrentBlock","getConfirmedCurrentBlock","solidityNode","defaultBlock","getBlockByHash","getBlockByNumber","getBlock","blockHash","blockID","getBlockTransactionCount","transactions","getTransactionFromBlock","transactionID","getTransaction","getConfirmedTransaction","getTransactionInfo","limit","getTransactionsRelated","getTransactionsToAddress","getTransactionsFromAddress","direction","all","tx","sort","b","raw_data","account","getAccount","getBalance","balance","getUnconfirmedAccount","getUnconfirmedBalance","freeNetUsed","freeNetLimit","NetUsed","NetLimit","getBandwidth","assetIssue","tokens","_parseToken","getTokensIssuedByAddress","getTokenFromID","listNodes","nodes","port","start","end","startNum","endNum","getBlockRange","listSuperRepresentatives","witnesses","listTokens","timeUntilNextVoteCycle","Math","floor","getContract","useLgcyHeader","verifyMessage","messageBytes","toUtf8Bytes","messageDigest","recovered","recoverAddress","lgcyAddress","fromHex","defaultPrivateKey","multisig","signingKey","SigningKey","signDigest","signatureHex","fromPrivateKey","signedTransaction","sendRawTransaction","sendTransaction","transactionBuilder","issuer","_getReward","reward","proposal","getProposal","listProposals","proposals","getChainParameters","chainParameter","getAccountResources","exchange","getExchangeByID","listExchanges","exchanges","getNodeInfo","info","getTokenListByName","getTokenByID","getParamTypes","decodeOutput","filter","Method","outputs","getFunctionSelector","sha3","defaultOptions","shouldPollResponse","forEach","methodArgs","_call","send","_send","watch","_watch","deployed","stateMutability","constant_result","msg2","chunk","legacy","broadcast","error","checkResult","setTimeout","resMessage","rawResponse","decoded","contractResult","eventServer","listener","lastBlock","since","getEvents","eventName","blockNumber","filters","onlyUnconfirmed","onlyConfirmed","getEventsByContactAddress","events","latestEvent","newEvents","priorEvent","bindListener","clearInterval","setInterval","stop","Contract","eventListener","methods","methodInstances","props","loadAbi","eventCallback","_getEvents","console","__proto__","prop","methodCall","onMethod","methodName","inputData","decodeInput","at","entrys","startCallback","_startEventListener","_stopEventListener","Plugin","pluginNoOverride","pluginInterface","requires","components","plugged","skipped","plugin","semver","satisfies","version","component","Event","healthcheck","providers","isValidProvider","isConnected","sinceTimestamp","size","page","fromTimestamp","previousLastEventFingerprint","previousFingerprint","routeParams","warn","qs","querystring","response","getEventsByTransactionID","fullHost","setFullNode","setSolidityNode","setEventServer","setPrivateKey","abs","setAddress","emit","provider","knownProvider","setStatusPage","setServer","currentProviders","prefix","Buffer","fromDecimal","isFinite","padEnd","toBigNumber","toNumber","isLessThan","sun","usdl","div","times","EventEmitter"],"mappings":"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","file":"Weblgcy.node.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"ethers\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/typeof\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"bignumber.js\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");","module.exports = require(\"elliptic\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"axios\");","module.exports = require(\"jssha\");","module.exports = require(\"validator\");","module.exports = require(\"eventemitter3\");","module.exports = require(\"semver\");","module.exports = require(\"querystring\");","export function Base64() {\n    this._keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n    this.encode = input => {\n        let output = \"\";\n        let chr1;\n        let chr2;\n        let chr3;\n        let enc1;\n        let enc2;\n        let enc3;\n        let enc4;\n        let i = 0;\n\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2))\n                enc3 = enc4 = 64;\n            else if (isNaN(chr3))\n                enc4 = 64;\n\n            output = output +\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n        }\n\n        return output;\n    }\n\n    this.encodeIgnoreUtf8 = inputBytes => {\n        let output = \"\";\n        let chr1;\n        let chr2;\n        let chr3;\n        let enc1;\n        let enc2;\n        let enc3;\n        let enc4;\n        let i = 0;\n\n        while (i < inputBytes.length) {\n            chr1 = inputBytes[i++];\n            chr2 = inputBytes[i++];\n            chr3 = inputBytes[i++];\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2))\n                enc3 = enc4 = 64;\n            else if (isNaN(chr3))\n                enc4 = 64;\n\n            output = output +\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n        }\n\n        return output;\n    }\n\n    this.decode = input => {\n        let output = \"\";\n        let chr1;\n        let chr2;\n        let chr3;\n        let enc1;\n        let enc2;\n        let enc3;\n        let enc4;\n        let i = 0;\n\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        while (i < input.length) {\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 != 64)\n                output = output + String.fromCharCode(chr2);\n\n            if (enc4 != 64)\n                output = output + String.fromCharCode(chr3);\n        }\n\n        return this._utf8_decode(output);\n    }\n\n    this.decodeToByteArray = input => {\n        let output = \"\";\n        let chr1;\n        let chr2;\n        let chr3;\n        let enc1;\n        let enc2;\n        let enc3;\n        let enc4;\n        let i = 0;\n\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        while (i < input.length) {\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 != 64)\n                output = output + String.fromCharCode(chr2);\n\n            if (enc4 != 64)\n                output = output + String.fromCharCode(chr3);\n        }\n\n        return this._out2ByteArray(output);\n    }\n\n    this._out2ByteArray = utftext => {\n        const byteArray = new Array(utftext.length);\n\n        let i = 0;\n        let c = 0;\n\n        while (i < utftext.length) {\n            c = utftext.charCodeAt(i);\n            byteArray[i] = c;\n            i++;\n        }\n\n        return byteArray;\n    }\n\n    this._utf8_encode = string => {\n        string = string.replace(/\\r\\n/g, \"\\n\");\n        let utftext = \"\";\n\n        for (let n = 0; n < string.length; n++) {\n            const c = string.charCodeAt(n);\n\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            } else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            } else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n        }\n\n        return utftext;\n    }\n\n    this._utf8_decode = utftext => {\n        let string = \"\";\n        let i = 0;\n        let c = 0;\n        let c2 = 0;\n        let c3 = 0;\n\n        while (i < utftext.length) {\n            c = utftext.charCodeAt(i);\n\n            if (c < 128) {\n                string += String.fromCharCode(c);\n                i++;\n            } else if ((c > 191) && (c < 224)) {\n                c2 = utftext.charCodeAt(i + 1);\n                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                i += 2;\n            } else {\n                c2 = utftext.charCodeAt(i + 1);\n                c3 = utftext.charCodeAt(i + 2);\n\n                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\n                i += 3;\n            }\n        }\n\n        return string;\n    }\n}\n","import {Base64} from './base64';\n\nexport function byte2hexStr(byte) {\n    if (typeof byte !== 'number')\n        throw new Error('Input must be a number');\n\n    if (byte < 0 || byte > 255)\n        throw new Error('Input must be a byte');\n\n    const hexByteMap = '0123456789ABCDEF';\n\n    let str = '';\n    str += hexByteMap.charAt(byte >> 4);\n    str += hexByteMap.charAt(byte & 0x0f);\n\n    return str;\n}\n\nexport function bytesToString(arr) {\n    if (typeof arr === 'string')\n        return arr;\n\n    let str = '';\n\n    for (let i = 0; i < arr.length; i++) {\n        const one = arr[i].toString(2);\n        const v = one.match(/^1+?(?=0)/);\n\n        if (v && one.length === 8) {\n            const bytesLength = v[0].length;\n            let store = arr[i].toString(2).slice(7 - bytesLength);\n\n            for (let st = 1; st < bytesLength; st++)\n                store += arr[st + i].toString(2).slice(2);\n\n            str += String.fromCharCode(parseInt(store, 2));\n            i += bytesLength - 1;\n        } else {\n            str += String.fromCharCode(arr[i]);\n        }\n    }\n\n    return str;\n}\n\nexport function hextoString(hex) {\n    const arr = hex.replace(/^0x/, '').split('');\n    let out = '';\n\n    for (let i = 0; i < arr.length / 2; i++) {\n        let tmp = `0x${arr[i * 2]}${arr[i * 2 + 1]}`;\n        out += String.fromCharCode(tmp);\n    }\n\n    return out;\n}\n\nexport function byteArray2hexStr(byteArray) {\n    let str = '';\n\n    for (let i = 0; i < (byteArray.length); i++)\n        str += byte2hexStr(byteArray[i]);\n\n    return str;\n}\n\nexport function base64DecodeFromString(string64) {\n    return new Base64().decodeToByteArray(string64);\n}\n\nexport function base64EncodeToString(bytes) {\n    const b = new Base64();\n    const string64 = b.encodeIgnoreUtf8(bytes);\n\n    return string64\n}\n\n","import {\n    byte2hexStr,\n    bytesToString,\n    hextoString,\n    byteArray2hexStr,\n    base64DecodeFromString,\n    base64EncodeToString\n} from './bytes';\n\nexport function bin2String(array) {\n    // TODO Do we need this alias?\n    return bytesToString(array);\n}\n\nexport function arrayEquals(array1, array2, strict) {\n    if (array1.length != array2.length)\n        return false;\n\n    let i;\n\n    for (i = 0; i < array1.length; i++) {\n        if (strict) {\n            if (array1[i] != array2[i])\n                return false;\n        } else if (JSON.stringify(array1[i]) != JSON.stringify(array2[i]))\n            return false;\n    }\n\n    return true;\n}\n\nexport function stringToBytes(str) {\n\n    if (typeof str !== 'string')\n        throw new Error('The passed string is not a string')\n\n    const bytes = new Array();\n    let len;\n    let c;\n\n    len = str.length;\n\n    for (let i = 0; i < len; i++) {\n        c = str.charCodeAt(i);\n\n        if (c >= 0x010000 && c <= 0x10FFFF) {\n            bytes.push(((c >> 18) & 0x07) | 0xF0);\n            bytes.push(((c >> 12) & 0x3F) | 0x80);\n            bytes.push(((c >> 6) & 0x3F) | 0x80);\n            bytes.push((c & 0x3F) | 0x80);\n        } else if (c >= 0x000800 && c <= 0x00FFFF) {\n            bytes.push(((c >> 12) & 0x0F) | 0xE0);\n            bytes.push(((c >> 6) & 0x3F) | 0x80);\n            bytes.push((c & 0x3F) | 0x80);\n        } else if (c >= 0x000080 && c <= 0x0007FF) {\n            bytes.push(((c >> 6) & 0x1F) | 0xC0);\n            bytes.push((c & 0x3F) | 0x80);\n        } else bytes.push(c & 0xFF);\n    }\n\n    return bytes;\n}\n\nexport {byte2hexStr, bytesToString, hextoString, byteArray2hexStr, base64DecodeFromString, base64EncodeToString}\n\nexport function hexChar2byte(c) {\n    let d;\n\n    if (c >= 'A' && c <= 'F')\n        d = c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n    else if (c >= 'a' && c <= 'f')\n        d = c.charCodeAt(0) - 'a'.charCodeAt(0) + 10;\n    else if (c >= '0' && c <= '9')\n        d = c.charCodeAt(0) - '0'.charCodeAt(0);\n\n    if (typeof d === 'number')\n        return d;\n    else\n        throw new Error('The passed hex char is not a valid hex char');\n}\n\nexport function isHexChar(c) {\n    if ((c >= 'A' && c <= 'F') ||\n        (c >= 'a' && c <= 'f') ||\n        (c >= '0' && c <= '9')) {\n        return 1;\n    }\n\n    return 0;\n}\n\nexport function hexStr2byteArray(str) {\n    if (typeof str !== 'string')\n        throw new Error('The passed string is not a string')\n\n    const byteArray = Array();\n    let d = 0;\n    let j = 0;\n    let k = 0;\n\n    for (let i = 0; i < str.length; i++) {\n        const c = str.charAt(i);\n\n        if (isHexChar(c)) {\n            d <<= 4;\n            d += hexChar2byte(c);\n            j++;\n\n            if (0 === (j % 2)) {\n                byteArray[k++] = d;\n                d = 0;\n            }\n        } else\n            throw new Error('The passed hex char is not a valid hex string')\n    }\n\n    return byteArray;\n}\n\n//yyyy-MM-DD HH-mm-ss\nexport function strToDate(str) {\n\n    if (!/^\\d{4}-\\d{2}-\\d{2}( \\d{2}-\\d{2}-\\d{2}|)/.test(str))\n        throw new Error('The passed date string is not valid')\n\n    const tempStrs = str.split(\" \");\n    const dateStrs = tempStrs[0].split(\"-\");\n    const year = parseInt(dateStrs[0], 10);\n    const month = parseInt(dateStrs[1], 10) - 1;\n    const day = parseInt(dateStrs[2], 10);\n\n    if (tempStrs.length > 1) {\n        const timeStrs = tempStrs[1].split(\"-\");\n        const hour = parseInt(timeStrs[0], 10);\n        const minute = parseInt(timeStrs[1], 10);\n        const second = parseInt(timeStrs[2], 10);\n\n        return new Date(year, month, day, hour, minute, second);\n    }\n\n    return new Date(year, month, day);\n}\n\nexport function isNumber(c) {\n    if (c >= '0' && c <= '9')\n        return 1;\n\n    return 0;\n}\n\n//return 1: address  --- 20Bytes HexString\n//return 2: blockNumber ------ Decimal number\n//return 3: assetName ------ String\n//return other: error\nexport function getStringType(str) {\n    if (null == str)\n        return -1;\n\n    if (typeof (str) != 'string')\n        return -1;\n\n    if (str.length == 0 || str == \"\")\n        return -1;\n\n    let i = 0;\n\n    // TODO Should we return 1 if someone passes a full, 42-chars long address?\n    // if (str.length == 42 && /^41/.test(str)) {\n    //     for (; i < 40; i++) {\n    //         var c = str.charAt(i+2);\n    //\n    //         if (!isHexChar(c))\n    //             break;\n    //     }\n    // } else\n    if (str.length == 40) {\n        for (; i < 40; i++) {\n            var c = str.charAt(i);\n\n            if (!isHexChar(c))\n                break;\n        }\n    }\n\n    if (i == 40)\n        return 1; //40 Hex, Address\n\n    for (i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n\n        if (!isNumber(c))\n            break;\n    }\n\n    if (i == str.length)\n        return 2; // All Decimal number, BlockNumber\n\n    for (i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n\n        if (c > ' ')\n            return 3; // At least one visible character\n    }\n\n    return -1;\n}\n","const ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\nconst ALPHABET_MAP = {};\n\nfor (let i = 0; i < ALPHABET.length; i++)\n    ALPHABET_MAP[ALPHABET.charAt(i)] = i;\n\nconst BASE = 58;\n\nexport function encode58(buffer) {\n    if (buffer.length === 0)\n        return '';\n\n    let i;\n    let j;\n\n    const digits = [0];\n\n    for (i = 0; i < buffer.length; i++) {\n        for (j = 0; j < digits.length; j++)\n            digits[j] <<= 8;\n\n        digits[0] += buffer[i];\n        let carry = 0;\n\n        for (j = 0; j < digits.length; ++j) {\n            digits[j] += carry;\n            carry = (digits[j] / BASE) | 0;\n            digits[j] %= BASE\n        }\n\n        while (carry) {\n            digits.push(carry % BASE);\n            carry = (carry / BASE) | 0\n        }\n    }\n\n    for (i = 0; buffer[i] === 0 && i < buffer.length - 1; i++)\n        digits.push(0);\n\n    return digits.reverse().map(digit => ALPHABET[digit]).join('');\n}\n\nexport function decode58(string) {\n    if (string.length === 0)\n        return [];\n\n    let i;\n    let j;\n\n    const bytes = [0];\n\n    for (i = 0; i < string.length; i++) {\n        const c = string[i];\n\n        if (!(c in ALPHABET_MAP))\n            throw new Error('Non-base58 character');\n\n        for (j = 0; j < bytes.length; j++)\n            bytes[j] *= BASE;\n\n        bytes[0] += ALPHABET_MAP[c];\n        let carry = 0;\n\n        for (j = 0; j < bytes.length; ++j) {\n            bytes[j] += carry;\n            carry = bytes[j] >> 8;\n            bytes[j] &= 0xff;\n        }\n\n        while (carry) {\n            bytes.push(carry & 0xff);\n            carry >>= 8;\n        }\n    }\n\n    for (i = 0; string[i] === '1' && i < string.length - 1; i++)\n        bytes.push(0);\n\n    return bytes.reverse();\n}\n","import jsSHA from 'jssha';\n\nimport {ADDRESS_PREFIX, ADDRESS_PREFIX_BYTE, ADDRESS_SIZE} from './address';\nimport {base64EncodeToString} from './code';\nimport {base64DecodeFromString, hexStr2byteArray} from './code';\nimport {encode58, decode58} from './base58';\nimport {byte2hexStr, byteArray2hexStr} from './bytes';\nimport {ec as EC} from 'elliptic';\nimport * as Ethers from 'ethers';\n\nexport function getBase58CheckAddress(addressBytes) {\n    const hash0 = SHA256(addressBytes);\n    const hash1 = SHA256(hash0);\n\n    let checkSum = hash1.slice(0, 4);\n    checkSum = addressBytes.concat(checkSum);\n\n    return encode58(checkSum);\n}\n\nexport function decodeBase58Address(base58Sting) {\n    if (typeof (base58Sting) != 'string')\n        return false;\n\n    if (base58Sting.length <= 4)\n        return false;\n\n    let address = decode58(base58Sting);\n\n    if (base58Sting.length <= 4)\n        return false;\n\n    const len = address.length;\n    const offset = len - 4;\n    const checkSum = address.slice(offset);\n\n    address = address.slice(0, offset);\n\n    const hash0 = SHA256(address);\n    const hash1 = SHA256(hash0);\n    const checkSum1 = hash1.slice(0, 4);\n\n    if (checkSum[0] == checkSum1[0] && checkSum[1] == checkSum1[1] && checkSum[2] ==\n        checkSum1[2] && checkSum[3] == checkSum1[3]\n    ) {\n        return address;\n    }\n\n    throw new Error('Invalid address provided');\n}\n\nexport function signTransaction(priKeyBytes, transaction) {\n    if (typeof priKeyBytes === 'string')\n        priKeyBytes = hexStr2byteArray(priKeyBytes);\n\n    const txID = transaction.txID;\n    const signature = ECKeySign(hexStr2byteArray(txID), priKeyBytes);\n\n    if (Array.isArray(transaction.signature)) {\n        if (!transaction.signature.includes(signature))\n            transaction.signature.push(signature);\n    } else\n        transaction.signature = [signature];\n    return transaction;\n}\n\nexport function arrayToBase64String(a) {\n    return btoa(String.fromCharCode(...a));\n}\n\nexport function signBytes(privateKey, contents) {\n    if (typeof privateKey === 'string')\n        privateKey = hexStr2byteArray(privateKey);\n\n    const hashBytes = SHA256(contents);\n    const signBytes = ECKeySign(hashBytes, privateKey);\n\n    return signBytes;\n}\n\nexport function getRowBytesFromTransactionBase64(base64Data) {\n    const bytesDecode = base64DecodeFromString(base64Data);\n    const transaction = proto.protocol.Transaction.deserializeBinary(bytesDecode);\n    const raw = transaction.getRawData();\n\n    return raw.serializeBinary();\n}\n\nexport function genPriKey() {\n    const ec = new EC('secp256k1');\n    const key = ec.genKeyPair();\n    const priKey = key.getPrivate();\n\n    let priKeyHex = priKey.toString('hex');\n\n    while (priKeyHex.length < 64) {\n        priKeyHex = `0${priKeyHex}`;\n    }\n\n    return hexStr2byteArray(priKeyHex);\n}\n\nexport function computeAddress(pubBytes) {\n    if (pubBytes.length === 65)\n        pubBytes = pubBytes.slice(1);\n\n    const hash = Ethers.utils.keccak256(pubBytes).toString().substring(2);\n    const addressHex = ADDRESS_PREFIX + hash.substring(24);\n\n    return hexStr2byteArray(addressHex);\n}\n\nexport function getAddressFromPriKey(priKeyBytes) {\n    let pubBytes = getPubKeyFromPriKey(priKeyBytes);\n    return computeAddress(pubBytes);\n}\n\nexport function decode58Check(addressStr) {\n    const decodeCheck = decode58(addressStr);\n\n    if (decodeCheck.length <= 4)\n        return false;\n\n    const decodeData = decodeCheck.slice(0, decodeCheck.length - 4);\n    const hash0 = SHA256(decodeData);\n    const hash1 = SHA256(hash0);\n\n    if (hash1[0] === decodeCheck[decodeData.length] &&\n        hash1[1] === decodeCheck[decodeData.length + 1] &&\n        hash1[2] === decodeCheck[decodeData.length + 2] &&\n        hash1[3] === decodeCheck[decodeData.length + 3]) {\n        return decodeData;\n    }\n\n    return false;\n}\n\nexport function isAddressValid(base58Str) {\n    if (typeof (base58Str) !== 'string')\n        return false;\n\n    if (base58Str.length !== ADDRESS_SIZE)\n        return false;\n\n    let address = decode58(base58Str);\n\n    if (address.length !== 25)\n        return false;\n\n    if (address[0] !== ADDRESS_PREFIX_BYTE)\n        return false;\n\n    const checkSum = address.slice(21);\n    address = address.slice(0, 21);\n\n    const hash0 = SHA256(address);\n    const hash1 = SHA256(hash0);\n    const checkSum1 = hash1.slice(0, 4);\n\n    if (checkSum[0] == checkSum1[0] && checkSum[1] == checkSum1[1] && checkSum[2] ==\n        checkSum1[2] && checkSum[3] == checkSum1[3]\n    ) {\n        return true\n    }\n\n    return false;\n}\n\nexport function getBase58CheckAddressFromPriKeyBase64String(priKeyBase64String) {\n    const priKeyBytes = base64DecodeFromString(priKeyBase64String);\n    const pubBytes = getPubKeyFromPriKey(priKeyBytes);\n    const addressBytes = computeAddress(pubBytes);\n\n    return getBase58CheckAddress(addressBytes);\n}\n\nexport function getHexStrAddressFromPriKeyBase64String(priKeyBase64String) {\n    const priKeyBytes = base64DecodeFromString(priKeyBase64String);\n    const pubBytes = getPubKeyFromPriKey(priKeyBytes);\n    const addressBytes = computeAddress(pubBytes);\n    const addressHex = byteArray2hexStr(addressBytes);\n\n    return addressHex;\n}\n\nexport function getAddressFromPriKeyBase64String(priKeyBase64String) {\n    const priKeyBytes = base64DecodeFromString(priKeyBase64String);\n    const pubBytes = getPubKeyFromPriKey(priKeyBytes);\n    const addressBytes = computeAddress(pubBytes);\n    const addressBase64 = base64EncodeToString(addressBytes);\n\n    return addressBase64;\n}\n\nexport function getPubKeyFromPriKey(priKeyBytes) {\n    const ec = new EC('secp256k1');\n    const key = ec.keyFromPrivate(priKeyBytes, 'bytes');\n    const pubkey = key.getPublic();\n    const x = pubkey.x;\n    const y = pubkey.y;\n\n    let xHex = x.toString('hex');\n\n    while (xHex.length < 64) {\n        xHex = `0${xHex}`;\n    }\n\n    let yHex = y.toString('hex');\n\n    while (yHex.length < 64) {\n        yHex = `0${yHex}`;\n    }\n\n    const pubkeyHex = `04${xHex}${yHex}`;\n    const pubkeyBytes = hexStr2byteArray(pubkeyHex);\n\n    return pubkeyBytes;\n}\n\nexport function ECKeySign(hashBytes, priKeyBytes) {\n    const ec = new EC('secp256k1');\n    const key = ec.keyFromPrivate(priKeyBytes, 'bytes');\n    const signature = key.sign(hashBytes);\n    const r = signature.r;\n    const s = signature.s;\n    const id = signature.recoveryParam;\n\n    let rHex = r.toString('hex');\n\n    while (rHex.length < 64) {\n        rHex = `0${rHex}`;\n    }\n\n    let sHex = s.toString('hex');\n\n    while (sHex.length < 64) {\n        sHex = `0${sHex}`;\n    }\n\n    const idHex = byte2hexStr(id);\n    const signHex = rHex + sHex + idHex;\n\n    return signHex;\n}\n\nexport function SHA256(msgBytes) {\n    const shaObj = new jsSHA('SHA-256', 'HEX');\n    const msgHex = byteArray2hexStr(msgBytes);\n\n    shaObj.update(msgHex);\n    const hashHex = shaObj.getHash('HEX');\n\n    return hexStr2byteArray(hashHex);\n}\n\nexport function passwordToAddress(password) {\n    const com_priKeyBytes = base64DecodeFromString(password);\n    const com_addressBytes = getAddressFromPriKey(com_priKeyBytes);\n\n    return getBase58CheckAddress(com_addressBytes);\n}\n\nexport function pkToAddress(privateKey) {\n    const com_priKeyBytes = hexStr2byteArray(privateKey);\n    const com_addressBytes = getAddressFromPriKey(com_priKeyBytes);\n\n    return getBase58CheckAddress(com_addressBytes);\n}\n","export const ADDRESS_SIZE = 34;\nexport const ADDRESS_PREFIX = \"30\";\nexport const ADDRESS_PREFIX_BYTE = 0x30;\n","import {byteArray2hexStr} from './bytes';\nimport {\n    getBase58CheckAddress,\n    genPriKey,\n    getAddressFromPriKey,\n    getPubKeyFromPriKey\n} from './crypto';\n\nexport function generateAccount() {\n    const priKeyBytes = genPriKey();\n    const pubKeyBytes = getPubKeyFromPriKey(priKeyBytes);\n    const addressBytes = getAddressFromPriKey(priKeyBytes);\n\n    const privateKey = byteArray2hexStr(priKeyBytes);\n    const publicKey = byteArray2hexStr(pubKeyBytes);\n\n    return {\n        privateKey,\n        publicKey,\n        address: {\n            base58: getBase58CheckAddress(addressBytes),\n            hex: byteArray2hexStr(addressBytes)\n        }\n    }\n}\n","import * as Ethers from 'ethers';\nimport Weblgcy from 'index';\n\nconst abiCoder = new Ethers.utils.AbiCoder();\n\nexport function decodeParams(names, types, output, ignoreMethodHash) {\n\n    if (!output || typeof output === 'boolean') {\n        ignoreMethodHash = output;\n        output = types;\n        types = names;\n        names = [];\n    }\n\n    if (ignoreMethodHash && output.replace(/^0x/, '').length % 64 === 8)\n        output = '0x' + output.replace(/^0x/, '').substring(8);\n\n    if (output.replace(/^0x/, '').length % 64)\n        throw new Error('The encoded string is not valid. Its length must be a multiple of 64.');\n\n    return abiCoder.decode(types, output).reduce((obj, arg, index) => {\n        if (types[index] == 'address')\n            arg = '30' + arg.substr(2).toLowerCase();\n\n        if (names.length)\n            obj[names[index]] = arg;\n        else obj.push(arg);\n\n        return obj;\n    }, names.length ? {} : []);\n}\n\nexport function encodeParams(types, values) {\n\n    for (let i = 0; i < types.length; i++) {\n        if (types[i] === 'address') {\n            values[i] = Weblgcy.address.toHex(values[i]).replace(/^30/, '0x');\n        }\n    }\n\n    return abiCoder.encode(types, values);\n}\n","import * as accounts from './accounts';\nimport * as base58 from './base58';\nimport * as bytes from './bytes';\nimport * as crypto from './crypto';\nimport * as code from './code';\nimport * as abi from './abi';\n\nimport validator from 'validator';\nimport BigNumber from 'bignumber.js';\n\nconst utils = {\n    isValidURL(url) {\n        if (typeof url !== 'string')\n            return false;\n        return validator.isURL(url.toString(), {\n            protocols: ['http', 'https'],\n            require_tld: false\n        });\n    },\n\n    isObject(obj) {\n        return obj === Object(obj) && Object.prototype.toString.call(obj) !== '[object Array]';\n    },\n\n    isArray(array) {\n        return Array.isArray(array);\n    },\n\n    isJson(string) {\n        try {\n            return !!JSON.parse(string);\n        } catch (ex) {\n            return false;\n        }\n    },\n\n    isBoolean(bool) {\n        return typeof bool === 'boolean';\n    },\n\n    isBigNumber(number) {\n        return number && (number instanceof BigNumber || (number.constructor && number.constructor.name === 'BigNumber'));\n    },\n\n    isString(string) {\n        return typeof string === 'string' || (string && string.constructor && string.constructor.name === 'String');\n    },\n\n    isFunction(obj) {\n        return typeof obj === 'function';\n    },\n\n    isHex(string) {\n        return (typeof string === 'string'\n            && !isNaN(parseInt(string, 16))\n            && /^(0x|)[a-fA-F0-9]+$/.test(string));\n    },\n\n    isInteger(number) {\n        if (number === null)\n            return false\n        return Number.isInteger(\n            Number(number)\n        );\n    },\n\n    hasProperty(obj, property) {\n        return Object.prototype.hasOwnProperty.call(obj, property);\n    },\n\n    hasProperties(obj, ...properties) {\n        return properties.length && !properties.map(property => {\n            return this.hasProperty(obj, property)\n        }).includes(false);\n    },\n\n    injectPromise(func, ...args) {\n        return new Promise((resolve, reject) => {\n            func(...args, (err, res) => {\n                if (err)\n                    reject(err);\n                else resolve(res);\n            });\n        });\n    },\n\n    promiseInjector(scope) {\n        return (func, ...args) => {\n            return this.injectPromise(func.bind(scope), ...args);\n        }\n    },\n\n    mapEvent(event) {\n        let data = {\n            block: event.block_number,\n            timestamp: event.block_timestamp,\n            contract: event.contract_address,\n            name: event.event_name,\n            transaction: event.transaction_id,\n            result: event.result,\n            resourceNode: event.resource_Node || (event._unconfirmed ? 'fullNode' : 'solidityNode')\n        };\n        if (event._unconfirmed) {\n            data.unconfirmed = event._unconfirmed\n        }\n        if (event._fingerprint) {\n            data.fingerprint = event._fingerprint;\n        }\n        return data;\n    },\n\n    parseEvent(event, {inputs: abi}) {\n        if (!event.result)\n            return event;\n\n        if (this.isObject(event.result)) {\n            for (var i = 0; i < abi.length; i++) {\n                let obj = abi[i];\n                if (obj.type == 'address' && obj.name in event.result)\n                    event.result[obj.name] = '30' + event.result[obj.name].substr(2).toLowerCase();\n            }\n        } else if (this.isArray(event.result)) {\n            event.result = event.result.reduce((obj, result, index) => {\n                const {\n                    name,\n                    type\n                } = abi[index];\n\n                if (type == 'address')\n                    result = '30' + result.substr(2).toLowerCase();\n\n                obj[name] = result;\n\n                return obj;\n            }, {});\n        }\n\n        return event;\n    },\n\n    padLeft(input, padding, amount) {\n        let res = input.toString();\n\n        while (res.length < amount)\n            res = padding + res;\n\n        return res;\n    },\n\n    isNotNullOrUndefined(val) {\n        return val !== null && typeof val !== 'undefined';\n    }\n}\n\nexport default {\n    ...utils,\n    code,\n    accounts,\n    base58,\n    bytes,\n    crypto,\n    abi\n};\n","import HttpProvider from './HttpProvider';\n\nexport default {\n    HttpProvider\n};","import axios from 'axios';\nimport utils from 'utils';\n\nexport default class HttpProvider {\n    constructor(host, timeout = 30000, user = false, password = false, headers = {}, statusPage = '/') {\n        if (!utils.isValidURL(host))\n            throw new Error('Invalid URL provided to HttpProvider');\n\n        if (isNaN(timeout) || timeout < 0)\n            throw new Error('Invalid timeout duration provided');\n\n        if (!utils.isObject(headers))\n            throw new Error('Invalid headers object provided');\n\n        host = host.replace(/\\/+$/, '');\n\n        this.host = host;\n        this.timeout = timeout;\n        this.user = user;\n        this.password = password;\n        this.headers = headers;\n        this.statusPage = statusPage;\n\n        this.instance = axios.create({\n            baseURL: host,\n            timeout: timeout,\n            headers: headers,\n            auth: user && {\n                user,\n                password\n            },\n        });\n    }\n\n    setStatusPage(statusPage = '/') {\n        this.statusPage = statusPage;\n    }\n\n    async isConnected(statusPage = this.statusPage) {\n        return this.request(statusPage).then(data => {\n            return utils.hasProperties(data, 'blockID', 'block_header');\n        }).catch(() => false);\n    }\n\n    request(url, payload = {}, method = 'get') {\n        method = method.toLowerCase();\n\n        return this.instance.request({\n            data: method == 'post' && Object.keys(payload).length ? payload : null,\n            params: method == 'get' && payload,\n            url,\n            method\n        }).then(({data}) => data);\n    }\n};\n","import Weblgcy from 'index';\nimport utils from 'utils';\n\nexport default class Validator {\n\n    constructor(weblgcy = false) {\n        if (!weblgcy || !weblgcy instanceof Weblgcy)\n            throw new Error('Expected instance of Weblgcy');\n        this.weblgcy = weblgcy;\n    }\n\n    invalid(param) {\n        return param.msg || `Invalid ${param.name}${param.type === 'address' ? ' address' : ''} provided`;\n    }\n\n    notEqual(param) {\n        return param.msg || `${param.names[0]} can not be equal to ${param.names[1]}`;\n    }\n\n    notValid(params = [], callback = new Function) {\n        let normalized = {}\n        for (const param of params) {\n            let {\n                name,\n                names,\n                value,\n                type,\n                gt,\n                lt,\n                gte,\n                lte,\n                optional\n            } = param;\n            if (optional && !utils.isNotNullOrUndefined(value))\n                return false;\n            switch (type) {\n\n                case 'address':\n                    if (!this.weblgcy.isAddress(value)) {\n                        callback(this.invalid(param));\n                        return true;\n                    }\n                    normalized[name] = this.weblgcy.address.toHex(value);\n                    break;\n\n                case 'integer':\n                    if (!utils.isInteger(value) ||\n                        (typeof gt === 'number' && !(value > param.gt)) ||\n                        (typeof lt === 'number' && !(value < param.lt)) ||\n                        (typeof gte === 'number' && !(value >= param.gte)) ||\n                        (typeof lte === 'number' && !(value <= param.lte))) {\n                        callback(this.invalid(param));\n                        return true;\n                    }\n                    normalized[param.name] = param.value;\n                    break;\n\n                case 'tokenId':\n                    if (!utils.isString(value) || !value.length) {\n                        callback(this.invalid(param));\n                        return true;\n                    }\n                    break;\n\n                case 'notEmptyObject':\n                    if (!utils.isObject(value) || !Object.keys(value).length) {\n                        callback(this.invalid(param));\n                        return true;\n                    }\n\n                case 'notEqual':\n                    if (normalized[names[0]] === normalized[names[1]]) {\n                        callback(this.notEqual(param));\n                        return true;\n                    }\n                    break;\n            }\n        }\n        return false;\n    }\n}\n\n","import Weblgcy from 'index';\nimport utils from 'utils';\nimport * as Ethers from 'ethers';\nimport Validator from 'paramValidator';\n\nlet self;\n\n//helpers\n\nfunction toHex(value) {\n    return self.weblgcy.address.toHex(value);\n}\n\nfunction fromUtf8(value) {\n    return self.weblgcy.fromUtf8(value);\n}\n\nfunction resultManager(transaction, callback) {\n    if (transaction.Error)\n        return callback(transaction.Error);\n\n    if (transaction.result && transaction.result.message) {\n        return callback(\n            this.weblgcy.toUtf8(transaction.result.message)\n        );\n    }\n\n    return callback(null, transaction);\n}\n\n\nexport default class TransactionBuilder {\n    constructor(weblgcy = false) {\n        if (!weblgcy || !weblgcy instanceof Weblgcy)\n            throw new Error('Expected instance of Weblgcy');\n        self = this;\n        this.weblgcy = weblgcy;\n        this.injectPromise = utils.promiseInjector(this);\n        this.validator = new Validator(weblgcy);\n    }\n\n    /*\n        * We have changed it sendTrx to sendUsdl\n    */\n\n    sendUsdl(to = false, amount = 0, from = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(from)) {\n            callback = from;\n            from = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.sendUsdl, to, amount, from);\n\n        // accept amounts passed as strings\n        amount = parseInt(amount)\n\n        if (this.validator.notValid([\n            {\n                name: 'recipient',\n                type: 'address',\n                value: to\n            },\n            {\n                name: 'origin',\n                type: 'address',\n                value: from\n            },\n            {\n                names: ['recipient', 'origin'],\n                type: 'notEqual',\n                msg: 'Cannot transfer USDL to the same account'\n            },\n            {\n                name: 'amount',\n                type: 'integer',\n                gt: 0,\n                value: amount\n            }\n        ], callback))\n            return;\n\n        this.weblgcy.fullNode.request('wallet/createtransaction', {\n            to_address: toHex(to),\n            owner_address: toHex(from),\n            amount: amount\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    sendToken(to = false, amount = 0, tokenID = false, from = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(from)) {\n            callback = from;\n            from = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.sendToken, to, amount, tokenID, from);\n\n        amount = parseInt(amount)\n        if (this.validator.notValid([\n            {\n                name: 'recipient',\n                type: 'address',\n                value: to\n            },\n            {\n                name: 'origin',\n                type: 'address',\n                value: from,\n            },\n            {\n                names: ['recipient', 'origin'],\n                type: 'notEqual',\n                msg: 'Cannot transfer tokens to the same account'\n            },\n            {\n                name: 'amount',\n                type: 'integer',\n                gt: 0,\n                value: amount\n            },\n            {\n                name: 'token ID',\n                type: 'tokenId',\n                value: tokenID\n            }\n        ], callback))\n            return;\n\n        this.weblgcy.fullNode.request('wallet/transferasset', {\n            to_address: toHex(to),\n            owner_address: toHex(from),\n            asset_name: fromUtf8(tokenID),\n            amount: parseInt(amount)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    purchaseToken(issuerAddress = false, tokenID = false, amount = 0, buyer = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(buyer)) {\n            callback = buyer;\n            buyer = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.purchaseToken, issuerAddress, tokenID, amount, buyer);\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuer address provided');\n\n        if (!utils.isString(tokenID) || !tokenID.length)\n            return callback('Invalid token ID provided');\n\n        if (!utils.isInteger(amount) || amount <= 0)\n            return callback('Invalid amount provided');\n\n        if (!this.weblgcy.isAddress(buyer))\n            return callback('Invalid buyer address provided');\n\n        this.weblgcy.fullNode.request('wallet/participateassetissue', {\n            to_address: toHex(issuerAddress),\n            owner_address: toHex(buyer),\n            asset_name: fromUtf8(tokenID),\n            amount: parseInt(amount)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    freezeBalance(amount = 0, duration = 3, resource = \"USDL_POWER\", address = this.weblgcy.defaultAddress.hex, receiverAddress = undefined, callback = false) {\n        if (utils.isFunction(receiverAddress)) {\n            callback = receiverAddress;\n            receiverAddress = undefined;\n        }\n\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (utils.isFunction(duration)) {\n            callback = duration;\n            duration = 3;\n        }\n\n        if (utils.isFunction(resource)) {\n            callback = resource;\n            resource = \"USDL_POWER\";\n        }\n\n        if (!callback)\n            return this.injectPromise(this.freezeBalance, amount, duration, resource, address, receiverAddress);\n\n        if (!['USDL_POWER'].includes(resource))\n            return callback('Invalid resource provided: Expected \"USDL_POWER\"');\n\n        if (!utils.isInteger(amount) || amount <= 0)\n            return callback('Invalid amount provided');\n\n        if (!utils.isInteger(duration) || duration < 3)\n            return callback('Invalid duration provided, minimum of 3 days');\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        // here set `optional: true` in notValid param\n        if (utils.isNotNullOrUndefined(receiverAddress) && !this.weblgcy.isAddress(receiverAddress))\n            return callback('Invalid receiver address provided');\n\n        const data = {\n            owner_address: toHex(address),\n            frozen_balance: parseInt(amount),\n            frozen_duration: parseInt(duration),\n            resource: resource\n        }\n\n        if (utils.isNotNullOrUndefined(receiverAddress)) {\n            data.receiver_address = toHex(receiverAddress)\n        }\n\n        this.weblgcy.fullNode.request('wallet/freezebalance', data, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    unfreezeBalance(resource = \"USDL_POWER\", address = this.weblgcy.defaultAddress.hex, receiverAddress = undefined, callback = false) {\n        if (utils.isFunction(receiverAddress)) {\n            callback = receiverAddress;\n            receiverAddress = undefined;\n        }\n\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (utils.isFunction(resource)) {\n            callback = resource;\n            resource = \"USDL_POWER\";\n        }\n\n        if (!callback)\n            return this.injectPromise(this.unfreezeBalance, resource, address, receiverAddress);\n\n        if (!['USDL_POWER'].includes(resource))\n            return callback('Invalid resource provided: Expected \"USDL_POWER\"');\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        if (utils.isNotNullOrUndefined(receiverAddress) && !this.weblgcy.isAddress(receiverAddress))\n            return callback('Invalid receiver address provided');\n\n        const data = {\n            owner_address: toHex(address),\n            resource: resource\n        }\n\n        if (utils.isNotNullOrUndefined(receiverAddress)) {\n            data.receiver_address = toHex(receiverAddress)\n        }\n\n        this.weblgcy.fullNode.request('wallet/unfreezebalance', data, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    withdrawBlockRewards(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.withdrawBlockRewards, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        this.weblgcy.fullNode.request('wallet/withdrawbalance', {\n            owner_address: toHex(address)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    applyForSR(address = this.weblgcy.defaultAddress.hex, url = false, callback = false) {\n        if (utils.isValidURL(address)) {\n            callback = url || false;\n            url = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.applyForSR, address, url);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        if (!utils.isValidURL(url))\n            return callback('Invalid url provided');\n\n        this.weblgcy.fullNode.request('wallet/createwitness', {\n            owner_address: toHex(address),\n            url: fromUtf8(url)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    vote(votes = {}, voterAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(voterAddress)) {\n            callback = voterAddress;\n            voterAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.vote, votes, voterAddress);\n\n        if (this.validator.notValid([\n            {\n                name: 'voter',\n                type: 'address',\n                value: voterAddress\n            },\n            {\n                name: 'votes',\n                type: 'notEmptyObject',\n                value: votes\n            }\n        ], callback))\n            return;\n\n        let invalid = false;\n\n        votes = Object.entries(votes).map(([srAddress, voteCount]) => {\n            if (invalid)\n                return;\n\n            if (this.validator.notValid([\n                {\n                    name: 'SR',\n                    type: 'address',\n                    value: srAddress\n                },\n                {\n                    name: 'vote count',\n                    type: 'integer',\n                    gt: 0,\n                    value: voteCount,\n                    msg: 'Invalid vote count provided for SR: ' + srAddress\n                }\n            ]))\n                return invalid = true;\n\n            return {\n                vote_address: toHex(srAddress),\n                vote_count: parseInt(voteCount)\n            };\n        });\n\n        if (invalid)\n            return;\n\n        this.weblgcy.fullNode.request('wallet/votewitnessaccount', {\n            owner_address: toHex(voterAddress),\n            votes\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    createSmartContract(options = {}, issuerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.createSmartContract, options, issuerAddress);\n\n        const feeLimit = options.feeLimit || 1_000_000_000;\n        let userFeePercentage = options.userFeePercentage;\n        if (typeof userFeePercentage !== 'number' || !userFeePercentage) {\n            userFeePercentage = 100;\n        }\n        const originKandyLimit = options.originKandyLimit || 10_000_000;\n        const callValue = options.callValue || 0;\n        const tokenValue = options.tokenValue;\n        const tokenId = options.tokenId || options.token_id;\n\n        let {\n            abi = false,\n            bytecode = false,\n            parameters = [],\n            name = \"\"\n        } = options;\n\n\n        if (abi && utils.isString(abi)) {\n            try {\n                abi = JSON.parse(abi);\n            } catch {\n                return callback('Invalid options.abi provided');\n            }\n        }\n\n        if (!utils.isArray(abi))\n            return callback('Invalid options.abi provided in array');\n\n\n        const payable = abi.some(func => {\n            return func.type == 'constructor' && func.payable;\n        });\n\n        if (!utils.isHex(bytecode))\n            return callback('Invalid options.bytecode provided');\n\n        if (!utils.isInteger(feeLimit) || feeLimit <= 0 || feeLimit > 1_000_000_000)\n            return callback('Invalid options.feeLimit provided');\n        // {\n        //     name: 'fee limit',\n        //     type: 'integer',\n        //     gt: 0,\n        //     lte: 1_000_000_000,\n        //     value: feeLimit\n        // }\n\n        if (!utils.isInteger(callValue) || callValue < 0)\n            return callback('Invalid options.callValue provided');\n\n        if (payable && callValue == 0)\n            return callback('When contract is payable, options.callValue must be a positive integer');\n\n        if (!payable && callValue > 0)\n            return callback('When contract is not payable, options.callValue must be 0');\n\n        if (!utils.isInteger(userFeePercentage) || userFeePercentage < 0 || userFeePercentage > 100)\n            return callback('Invalid options.userFeePercentage provided');\n\n        if (!utils.isInteger(originKandyLimit) || originKandyLimit < 0 || originKandyLimit > 10_000_000)\n            return callback('Invalid options.originKandyLimit provided');\n\n        if (!utils.isArray(parameters))\n            return callback('Invalid parameters provided');\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuer address provided');\n\n        var constructorParams = abi.find(\n            (it) => {\n                return it.type === 'constructor';\n            }\n        );\n\n        if (utils.isNotNullOrUndefined(tokenValue) && (!utils.isInteger(tokenValue) || tokenValue < 0))\n            return callback('Invalid options.tokenValue provided');\n\n        if (utils.isNotNullOrUndefined(tokenId) && (!utils.isInteger(tokenId) || tokenId < 0))\n            return callback('Invalid options.tokenValue provided');\n\n        if (typeof constructorParams !== 'undefined' && constructorParams) {\n            const abiCoder = new Ethers.utils.AbiCoder();\n            const types = [];\n            const values = [];\n            constructorParams = constructorParams.inputs;\n\n            if (parameters.length != constructorParams.length)\n                return callback(`constructor needs ${constructorParams.length} but ${parameters.length} provided`);\n\n            for (let i = 0; i < parameters.length; i++) {\n                let type = constructorParams[i].type;\n                let value = parameters[i];\n\n                if (!type || !utils.isString(type) || !type.length)\n                    return callback('Invalid parameter type provided: ' + type);\n\n                if (type == 'address')\n                    value = toHex(value).replace(/^(30)/, '0x');\n\n                types.push(type);\n                values.push(value);\n            }\n\n            try {\n                parameters = abiCoder.encode(types, values).replace(/^(0x)/, '');\n            } catch (ex) {\n                return callback(ex);\n            }\n        } else parameters = '';\n\n        const args = {\n            owner_address: toHex(issuerAddress),\n            fee_limit: parseInt(feeLimit),\n            call_value: parseInt(callValue),\n            consume_user_resource_percent: userFeePercentage,\n            origin_kandy_limit: originKandyLimit,\n            abi: JSON.stringify(abi),\n            bytecode,\n            parameter: parameters,\n            name\n        }\n\n        // tokenValue and tokenId can cause errors if provided when the usdl10 proposal has not been approved yet. So we set them only if they are passed to the method.\n        if (utils.isNotNullOrUndefined(tokenValue))\n            args.call_token_value = parseInt(tokenValue)\n        if (utils.isNotNullOrUndefined(tokenId))\n            args.token_id = parseInt(tokenId)\n\n        this.weblgcy.fullNode.request('wallet/deploycontract', args, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    triggerSmartContract(...params) {\n        if (typeof params[2] !== 'object') {\n            params[2] = {\n                feeLimit: params[2],\n                callValue: params[3]\n            }\n            params.splice(3, 1)\n        }\n        return this._triggerSmartContract(...params);\n    }\n\n    triggerConstantContract(...params) {\n        params[2]._isConstant = true\n        return this._triggerSmartContract(...params);\n    }\n\n    triggerConfirmedConstantContract(...params) {\n        params[2]._isConstant = true\n        params[2].confirmed = true\n        return this.triggerSmartContract(...params);\n    }\n\n    _triggerSmartContract(\n        contractAddress,\n        functionSelector,\n        options = {},\n        parameters = [],\n        issuerAddress = this.weblgcy.defaultAddress.hex,\n        callback = false\n    ) {\n\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (utils.isFunction(parameters)) {\n            callback = parameters;\n            parameters = [];\n        }\n\n        if (!callback) {\n            return this.injectPromise(\n                this._triggerSmartContract,\n                contractAddress,\n                functionSelector,\n                options,\n                parameters,\n                issuerAddress\n            );\n        }\n\n        let {\n            tokenValue,\n            tokenId,\n            callValue,\n            feeLimit\n        } = Object.assign({\n            callValue: 0,\n            feeLimit: 1_000_000_000\n        }, options)\n\n        if (utils.isNotNullOrUndefined(tokenValue) && (!utils.isInteger(tokenValue) || tokenValue < 0))\n            return callback('Invalid options.tokenValue provided');\n\n        if (utils.isNotNullOrUndefined(tokenId) && (!utils.isInteger(tokenId) || tokenId < 0))\n            return callback('Invalid options.tokenValue provided');\n\n        if (!this.weblgcy.isAddress(contractAddress))\n            return callback('Invalid contract address provided');\n\n        if (!utils.isString(functionSelector) || !functionSelector.length)\n            return callback('Invalid function selector provided');\n\n        if (!utils.isInteger(callValue) || callValue < 0)\n            return callback('Invalid call value provided');\n\n        if (!utils.isInteger(feeLimit) || feeLimit <= 0 || feeLimit > 1_000_000_000)\n            return callback('Invalid fee limit provided');\n\n        if (!utils.isArray(parameters))\n            return callback('Invalid parameters provided');\n\n        if (issuerAddress !== false && !this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuer address provided');\n\n        functionSelector = functionSelector.replace('/\\s*/g', '');\n\n        if (parameters.length) {\n            const abiCoder = new Ethers.utils.AbiCoder();\n            let types = [];\n            const values = [];\n\n            for (let i = 0; i < parameters.length; i++) {\n                let { type, value } = parameters[i];\n\n                if (!type || !utils.isString(type) || !type.length)\n                    return callback('Invalid parameter type provided: ' + type);\n\n                if (type == 'address')\n                    value = toHex(value).replace(/^(30)/, '0x');\n\n                types.push(type);\n                values.push(value);\n            }\n\n            try {\n                // workaround for unsupported trcToken type\n                types = types.map(type => {\n                    if (/trcToken/.test(type)) {\n                        type = type.replace(/trcToken/, 'uint256')\n                    }\n                    return type\n                })\n\n                parameters = abiCoder.encode(types, values).replace(/^(0x)/, '');\n            } catch (ex) {\n                return callback(ex);\n            }\n        } else parameters = '';\n\n        const args = {\n            contract_address: toHex(contractAddress),\n            owner_address: toHex(issuerAddress),\n            function_selector: functionSelector,\n            fee_limit: parseInt(feeLimit),\n            call_value: parseInt(callValue),\n            parameter: parameters\n        };\n\n        if (utils.isNotNullOrUndefined(tokenValue))\n            args.call_token_value = parseInt(tokenValue)\n        if (utils.isNotNullOrUndefined(tokenId))\n            args.token_id = parseInt(tokenId)\n\n        this.weblgcy.fullNode.request('wallet/triggersmartcontract', args, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n\n    createToken(options = {}, issuerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.createToken, options, issuerAddress);\n\n        const {\n            name = false,\n            abbreviation = false,\n            description = false,\n            url = false,\n            totalSupply = 0,\n            usdlRatio = 1, // How much USDL will `tokenRatio` cost?\n            tokenRatio = 1, // How many tokens will `usdlRatio` afford?\n            saleStart = Date.now(),\n            saleEnd = false,\n            freeBandwidth = 0, // The creator's \"donated\" bandwidth for use by token holders\n            freeBandwidthLimit = 0, // Out of `totalFreeBandwidth`, the amount each token holder get\n            frozenAmount = 0,\n            frozenDuration = 0,\n            // for now there is no default for the following values\n            voteScore,\n            precision\n        } = options;\n\n        if (!utils.isString(name) || !name.length)\n            return callback('Invalid token name provided');\n\n        if (!utils.isString(abbreviation) || !abbreviation.length)\n            return callback('Invalid token abbreviation provided');\n\n        if (!utils.isInteger(totalSupply) || totalSupply <= 0)\n            return callback('Invalid supply amount provided');\n\n        if (!utils.isInteger(usdlRatio) || usdlRatio <= 0)\n            return callback('USDL ratio must be a positive integer');\n\n        if (!utils.isInteger(tokenRatio) || tokenRatio <= 0)\n            return callback('Token ratio must be a positive integer');\n\n        if (!utils.isInteger(saleStart) || saleStart < Date.now())\n            return callback('Invalid sale start timestamp provided');\n\n        if (!utils.isInteger(saleEnd) || saleEnd <= saleStart)\n            return callback('Invalid sale end timestamp provided');\n\n        if (!utils.isString(description) || !description.length)\n            return callback('Invalid token description provided');\n\n        if (!utils.isString(url) || !url.length || !utils.isValidURL(url))\n            return callback('Invalid token url provided');\n\n        if (!utils.isInteger(freeBandwidth) || freeBandwidth < 0)\n            return callback('Invalid free bandwidth amount provided');\n\n        if (!utils.isInteger(freeBandwidthLimit) || freeBandwidthLimit < 0 || (freeBandwidth && !freeBandwidthLimit))\n            return callback('Invalid free bandwidth limit provided');\n\n        if (!utils.isInteger(frozenAmount) || frozenAmount < 0 || (!frozenDuration && frozenAmount))\n            return callback('Invalid frozen supply provided');\n\n        if (!utils.isInteger(frozenDuration) || frozenDuration < 0 || (frozenDuration && !frozenAmount))\n            return callback('Invalid frozen duration provided');\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuer address provided');\n\n        if (utils.isNotNullOrUndefined(voteScore) && (!utils.isInteger(voteScore) || voteScore <= 0))\n            return callback('voteScore must be a positive integer greater than 0');\n\n        if (utils.isNotNullOrUndefined(precision) && (!utils.isInteger(precision) || precision <= 0 || precision > 18))\n            return callback('precision must be a positive integer > 0 and <= 18');\n\n        const data = {\n            owner_address: toHex(issuerAddress),\n            name: fromUtf8(name),\n            abbr: fromUtf8(abbreviation),\n            description: fromUtf8(description),\n            url: fromUtf8(url),\n            total_supply: parseInt(totalSupply),\n            lgcy_num: parseInt(usdlRatio), //lgcy_num\n            num: parseInt(tokenRatio),\n            start_time: parseInt(saleStart),\n            end_time: parseInt(saleEnd),\n            free_asset_net_limit: parseInt(freeBandwidth),\n            public_free_asset_net_limit: parseInt(freeBandwidthLimit),\n            frozen_supply: {\n                frozen_amount: parseInt(frozenAmount),\n                frozen_days: parseInt(frozenDuration)\n            }\n        }\n        if (precision && !isNaN(parseInt(precision))) {\n            data.precision = parseInt(precision);\n        }\n        if (voteScore && !isNaN(parseInt(voteScore))) {\n            data.vote_score = parseInt(voteScore)\n        }\n\n        this.weblgcy.fullNode.request('wallet/createassetissue', data, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    updateAccount(accountName = false, address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback) {\n            return this.injectPromise(this.updateAccount, accountName, address);\n        }\n\n        if (!utils.isString(accountName) || !accountName.length) {\n            return callback('Name must be a string');\n        }\n\n        if (!this.weblgcy.isAddress(address)) {\n            return callback('Invalid origin address provided');\n        }\n\n        this.weblgcy.fullNode.request('wallet/updateaccount', {\n            account_name: fromUtf8(accountName),\n            owner_address: toHex(address),\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    updateToken(options = {}, issuerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.updateToken, options, issuerAddress);\n\n        const {\n            description = false,\n            url = false,\n            freeBandwidth = 0, // The creator's \"donated\" bandwidth for use by token holders\n            freeBandwidthLimit = 0 // Out of `totalFreeBandwidth`, the amount each token holder get\n        } = options;\n\n        if (!utils.isString(description) || !description.length)\n            return callback('Invalid token description provided');\n\n        if (!utils.isString(url) || !url.length || !utils.isValidURL(url))\n            return callback('Invalid token url provided');\n\n        if (!utils.isInteger(freeBandwidth) || freeBandwidth < 0)\n            return callback('Invalid free bandwidth amount provided');\n\n        if (!utils.isInteger(freeBandwidthLimit) || freeBandwidthLimit < 0 || (freeBandwidth && !freeBandwidthLimit))\n            return callback('Invalid free bandwidth limit provided');\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuer address provided');\n\n        this.weblgcy.fullNode.request('wallet/updateasset', {\n            owner_address: toHex(issuerAddress),\n            description: fromUtf8(description),\n            url: fromUtf8(url),\n            new_limit: parseInt(freeBandwidth),\n            new_public_limit: parseInt(freeBandwidthLimit)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    sendAsset(...args) {\n        return this.sendToken(...args);\n    }\n\n    purchaseAsset(...args) {\n        return this.purchaseToken(...args);\n    }\n\n    createAsset(...args) {\n        return this.createToken(...args);\n    }\n\n    updateAsset(...args) {\n        return this.updateToken(...args);\n    }\n\n    /**\n     * Creates a proposal to modify the network.\n     * Can only be created by a current Super Representative.\n     */\n    createProposal(parameters = false, issuerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.createProposal, parameters, issuerAddress);\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuerAddress provided');\n\n        const invalid = 'Invalid proposal parameters provided';\n\n        if (!parameters)\n            return callback(invalid);\n\n        if (!utils.isArray(parameters))\n            parameters = [parameters];\n\n        for (let parameter of parameters) {\n            if (!utils.isObject(parameter))\n                return callback(invalid);\n        }\n\n        this.weblgcy.fullNode.request('wallet/proposalcreate', {\n            owner_address: toHex(issuerAddress),\n            parameters: parameters\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Deletes a network modification proposal that the owner issued.\n     * Only current Super Representative can vote on a proposal.\n     */\n    deleteProposal(proposalID = false, issuerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.deleteProposal, proposalID, issuerAddress);\n\n        if (!this.weblgcy.isAddress(issuerAddress))\n            return callback('Invalid issuerAddress provided');\n\n        if (!utils.isInteger(proposalID) || proposalID < 0)\n            return callback('Invalid proposalID provided');\n\n        this.weblgcy.fullNode.request('wallet/proposaldelete', {\n            owner_address: toHex(issuerAddress),\n            proposal_id: parseInt(proposalID)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Adds a vote to an issued network modification proposal.\n     * Only current Super Representative can vote on a proposal.\n     */\n    voteProposal(proposalID = false, isApproval = false, voterAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(voterAddress)) {\n            callback = voterAddress;\n            voterAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.voteProposal, proposalID, isApproval, voterAddress);\n\n        if (!this.weblgcy.isAddress(voterAddress))\n            return callback('Invalid voterAddress address provided');\n\n        if (!utils.isInteger(proposalID) || proposalID < 0)\n            return callback('Invalid proposalID provided');\n\n        if (!utils.isBoolean(isApproval))\n            return callback('Invalid hasApproval provided');\n\n        this.weblgcy.fullNode.request('wallet/proposalapprove', {\n            owner_address: toHex(voterAddress),\n            proposal_id: parseInt(proposalID),\n            is_add_approval: isApproval\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    createUSDLExchange(tokenName, tokenBalance, usdlBalance, ownerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.createUSDLExchange, tokenName, tokenBalance, usdlBalance, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid address provided');\n\n        if (!utils.isString(tokenName) || !tokenName.length)\n            return callback('Invalid tokenName provided');\n\n        if (!utils.isInteger(tokenBalance) || tokenBalance <= 0\n            || !utils.isInteger(usdlBalance) || usdlBalance <= 0)\n            return callback('Invalid amount provided');\n\n        this.weblgcy.fullNode.request('wallet/exchangecreate', {\n            owner_address: toHex(ownerAddress),\n            first_token_id: fromUtf8(tokenName),\n            first_token_balance: tokenBalance,\n            second_token_id: '5f', // Constant for USDL.\n            second_token_balance: usdlBalance\n        }, 'post').then(resources => {\n            callback(null, resources);\n        }).catch(err => callback(err));\n    }\n\n    createTokenExchange(firstTokenName, firstTokenBalance, secondTokenName, secondTokenBalance, ownerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.createTokenExchange, firstTokenName, firstTokenBalance, secondTokenName, secondTokenBalance, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid address provided');\n\n        if (!utils.isString(firstTokenName) || !firstTokenName.length)\n            return callback('Invalid firstTokenName provided');\n\n        if (!utils.isString(secondTokenName) || !secondTokenName.length)\n            return callback('Invalid secondTokenName provided');\n\n        if (!utils.isInteger(firstTokenBalance) || firstTokenBalance <= 0\n            || !utils.isInteger(secondTokenBalance) || secondTokenBalance <= 0)\n            return callback('Invalid amount provided');\n\n        this.weblgcy.fullNode.request('wallet/exchangecreate', {\n            owner_address: toHex(ownerAddress),\n            first_token_id: fromUtf8(firstTokenName),\n            first_token_balance: firstTokenBalance,\n            second_token_id: fromUtf8(secondTokenName),\n            second_token_balance: secondTokenBalance\n        }, 'post').then(resources => {\n            callback(null, resources);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Adds tokens into a bancor style exchange.\n     * Will add both tokens at market rate.\n     * Use \"_\" for the constant value for USDL.\n     */\n    injectExchangeTokens(exchangeID = false, tokenName = false, tokenAmount = 0, ownerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.injectExchangeTokens, exchangeID, tokenName, tokenAmount, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!utils.isInteger(exchangeID) || exchangeID < 0)\n            return callback('Invalid exchangeID provided');\n\n        if (!utils.isString(tokenName) || !tokenName.length)\n            return callback('Invalid tokenName provided');\n\n        if (!utils.isInteger(tokenAmount) || tokenAmount < 1)\n            return callback('Invalid tokenAmount provided');\n\n        this.weblgcy.fullNode.request('wallet/exchangeinject', {\n            owner_address: toHex(ownerAddress),\n            exchange_id: parseInt(exchangeID),\n            token_id: fromUtf8(tokenName),\n            quant: parseInt(tokenAmount)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Withdraws tokens from a bancor style exchange.\n     * Will withdraw at market rate both tokens.\n     * Use \"_\" for the constant value for USDL.\n     */\n    withdrawExchangeTokens(exchangeID = false, tokenName = false, tokenAmount = 0, ownerAddress = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.withdrawExchangeTokens, exchangeID, tokenName, tokenAmount, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!utils.isInteger(exchangeID) || exchangeID < 0)\n            return callback('Invalid exchangeID provided');\n\n        if (!utils.isString(tokenName) || !tokenName.length)\n            return callback('Invalid tokenName provided');\n\n        if (!utils.isInteger(tokenAmount) || tokenAmount < 1)\n            return callback('Invalid tokenAmount provided');\n\n        this.weblgcy.fullNode.request('wallet/exchangewithdraw', {\n            owner_address: toHex(ownerAddress),\n            exchange_id: parseInt(exchangeID),\n            token_id: fromUtf8(tokenName),\n            quant: parseInt(tokenAmount)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Trade tokens on a bancor style exchange.\n     * Expected value is a validation and used to cap the total amt of token 2 spent.\n     * Use \"_\" for the constant value for USDL.\n     */\n    tradeExchangeTokens(exchangeID = false,\n        tokenName = false,\n        tokenAmountSold = 0,\n        tokenAmountExpected = 0,\n        ownerAddress = this.weblgcy.defaultAddress.hex,\n        callback = false) {\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.tradeExchangeTokens, exchangeID, tokenName, tokenAmountSold, tokenAmountExpected, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!utils.isInteger(exchangeID) || exchangeID < 0)\n            return callback('Invalid exchangeID provided');\n\n        if (!utils.isString(tokenName) || !tokenName.length)\n            return callback('Invalid tokenName provided');\n\n        if (!utils.isInteger(tokenAmountSold) || tokenAmountSold < 1)\n            return callback('Invalid tokenAmountSold provided');\n\n        if (!utils.isInteger(tokenAmountExpected) || tokenAmountExpected < 1)\n            return callback('Invalid tokenAmountExpected provided');\n\n        this.weblgcy.fullNode.request('wallet/exchangetransaction', {\n            owner_address: toHex(ownerAddress),\n            exchange_id: parseInt(exchangeID),\n            token_id: this.weblgcy.fromAscii(tokenName),\n            quant: parseInt(tokenAmountSold),\n            expected: parseInt(tokenAmountExpected)\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Update userFeePercentage.\n     */\n    updateSetting(contractAddress = false,\n        userFeePercentage = false,\n        ownerAddress = this.weblgcy.defaultAddress.hex,\n        callback = false) {\n\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.updateSetting, contractAddress, userFeePercentage, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!this.weblgcy.isAddress(contractAddress))\n            return callback('Invalid contractAddress provided');\n\n        if (!utils.isInteger(userFeePercentage) || userFeePercentage < 0 || userFeePercentage > 100)\n            return callback('Invalid options.userFeePercentage provided');\n\n        this.weblgcy.fullNode.request('wallet/updatesetting', {\n            owner_address: toHex(ownerAddress),\n            contract_address: toHex(contractAddress),\n            consume_user_resource_percent: userFeePercentage\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    /**\n     * Update kandy limit.\n     */\n    updateKandyLimit(contractAddress = false,\n        originKandyLimit = false,\n        ownerAddress = this.weblgcy.defaultAddress.hex,\n        callback = false) {\n\n        if (utils.isFunction(ownerAddress)) {\n            callback = ownerAddress;\n            ownerAddress = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.updateKandyLimit, contractAddress, originKandyLimit, ownerAddress);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!this.weblgcy.isAddress(contractAddress))\n            return callback('Invalid contractAddress provided');\n\n        if (!utils.isInteger(originKandyLimit) || originKandyLimit < 0 || originKandyLimit > 10_000_000)\n            return callback('Invalid options.originKandyLimit provided');\n\n        this.weblgcy.fullNode.request('wallet/updatekandylimit', {\n            owner_address: toHex(ownerAddress),\n            contract_address: toHex(contractAddress),\n            origin_kandy_limit: originKandyLimit\n        }, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n    checkPermissions(permissions, type) {\n        if (permissions) {\n            if (permissions.type !== type\n                || !permissions.permission_name\n                || !utils.isString(permissions.permission_name)\n                || !utils.isInteger(permissions.threshold)\n                || permissions.threshold < 1\n                || !permissions.keys\n            ) {\n                return false\n            }\n            for (let key of permissions.key) {\n                if (!this.weblgcy.isAddress(key.address)\n                    || !utils.isInteger(key.weight)\n                    || key.weight > permissions.threshold\n                    || key.weight < 1\n                    || (type === 2 && !permissions.operations)\n                ) {\n                    return false\n                }\n            }\n        }\n        return true\n    }\n\n    updateAccountPermissions(ownerAddress = this.weblgcy.defaultAddress.hex,\n        ownerPermissions = false,\n        witnessPermissions = false,\n        activesPermissions = false,\n        callback = false) {\n\n        if (utils.isFunction(activesPermissions)) {\n            callback = activesPermissions;\n            activesPermissions = false;\n        }\n\n        if (utils.isFunction(witnessPermissions)) {\n            callback = witnessPermissions;\n            witnessPermissions = activesPermissions = false;\n        }\n\n        if (utils.isFunction(ownerPermissions)) {\n            callback = ownerPermissions;\n            ownerPermissions = witnessPermissions = activesPermissions = false;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.updateAccountPermissions, ownerAddress, ownerPermissions, witnessPermissions, activesPermissions);\n\n        if (!this.weblgcy.isAddress(ownerAddress))\n            return callback('Invalid ownerAddress provided');\n\n        if (!this.checkPermissions(ownerPermissions, 0)) {\n            return callback('Invalid ownerPermissions provided');\n        }\n\n        if (!this.checkPermissions(witnessPermissions, 1)) {\n            return callback('Invalid witnessPermissions provided');\n        }\n\n        if (!Array.isArray(activesPermissions)) {\n            activesPermissions = [activesPermissions]\n        }\n\n        for (let activesPermission of activesPermissions) {\n            if (!this.checkPermissions(activesPermission, 2)) {\n                return callback('Invalid activesPermissions provided');\n            }\n        }\n\n        const data = {\n            owner_address: ownerAddress\n        }\n        if (ownerPermissions) {\n            data.owner = ownerPermissions\n        }\n        if (witnessPermissions) {\n            data.witness = witnessPermissions\n        }\n        if (activesPermissions) {\n            data.actives = activesPermissions.length === 1 ? activesPermissions[0] : activesPermissions\n        }\n\n        this.weblgcy.fullNode.request('wallet/accountpermissionupdate', data, 'post').then(transaction => resultManager(transaction, callback)).catch(err => callback(err));\n    }\n\n\n}\n","import Weblgcy from 'index';\nimport utils from 'utils';\nimport * as Ethers from 'ethers';\n\nconst USDL_MESSAGE_HEADER = '\\x19LGCY Signed Message:\\n32';\nconst ETH_MESSAGE_HEADER = '\\x19Ethereum Signed Message:\\n32';\n\nexport default class Legacy {\n    constructor(weblgcy = false) {\n        if (!weblgcy || !weblgcy instanceof Weblgcy)\n            throw new Error('Expected instance of Weblgcy');\n\n        this.weblgcy = weblgcy;\n        this.injectPromise = utils.promiseInjector(this);\n    }\n\n    _parseToken(token) {\n        return {\n            ...token,\n            name: this.weblgcy.toUtf8(token.name),\n            abbr: token.abbr && this.weblgcy.toUtf8(token.abbr),\n            description: token.description && this.weblgcy.toUtf8(token.description),\n            url: token.url && this.weblgcy.toUtf8(token.url)\n        };\n    }\n\n    getCurrentBlock(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getCurrentBlock);\n\n        this.weblgcy.fullNode.request('wallet/getnowblock').then(block => {\n            callback(null, block);\n        }).catch(err => callback(err));\n    }\n\n    getConfirmedCurrentBlock(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getConfirmedCurrentBlock);\n\n        this.weblgcy.solidityNode.request('walletsolidity/getnowblock').then(block => {\n            callback(null, block);\n        }).catch(err => callback(err));\n    }\n\n    getBlock(block = this.weblgcy.defaultBlock, callback = false) {\n        if (utils.isFunction(block)) {\n            callback = block;\n            block = this.weblgcy.defaultBlock;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getBlock, block);\n\n        if (block === false)\n            return callback('No block identifier provided');\n\n        if (block == 'earliest')\n            block = 0;\n\n        if (block == 'latest')\n            return this.getCurrentBlock(callback);\n\n        if (isNaN(block) && utils.isHex(block))\n            return this.getBlockByHash(block, callback);\n\n        this.getBlockByNumber(block, callback);\n    }\n\n    getBlockByHash(blockHash, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getBlockByHash, blockHash);\n\n        this.weblgcy.fullNode.request('wallet/getblockbyid', {\n            value: blockHash\n        }, 'post').then(block => {\n            if (!Object.keys(block).length)\n                return callback('Block not found');\n\n            callback(null, block);\n        }).catch(err => callback(err));\n    }\n\n    getBlockByNumber(blockID, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getBlockByNumber, blockID);\n\n        if (!utils.isInteger(blockID) || blockID < 0)\n            return callback('Invalid block number provided');\n\n        this.weblgcy.fullNode.request('wallet/getblockbynum', {\n            num: parseInt(blockID)\n        }, 'post').then(block => {\n            if (!Object.keys(block).length)\n                return callback('Block not found');\n\n            callback(null, block);\n        }).catch(err => callback(err));\n    }\n\n    getBlockTransactionCount(block = this.weblgcy.defaultBlock, callback = false) {\n        if (utils.isFunction(block)) {\n            callback = block;\n            block = this.weblgcy.defaultBlock;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getBlockTransactionCount, block);\n\n        this.getBlock(block).then(({transactions = []}) => {\n            callback(null, transactions.length);\n        }).catch(err => callback(err));\n    }\n\n    getTransactionFromBlock(block = this.weblgcy.defaultBlock, index = 0, callback = false) {\n        if (utils.isFunction(index)) {\n            callback = index;\n            index = 0;\n        }\n\n        if (utils.isFunction(block)) {\n            callback = block;\n            block = this.weblgcy.defaultBlock;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getTransactionFromBlock, block, index);\n\n        if (!utils.isInteger(index) || index < 0)\n            return callback('Invalid transaction index provided');\n\n        this.getBlock(block).then(({transactions = false}) => {\n            if (!transactions || transactions.length < index)\n                return callback('Transaction not found in block');\n\n            callback(null, transactions[index]);\n        }).catch(err => callback(err));\n    }\n\n    getTransaction(transactionID, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getTransaction, transactionID);\n\n        this.weblgcy.fullNode.request('wallet/gettransactionbyid', {\n            value: transactionID\n        }, 'post').then(transaction => {\n            if (!Object.keys(transaction).length)\n                return callback('Transaction not found in gettransaction');\n\n            callback(null, transaction);\n        }).catch(err => callback(err));\n    }\n\n    getConfirmedTransaction(transactionID, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getConfirmedTransaction, transactionID);\n\n        this.weblgcy.solidityNode.request('walletsolidity/gettransactionbyid', {\n            value: transactionID\n        }, 'post').then(transaction => {\n            if (!Object.keys(transaction).length)\n                return callback('Transaction not found in confirmation');\n\n            callback(null, transaction);\n        }).catch(err => callback(err));\n    }\n\n    getTransactionInfo(transactionID, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getTransactionInfo, transactionID);\n\n        this.weblgcy.solidityNode.request('walletsolidity/gettransactioninfobyid', {\n            value: transactionID\n        }, 'post').then(transaction => {\n            callback(null, transaction);\n        }).catch(err => callback(err));\n    }\n\n    getTransactionsToAddress(address = this.weblgcy.defaultAddress.hex, limit = 30, offset = 0, callback = false) {\n        if (utils.isFunction(offset)) {\n            callback = offset;\n            offset = 0;\n        }\n\n        if (utils.isFunction(limit)) {\n            callback = limit;\n            limit = 30;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getTransactionsToAddress, address, limit, offset);\n\n        address = this.weblgcy.address.toHex(address);\n\n        return this.getTransactionsRelated(address, 'to', limit, offset, callback);\n    }\n\n    getTransactionsFromAddress(address = this.weblgcy.defaultAddress.hex, limit = 30, offset = 0, callback = false) {\n        if (utils.isFunction(offset)) {\n            callback = offset;\n            offset = 0;\n        }\n\n        if (utils.isFunction(limit)) {\n            callback = limit;\n            limit = 30;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getTransactionsFromAddress, address, limit, offset);\n\n        address = this.weblgcy.address.toHex(address);\n\n        return this.getTransactionsRelated(address, 'from', limit, offset, callback);\n    }\n\n    async getTransactionsRelated(address = this.weblgcy.defaultAddress.hex, direction = 'all', limit = 30, offset = 0, callback = false) {\n        if (utils.isFunction(offset)) {\n            callback = offset;\n            offset = 0;\n        }\n\n        if (utils.isFunction(limit)) {\n            callback = limit;\n            limit = 30;\n        }\n\n        if (utils.isFunction(direction)) {\n            callback = direction;\n            direction = 'all';\n        }\n\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getTransactionsRelated, address, direction, limit, offset);\n\n        if (!['to', 'from', 'all'].includes(direction))\n            return callback('Invalid direction provided: Expected \"to\", \"from\" or \"all\"');\n\n        if (direction == 'all') {\n            try {\n                const [from, to] = await Promise.all([\n                    this.getTransactionsRelated(address, 'from', limit, offset),\n                    this.getTransactionsRelated(address, 'to', limit, offset)\n                ])\n\n                return callback(null, [\n                    ...from.map(tx => (tx.direction = 'from', tx)),\n                    ...to.map(tx => (tx.direction = 'to', tx))\n                ].sort((a, b) => {\n                    return b.raw_data.timestamp - a.raw_data.timestamp\n                }));\n            } catch (ex) {\n                return callback(ex);\n            }\n        }\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        if (!utils.isInteger(limit) || limit < 0 || (offset && limit < 1))\n            return callback('Invalid limit provided');\n\n        if (!utils.isInteger(offset) || offset < 0)\n            return callback('Invalid offset provided');\n\n        address = this.weblgcy.address.toHex(address);\n\n        this.weblgcy.solidityNode.request(`walletextension/gettransactions${direction}this`, {\n            account: {\n                address\n            },\n            offset,\n            limit\n        }, 'post').then(({transaction}) => {\n            callback(null, transaction);\n        }).catch(err => callback(err));\n    }\n\n    getAccount(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getAccount, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        address = this.weblgcy.address.toHex(address);\n\n        this.weblgcy.solidityNode.request('walletsolidity/getaccount', {\n            address\n        }, 'post').then(account => {\n            callback(null, account);\n        }).catch(err => callback(err));\n    }\n\n    getBalance(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getBalance, address);\n\n        this.getAccount(address).then(({balance = 0}) => {\n            callback(null, balance);\n        }).catch(err => callback(err));\n    }\n\n    getUnconfirmedAccount(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getUnconfirmedAccount, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        address = this.weblgcy.address.toHex(address);\n\n        this.weblgcy.fullNode.request('wallet/getaccount', {\n            address\n        }, 'post').then(account => {\n            callback(null, account);\n        }).catch(err => callback(err));\n    }\n\n    getUnconfirmedBalance(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getUnconfirmedBalance, address);\n\n        this.getUnconfirmedAccount(address).then(({balance = 0}) => {\n            callback(null, balance);\n        }).catch(err => callback(err));\n    }\n\n    getBandwidth(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getBandwidth, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        address = this.weblgcy.address.toHex(address);\n\n        this.weblgcy.fullNode.request('wallet/getaccountnet', {\n            address\n        }, 'post').then(({freeNetUsed = 0, freeNetLimit = 0, NetUsed = 0, NetLimit = 0}) => {\n            callback(null, (freeNetLimit - freeNetUsed) + (NetLimit - NetUsed));\n        }).catch(err => callback(err));\n    }\n\n    getTokensIssuedByAddress(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getTokensIssuedByAddress, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        address = this.weblgcy.address.toHex(address);\n\n        this.weblgcy.fullNode.request('wallet/getassetissuebyaccount', {\n            address\n        }, 'post').then(({assetIssue = false}) => {\n            if (!assetIssue)\n                return callback(null, {});\n\n            const tokens = assetIssue.map(token => {\n                return this._parseToken(token);\n            }).reduce((tokens, token) => {\n                return tokens[token.name] = token, tokens;\n            }, {});\n\n            callback(null, tokens);\n        }).catch(err => callback(err));\n    }\n\n    getTokenFromID(tokenID = false, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getTokenFromID, tokenID);\n\n        if (utils.isInteger(tokenID))\n            tokenID = tokenID.toString()\n\n        if (!utils.isString(tokenID) || !tokenID.length)\n            return callback('Invalid token ID provided');\n\n        this.weblgcy.fullNode.request('wallet/getassetissuebyname', {\n            value: this.weblgcy.fromUtf8(tokenID)\n        }, 'post').then(token => {\n            if (!token.name)\n                return callback('Token does not exist');\n\n            callback(null, this._parseToken(token));\n        }).catch(err => callback(err));\n    }\n\n    listNodes(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.listNodes);\n\n        this.weblgcy.fullNode.request('wallet/listnodes').then(({nodes = []}) => {\n            callback(null, nodes.map(({address: {host, port}}) => (\n                `${this.weblgcy.toUtf8(host)}:${port}`\n            )));\n        }).catch(err => callback(err));\n    }\n\n    getBlockRange(start = 0, end = 30, callback = false) {\n        if (utils.isFunction(end)) {\n            callback = end;\n            end = 30;\n        }\n\n        if (utils.isFunction(start)) {\n            callback = start;\n            start = 0;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getBlockRange, start, end);\n\n        if (!utils.isInteger(start) || start < 0)\n            return callback('Invalid start of range provided');\n\n        if (!utils.isInteger(end) || end <= start)\n            return callback('Invalid end of range provided');\n\n        this.weblgcy.fullNode.request('wallet/getblockbylimitnext', {\n            startNum: parseInt(start),\n            endNum: parseInt(end) + 1\n        }, 'post').then(({block = []}) => {\n            callback(null, block);\n        }).catch(err => callback(err));\n    }\n\n    listSuperRepresentatives(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.listSuperRepresentatives);\n\n        this.weblgcy.fullNode.request('wallet/listwitnesses').then(({witnesses = []}) => {\n            callback(null, witnesses);\n        }).catch(err => callback(err));\n    }\n\n    listTokens(limit = 0, offset = 0, callback = false) {\n        if (utils.isFunction(offset)) {\n            callback = offset;\n            offset = 0;\n        }\n\n        if (utils.isFunction(limit)) {\n            callback = limit;\n            limit = 0;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.listTokens, limit, offset);\n\n        if (!utils.isInteger(limit) || limit < 0 || (offset && limit < 1))\n            return callback('Invalid limit provided');\n\n        if (!utils.isInteger(offset) || offset < 0)\n            return callback('Invalid offset provided');\n\n        if (!limit) {\n            return this.weblgcy.fullNode.request('wallet/getassetissuelist').then(({assetIssue = []}) => {\n                callback(null, assetIssue.map(token => this._parseToken(token)));\n            }).catch(err => callback(err));\n        }\n\n        this.weblgcy.fullNode.request('wallet/getpaginatedassetissuelist', {\n            offset: parseInt(offset),\n            limit: parseInt(limit)\n        }, 'post').then(({assetIssue = []}) => {\n            callback(null, assetIssue.map(token => this._parseToken(token)));\n        }).catch(err => callback(err));\n    }\n\n    timeUntilNextVoteCycle(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.timeUntilNextVoteCycle);\n\n        this.weblgcy.fullNode.request('wallet/getnextmaintenancetime').then(({num = -1}) => {\n            if (num == -1)\n                return callback('Failed to get time until next vote cycle');\n\n            callback(null, Math.floor(num / 1000));\n        }).catch(err => callback(err));\n    }\n\n    getContract(contractAddress, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getContract, contractAddress);\n\n        if (!this.weblgcy.isAddress(contractAddress))\n            return callback('Invalid contract address provided');\n\n        contractAddress = this.weblgcy.address.toHex(contractAddress);\n\n        this.weblgcy.fullNode.request('wallet/getcontract', {\n            value: contractAddress\n        }).then(contract => {\n            if (contract.Error)\n                return callback('Contract does not exist');\n\n            callback(null, contract);\n        }).catch(err => callback(err));\n    }\n\n    async verifyMessage(message = false, signature = false, address = this.weblgcy.defaultAddress.base58, useLgcyHeader = true, callback = false) {\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.base58;\n            useLgcyHeader = true;\n        }\n\n        if (utils.isFunction(useLgcyHeader)) {\n            callback = useLgcyHeader;\n            useLgcyHeader = true;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.verifyMessage, message, signature, address, useLgcyHeader);\n\n        if (!utils.isHex(message))\n            return callback('Expected hex message input');\n\n        if (message.substr(0, 2) == '0x')\n            message = message.substring(2);\n\n        if (signature.substr(0, 2) == '0x')\n            signature = signature.substr(2);\n\n        const messageBytes = [\n            ...Ethers.utils.toUtf8Bytes(useLgcyHeader ? USDL_MESSAGE_HEADER : ETH_MESSAGE_HEADER),\n            ...utils.code.hexStr2byteArray(message)\n        ];\n\n        const messageDigest = Ethers.utils.keccak256(messageBytes);\n        const recovered = Ethers.utils.recoverAddress(messageDigest, {\n            recoveryParam: signature.substring(128, 130) == '1c' ? 1 : 0,\n            r: '0x' + signature.substring(0, 64),\n            s: '0x' + signature.substring(64, 128)\n        });\n\n        const lgcyAddress = '30' + recovered.substr(2);\n        const base58Address = this.weblgcy.address.fromHex(lgcyAddress);\n\n        if (base58Address == this.weblgcy.address.fromHex(address))\n            return callback(null, true);\n\n        callback('Signature does not match');\n    }\n\n    async sign(transaction = false, privateKey = this.weblgcy.defaultPrivateKey, useLgcyHeader = true, multisig = false, callback = false) {\n\n        if (utils.isFunction(multisig)) {\n            callback = multisig;\n            multisig = false;\n        }\n\n        if (utils.isFunction(useLgcyHeader)) {\n            callback = useLgcyHeader;\n            useLgcyHeader = true;\n            multisig = false;\n        }\n\n        if (utils.isFunction(privateKey)) {\n            callback = privateKey;\n            privateKey = this.weblgcy.defaultPrivateKey;\n            useLgcyHeader = true;\n            multisig = false;\n        }\n\n\n        if (!callback)\n            return this.injectPromise(this.sign, transaction, privateKey, useLgcyHeader, multisig);\n\n        // Message signing\n        if (utils.isString(transaction)) {\n            if (transaction.substring(0, 2) == '0x')\n                transaction = transaction.substring(2);\n\n            if (!utils.isHex(transaction))\n                return callback('Expected hex message input');\n\n            try {\n                const signingKey = new Ethers.utils.SigningKey(privateKey);\n                const messageBytes = [\n                    ...Ethers.utils.toUtf8Bytes(useLgcyHeader ? USDL_MESSAGE_HEADER : ETH_MESSAGE_HEADER),\n                    ...utils.code.hexStr2byteArray(transaction)\n                ];\n\n                const messageDigest = Ethers.utils.keccak256(messageBytes);\n                const signature = signingKey.signDigest(messageDigest);\n\n                const signatureHex = [\n                    '0x',\n                    signature.r.substring(2),\n                    signature.s.substring(2),\n                    Number(signature.v).toString(16)\n                ].join('');\n\n                return callback(null, signatureHex);\n            } catch (ex) {\n                callback(ex);\n            }\n        }\n\n        if (!utils.isObject(transaction))\n            return callback('Invalid transaction provided');\n\n        if (!multisig && transaction.signature)\n            return callback('Transaction is already signed');\n\n        try {\n            if (!multisig) {\n                const address = this.weblgcy.address.toHex(\n                    this.weblgcy.address.fromPrivateKey(privateKey)\n                ).toLowerCase();\n\n                if (address !== transaction.raw_data.contract[0].parameter.value.owner_address.toLowerCase())\n                    return callback('Private key does not match address in transaction');\n            }\n            return callback(null,\n                utils.crypto.signTransaction(privateKey, transaction)\n            );\n        } catch (ex) {\n            callback(ex);\n        }\n    }\n\n    sendRawTransaction(signedTransaction = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!callback)\n            return this.injectPromise(this.sendRawTransaction, signedTransaction, options);\n\n        if (!utils.isObject(signedTransaction))\n            return callback('Invalid transaction provided');\n\n        if (!utils.isObject(options))\n            return callback('Invalid options provided');\n\n        if (!signedTransaction.signature || !utils.isArray(signedTransaction.signature))\n            return callback('Transaction is not signed');\n\n        this.weblgcy.fullNode.request(\n            'wallet/broadcasttransaction',\n            signedTransaction,\n            'post'\n        ).then(result => {\n            if (result.result)\n                result.transaction = signedTransaction;\n            callback(null, result);\n        }).catch(err => callback(err));\n    }\n\n    async sendTransaction(to = false, amount = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.sendTransaction, to, amount, options);\n\n        if (!this.weblgcy.isAddress(to))\n            return callback('Invalid recipient provided');\n\n        if (!utils.isInteger(amount) || amount <= 0)\n            return callback('Invalid amount provided');\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            /**\n             * We have changed it sendTrx to sendUsdl\n             */\n            const transaction = await this.weblgcy.transactionBuilder.sendUsdl(to, amount, address);\n            const signedTransaction = await this.sign(transaction, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    async sendToken(to = false, amount = false, tokenID = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.sendToken, to, amount, tokenID, options);\n\n        if (!this.weblgcy.isAddress(to))\n            return callback('Invalid recipient provided');\n\n        if (!utils.isInteger(amount) || amount <= 0)\n            return callback('Invalid amount provided');\n\n        if (utils.isInteger(tokenID))\n            tokenID = tokenID.toString()\n\n        if (!utils.isString(tokenID))\n            return callback('Invalid token ID provided');\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const transaction = await this.weblgcy.transactionBuilder.sendToken(to, amount, tokenID, address);\n            const signedTransaction = await this.sign(transaction, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    /**\n     * Freezes an amount of USDL.\n     * Will give USDL_POWER and LGCY Power(voting rights)\n     * to the owner of the frozen tokens.\n     *\n     * @param amount - is the number of frozen usdl\n     * @param duration - is the duration in days to be frozen\n     * @param resource - is the type, must be USDL_POWER\"\n     * @param options\n     * @param callback\n     */\n    async freezeBalance(amount = 0, duration = 3, resource = \"USDL_POWER\", options = {}, receiverAddress = undefined, callback = false) {\n        if (utils.isFunction(receiverAddress)) {\n            callback = receiverAddress;\n            receiverAddress = undefined;\n        }\n        if (utils.isFunction(duration)) {\n            callback = duration;\n            duration = 3;\n        }\n\n        if (utils.isFunction(resource)) {\n            callback = resource;\n            resource = \"USDL_POWER\";\n        }\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.freezeBalance, amount, duration, resource, options, receiverAddress);\n\n        if (!['USDL_POWER'].includes(resource))\n            return callback('Invalid resource provided: Expected \"USDL_POWER\"');\n\n        if (!utils.isInteger(amount) || amount <= 0)\n            return callback('Invalid amount provided');\n\n        if (!utils.isInteger(duration) || duration < 3)\n            return callback('Invalid duration provided, minimum of 3 days');\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const freezeBalance = await this.weblgcy.transactionBuilder.freezeBalance(amount, duration, resource, address, receiverAddress);\n            const signedTransaction = await this.sign(freezeBalance, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    /**\n     * Unfreeze USDL that has passed the minimum freeze duration.\n     * Unfreezing will USDL_POWER.\n     *\n     * @param resource - is the type, must be either USDL_POWER\"\n     * @param options\n     * @param callback\n     */\n    async unfreezeBalance(resource = \"USDL_POWER\", options = {}, receiverAddress = undefined, callback = false) {\n        if (utils.isFunction(receiverAddress)) {\n            callback = receiverAddress;\n            receiverAddress = undefined;\n        }\n\n        if (utils.isFunction(resource)) {\n            callback = resource;\n            resource = 'USDL_POWER';\n        }\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.unfreezeBalance, resource, options, receiverAddress);\n\n        if (!['USDL_POWER'].includes(resource))\n            return callback('Invalid resource provided: Expected \"USDL_POWER\"');\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const unfreezeBalance = await this.weblgcy.transactionBuilder.unfreezeBalance(resource, address, receiverAddress);\n            const signedTransaction = await this.sign(unfreezeBalance, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    /**\n     * Create a new proposal\n     *\n     * @param parameters - is the key and amount of the proposal\n     * @param options\n     * @param callback\n     */\n    async createProposal(parameters = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n                callback = options;\n                options = {};\n            }\n    \n            if (typeof options === 'string')\n                options = {privateKey: options};\n        \n        if (!callback)\n                return this.injectPromise(this.createProposal, parameters, options);\n    \n        options = {\n                privateKey: this.weblgcy.defaultPrivateKey,\n                address: this.weblgcy.defaultAddress.hex,\n                ...options\n            };\n    \n            if (!options.privateKey && !options.address)\n                return callback('Function requires either a private key or address to be set');\n    \n        try {\n                const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n                const createProposal = await this.weblgcy.transactionBuilder.createProposal(parameters, address);\n                const signedTransaction = await this.sign(createProposal, options.privateKey || undefined);\n                const result = await this.sendRawTransaction(signedTransaction);\n    \n                return callback(null, result);\n            } catch (ex) {\n                return callback(ex);\n            }\n        \n    }\n\n    /**\n     * To vote a proposal\n     *\n     * @param proposalID - is the id for proposal\n     * @param isApproval - If true approval else false not approval\n     * @param options\n     * @param callback\n     */\n    async voteProposal(proposalID = false, isApproval = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n                callback = options;\n                options = {};\n            }\n    \n            if (typeof options === 'string')\n                options = {privateKey: options};\n        \n        if (!callback)\n                return this.injectPromise(this.voteProposal, proposalID, isApproval, options);\n    \n        options = {\n                privateKey: this.weblgcy.defaultPrivateKey,\n                address: this.weblgcy.defaultAddress.hex,\n                ...options\n            };\n    \n            if (!options.privateKey && !options.address)\n                return callback('Function requires either a private key or address to be set');\n    \n        try {\n                const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n                const voteProposal = await this.weblgcy.transactionBuilder.voteProposal(proposalID, isApproval, address);\n                const signedTransaction = await this.sign(voteProposal, options.privateKey || undefined);\n                const result = await this.sendRawTransaction(signedTransaction);\n    \n                return callback(null, result);\n            } catch (ex) {\n                return callback(ex);\n            }\n        \n    }\n\n     /**\n     * To delete a proposal\n     *\n     * @param proposalID - is the id for proposal\n     * @param options\n     * @param callback\n     */\n    async deleteProposal(proposalID = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n                callback = options;\n                options = {};\n            }\n    \n            if (typeof options === 'string')\n                options = {privateKey: options};\n        \n        if (!callback)\n            return this.injectPromise(this.deleteProposal, proposalID, options);\n    \n        options = {\n                privateKey: this.weblgcy.defaultPrivateKey,\n                address: this.weblgcy.defaultAddress.hex,\n                ...options\n            };\n    \n            if (!options.privateKey && !options.address)\n                return callback('Function requires either a private key or address to be set');\n    \n        try {\n                const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n                const deleteProposal = await this.weblgcy.transactionBuilder.deleteProposal(proposalID, address);\n                const signedTransaction = await this.sign(deleteProposal, options.privateKey || undefined);\n                const result = await this.sendRawTransaction(signedTransaction);\n    \n                return callback(null, result);\n            } catch (ex) {\n                return callback(ex);\n            }\n        \n    }\n\n    /**\n     * Create a smart contract\n     *\n     * @param options\n     * @param issuer - Address of creater\n     * @param callback\n     */\n    async createSmartContract(options = {}, issuer = {}, callback = false) {\n        if (utils.isFunction(issuer)) {\n                callback = issuer;\n                issuer = {};\n            }\n    \n            if (typeof issuer === 'string')\n                issuer = {privateKey: issuer};\n        \n        if (!callback)\n                return this.injectPromise(this.createSmartContract, options, issuer);\n        \n        issuer = {\n                privateKey: this.weblgcy.defaultPrivateKey,\n                issuer: this.weblgcy.defaultAddress.hex,\n                ...issuer\n            };\n    \n            if (!issuer.privateKey && !issuer.address)\n                return callback('Function requires either a private key or address to be set');\n    \n        try {\n                const address = issuer.privateKey ? this.weblgcy.address.fromPrivateKey(issuer.privateKey) : issuer.address;\n                const createSmartContract = await this.weblgcy.transactionBuilder.createSmartContract(options, address);\n                const signedTransaction = await this.sign(createSmartContract, issuer.privateKey || undefined);\n                const result = await this.sendRawTransaction(signedTransaction);\n    \n                return callback(null, result);\n            } catch (ex) {\n                return callback(ex);\n            }\n        \n    }\n\n    /**\n     * Trigger a smart contract\n     *\n     * @param contractAddress - Address of the deployed contract\n     * @param functionSelector\n     * @param options\n     * @param parameters\n     * @param issuerAddress - Address of creater\n     * @param callback\n     */\n    \n    async _triggerSmartContract(contractAddress, functionSelector, options = {}, parameters = [], issuerAddress = {}, callback = false) {\n        if (utils.isFunction(issuerAddress)) {\n            callback = issuerAddress;\n            issuerAddress = {};\n        }\n\n        if (typeof issuerAddress === 'string')\n        issuerAddress = {privateKey: issuerAddress};\n\n        if (!callback)\n            return this.injectPromise(this._triggerSmartContract, contractAddress, functionSelector, options, parameters,issuerAddress);\n        \n        if (utils.isFunction(parameters)) {\n            callback = parameters;\n            parameters = [];\n        }\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        issuerAddress = {\n           privateKey: this.weblgcy.defaultPrivateKey,\n           address: this.weblgcy.defaultAddress.hex,\n           ...issuerAddress\n        };\n\n        if (!issuerAddress.privateKey && !issuerAddress.address)\n           return callback('Function requires either a private key or address to be set');\n\n        try {\n           const address = issuerAddress.privateKey ? this.weblgcy.address.fromPrivateKey(issuerAddress.privateKey) : issuerAddress.address;\n           const _triggerSmartContract = await this.weblgcy.transactionBuilder._triggerSmartContract(contractAddress, functionSelector, options, parameters, address);\n           const signedTransaction = await this.sign(_triggerSmartContract, issuerAddress.privateKey || undefined);\n           const result = await this.sendRawTransaction(signedTransaction);\n\n           return callback(null, result);\n        } catch (ex) {\n           return callback(ex);\n        }\n    }\n\n    /**\n     * Create a Token\n     *\n     * @param options\n     * @param issuer - Address of creater\n     * @param callback\n     */\n    async createToken(options = {}, issuer = {}, callback = false) {\n        if (utils.isFunction(issuer)) {\n                callback = address;\n                issuer = {};\n            }\n    \n            if (typeof issuer === 'string')\n                issuer = {privateKey: issuer};\n        \n        if (!callback)\n                return this.injectPromise(this.createToken, options, issuer);\n        \n        issuer = {\n                privateKey: this.weblgcy.defaultPrivateKey,\n                issuer: this.weblgcy.defaultAddress.hex,\n                ...issuer\n            };\n    \n        if (!issuer.privateKey && !issuer.address)\n            return callback('Function requires either a private key or address to be set');\n    \n        try {\n                const address = issuer.privateKey ? this.weblgcy.address.fromPrivateKey(issuer.privateKey) : issuer.address;\n                const createToken = await this.weblgcy.transactionBuilder.createToken(options, address);\n                const signedTransaction = await this.sign(createToken, issuer.privateKey || undefined);\n                const result = await this.sendRawTransaction(signedTransaction);\n    \n                return callback(null, result);\n            } catch (ex) {\n                return callback(ex);\n            }\n    }\n\n    /**\n     * Apply for super representative\n     *\n     * @param options\n     * @param url - url of the SR\n     * @param callback\n     */\n    async applyForSR(options = {}, url = false, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.applyForSR, options, url);\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const applyForSR = await this.weblgcy.transactionBuilder.applyForSR(address, url);\n            const signedTransaction = await this.sign(applyForSR, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    /**\n     * Vote for super representative\n     *\n     * @param votes\n     * @param options\n     * @param callback\n     */\n    async vote(votes = {}, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = undefined;\n        }\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback)\n            return this.injectPromise(this.vote, votes, options);\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const vote = await this.weblgcy.transactionBuilder.vote(votes, address);\n            const signedTransaction = await this.sign(vote, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    /**\n     * Get Reward\n     *\n     * @param address - Account address\n     * @param options \n     * @param callback\n    */\n    async getReward(address, options = {}, callback = false) {\n        options.confirmed = true;\n        return this._getReward(address, options, callback);\n    }\n\n    async _getReward(address = this.weblgcy.defaultAddress.hex, options, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (utils.isFunction(address)) {\n            callback = address;\n            address = this.weblgcy.defaultAddress.hex;\n        } else if (utils.isObject(address)) {\n            options = address;\n            address = this.weblgcy.defaultAddress.hex;\n        }\n\n        if (!callback)\n            return this.injectPromise(this._getReward, address, options);\n\n        // if (this.validator.notValid([\n        //     {\n        //         name: 'origin',\n        //         type: 'address',\n        //         value: address\n        //     }\n        // ], callback))\n        //     return;\n\n        const data = {\n            address: this.weblgcy.address.toHex(address)\n        };\n\n        this.weblgcy[options.confirmed ? 'solidityNode' : 'fullNode'].request(`wallet${options.confirmed ? 'solidity' : ''}/getReward`, data, 'post')\n            .then((result = {}) => {\n\n                if (typeof result.reward === 'undefined')\n                    return callback('Not found.');\n\n                callback(null, result.reward);\n            }).catch(err => callback(err));\n    }\n    \n    /**\n     * Modify account name\n     * Note: Username is allowed to edit only once.\n     *\n     * @param privateKey - Account private Key\n     * @param accountName - name of the account\n     * @param callback\n     *\n     * @return modified Transaction Object\n     */\n    async updateAccount(accountName = false, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (typeof options === 'string')\n            options = {privateKey: options};\n\n        if (!callback) {\n            return this.injectPromise(this.updateAccount, accountName, options);\n        }\n\n        if (!utils.isString(accountName) || !accountName.length) {\n            return callback('Name must be a string');\n        }\n\n        options = {\n            privateKey: this.weblgcy.defaultPrivateKey,\n            address: this.weblgcy.defaultAddress.hex,\n            ...options\n        };\n\n        if (!options.privateKey && !options.address)\n            return callback('Function requires either a private key or address to be set');\n\n        try {\n            const address = options.privateKey ? this.weblgcy.address.fromPrivateKey(options.privateKey) : options.address;\n            const updateAccount = await this.weblgcy.transactionBuilder.updateAccount(accountName, address);\n            const signedTransaction = await this.sign(updateAccount, options.privateKey || undefined);\n            const result = await this.sendRawTransaction(signedTransaction);\n\n            return callback(null, result);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    async triggerSmartContract(...params) {\n        if (typeof params[2] !== 'object') {\n            params[2] = {\n                feeLimit: params[2],\n                callValue: params[3]\n            }\n            params.splice(3, 1)\n        }\n        return this._triggerSmartContract(...params);\n    }\n\n    signMessage(...args) {\n        return this.sign(...args);\n    }\n\n    sendAsset(...args) {\n        return this.sendToken(...args);\n    }\n\n    send(...args) {\n        return this.sendTransaction(...args);\n    }\n\n    sendUsdl(...args) {\n        return this.sendTransaction(...args);\n    }\n\n    broadcast(...args) {\n        return this.sendRawTransaction(...args);\n    }\n\n    signTransaction(...args) {\n        return this.sign(...args);\n    }\n\n    /**\n     * Gets a network modification proposal by ID.\n     */\n    getProposal(proposalID = false, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getProposal, proposalID);\n\n        if (!utils.isInteger(proposalID) || proposalID < 0)\n            return callback('Invalid proposalID provided');\n\n        this.weblgcy.fullNode.request('wallet/getproposalbyid', {\n            id: parseInt(proposalID),\n        }, 'post').then(proposal => {\n            callback(null, proposal);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Lists all network modification proposals.\n     */\n    listProposals(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.listProposals);\n\n        this.weblgcy.fullNode.request('wallet/listproposals', {}, 'post').then(({proposals = []}) => {\n            callback(null, proposals);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Lists all parameters available for network modification proposals.\n     */\n    getChainParameters(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getChainParameters);\n\n        this.weblgcy.fullNode.request('wallet/getchainparameters', {}, 'post').then(({chainParameter = []}) => {\n            callback(null, chainParameter);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Get the account resources\n     */\n    getAccountResources(address = this.weblgcy.defaultAddress.hex, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getAccountResources, address);\n\n        if (!this.weblgcy.isAddress(address))\n            return callback('Invalid address provided');\n\n        this.weblgcy.fullNode.request('wallet/getaccountresource', {\n            address: this.weblgcy.address.toHex(address),\n        }, 'post').then(resources => {\n            callback(null, resources);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Get the exchange ID.\n     */\n    getExchangeByID(exchangeID = false, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getExchangeByID, exchangeID);\n\n        if (!utils.isInteger(exchangeID) || exchangeID < 0)\n            return callback('Invalid exchangeID provided');\n\n        this.weblgcy.fullNode.request('wallet/getexchangebyid', {\n            id: exchangeID,\n        }, 'post').then(exchange => {\n            callback(null, exchange);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Lists the exchanges\n     */\n    listExchanges(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.listExchanges);\n\n        this.weblgcy.fullNode.request('wallet/listexchanges', {}, 'post').then(({exchanges = []}) => {\n            callback(null, exchanges);\n        }, 'post').catch(err => callback(err));\n    }\n\n    /**\n     * Lists all network modification proposals.\n     */\n    listExchangesPaginated(limit = 10, offset = 0, callback = false) {\n        if (utils.isFunction(offset)) {\n            callback = offset;\n            offset = 0;\n        }\n        if (utils.isFunction(limit)) {\n            callback = limit;\n            limit = 30;\n        }\n        if (!callback)\n            return this.injectPromise(this.listExchanges);\n\n        this.weblgcy.fullNode.request('wallet/listexchangespaginated', {\n            limit,\n            offset\n        }, 'post').then(({exchanges = []}) => {\n            callback(null, exchanges);\n        }).catch(err => callback(err));\n    }\n\n    /**\n     * Get info about thre node\n     */\n    getNodeInfo(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getNodeInfo);\n\n        this.weblgcy.fullNode.request('wallet/getnodeinfo', {}, 'post').then(info => {\n            callback(null, info);\n        }, 'post').catch(err => callback(err));\n    }\n\n\n    getTokenListByName(tokenID = false, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getTokenListByName, tokenID);\n\n        if (utils.isInteger(tokenID))\n            tokenID = tokenID.toString()\n\n        if (!utils.isString(tokenID) || !tokenID.length)\n            return callback('Invalid token ID provided');\n\n        this.weblgcy.fullNode.request('wallet/getassetissuelistbyname', {\n            value: this.weblgcy.fromUtf8(tokenID)\n        }, 'post').then(token => {\n            if (!token.name)\n                return callback('Token does not exist');\n\n            callback(null, this._parseToken(token));\n        }).catch(err => callback(err));\n    }\n\n    getTokenByID(tokenID = false, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.getTokenByID, tokenID);\n\n        if (utils.isInteger(tokenID))\n            tokenID = tokenID.toString()\n\n        if (!utils.isString(tokenID) || !tokenID.length)\n            return callback('Invalid token ID provided');\n\n        this.weblgcy.fullNode.request('wallet/getassetissuebyid', {\n            value: tokenID\n        }, 'post').then(token => {\n            if (!token.name)\n                return callback('Token does not exist');\n\n            callback(null, this._parseToken(token));\n        }).catch(err => callback(err));\n    }\n\n};\n","import utils from 'utils';\n\nconst getFunctionSelector = abi => {\n    return abi.name + '(' + getParamTypes(abi.inputs || []).join(',') + ')';\n}\n\nconst getParamTypes = params => {\n    return params.map(({type}) => type);\n}\n\nconst decodeOutput = (abi, output) => {\n    const names = abi.map(({name}) => name).filter(name => !!name);\n    const types = abi.map(({type}) => type);\n\n    return utils.abi.decodeParams(names, types, output);\n};\n\nexport default class Method {\n    constructor(contract, abi) {\n        this.weblgcy = contract.weblgcy;\n        this.contract = contract;\n\n        this.abi = abi;\n        this.name = abi.name || (abi.name = abi.type);\n\n        this.inputs = abi.inputs || [];\n        this.outputs = abi.outputs || [];\n\n        this.functionSelector = getFunctionSelector(abi);\n        this.signature = this.weblgcy.sha3(this.functionSelector, false).slice(0, 8);\n        this.injectPromise = utils.promiseInjector(this);\n\n        this.defaultOptions = {\n            feeLimit: 1000000000,\n            callValue: 0,\n            userFeePercentage: 100,\n            shouldPollResponse: false // Only used for sign()\n        };\n    }\n\n    decodeInput(data) {\n        return decodeOutput(this.inputs, '0x' + data);\n    }\n\n    onMethod(...args) {\n        const types = getParamTypes(this.inputs);\n\n        args.forEach((arg, index) => {\n            if (types[index] == 'address')\n                args[index] = this.weblgcy.address.toHex(arg).replace(/^(30)/, '0x')\n\n            if (types[index] == 'address[]') {\n                args[index] = args[index].map(address => {\n                    return this.weblgcy.address.toHex(address).replace(/^(30)/, '0x')\n                })\n            }\n        });\n\n        return {\n            call: (...methodArgs) => this._call(types, args, ...methodArgs),\n            send: (...methodArgs) => this._send(types, args, ...methodArgs),\n            watch: (...methodArgs) => this._watch(...methodArgs)\n        }\n    }\n\n    async _call(types, args, options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!callback)\n            return this.injectPromise(this._call, types, args, options);\n\n        if (types.length !== args.length)\n            return callback('Invalid argument count provided');\n\n        if (!this.contract.address)\n            return callback('Smart contract is missing address');\n\n        if (!this.contract.deployed)\n            return callback('Calling smart contracts requires you to load the contract first');\n\n        const {stateMutability} = this.abi;\n\n        if (!['pure', 'view'].includes(stateMutability.toLowerCase()))\n            return callback(`Methods with state mutability \"${stateMutability}\" must use send()`);\n\n        options = {\n            ...this.defaultOptions,\n            from: this.weblgcy.defaultAddress.hex,\n            ...options,\n        };\n\n        const parameters = args.map((value, index) => ({\n            type: types[index],\n            value\n        }));\n\n        this.weblgcy.transactionBuilder.triggerSmartContract(\n            this.contract.address,\n            this.functionSelector,\n            options,\n            parameters,\n            options.from ? this.weblgcy.address.toHex(options.from) : false,\n            (err, transaction) => {\n                if (err)\n                    return callback(err);\n\n                if (!utils.hasProperty(transaction, 'constant_result'))\n                    return callback('Failed to execute');\n\n                try {\n\n                    const len = transaction.constant_result[0].length\n                    if (len === 0 || len % 64 === 8) {\n                        let msg = 'The call has been reverted or has thrown an error.'\n                        if (len !== 0) {\n                            msg += ' Error message: '\n                            let msg2 = ''\n                            let chunk = transaction.constant_result[0].substring(8)\n                            for (let i = 0; i < len - 8; i += 64) {\n                                msg2 += this.weblgcy.toUtf8(chunk.substring(i, i + 64))\n                            }\n                            msg += msg2.replace(/(\\u0000|\\u000b|\\f)+/g, ' ').replace(/ +/g, ' ').replace(/\\s+$/g, '');\n                        }\n                        return callback(msg)\n                    }\n\n                    let output = decodeOutput(this.outputs, '0x' + transaction.constant_result[0]);\n\n                    if (output.length === 1)\n                        output = output[0];\n\n                    return callback(null, output);\n                } catch (ex) {\n                    return callback(ex);\n                }\n            });\n    }\n\n    async _send(types, args, options = {}, privateKey = this.weblgcy.defaultPrivateKey, callback = false) {\n        if (utils.isFunction(privateKey)) {\n            callback = privateKey;\n            privateKey = this.weblgcy.defaultPrivateKey;\n        }\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!callback)\n            return this.injectPromise(this._send, types, args, options, privateKey);\n\n        if (types.length !== args.length)\n            throw new Error('Invalid argument count provided');\n\n        if (!this.contract.address)\n            return callback('Smart contract is missing address');\n\n        if (!this.contract.deployed)\n            return callback('Calling smart contracts requires you to load the contract first');\n\n        const {stateMutability} = this.abi;\n\n        if (['pure', 'view'].includes(stateMutability.toLowerCase()))\n            return callback(`Methods with state mutability \"${stateMutability}\" must use call()`);\n\n        // If a function isn't payable, dont provide a callValue.\n        if (!['payable'].includes(stateMutability.toLowerCase()))\n            options.callValue = 0;\n\n        options = {\n            ...this.defaultOptions,\n            from: this.weblgcy.defaultAddress.hex,\n            ...options,\n        };\n\n        const parameters = args.map((value, index) => ({\n            type: types[index],\n            value\n        }));\n\n        try {\n            const address = privateKey ? this.weblgcy.address.fromPrivateKey(privateKey) : this.weblgcy.defaultAddress.base58;\n            const transaction = await this.weblgcy.transactionBuilder.triggerSmartContract(\n                this.contract.address,\n                this.functionSelector,\n                options,\n                parameters,\n                this.weblgcy.address.toHex(address)\n            );\n\n            if (!transaction.result || !transaction.result.result)\n                return callback('Unknown error: ' + JSON.stringify(transaction, null, 2));\n\n            // If privateKey is false, this won't be signed here. We assume sign functionality will be replaced.\n            const signedTransaction = await this.weblgcy.legacy.sign(transaction.transaction, privateKey);\n\n            if (!signedTransaction.signature) {\n                if (!privateKey)\n                    return callback('Transaction was not signed properly');\n\n                return callback('Invalid private key provided');\n            }\n\n            const broadcast = await this.weblgcy.legacy.sendRawTransaction(signedTransaction);\n\n            if (broadcast.code)\n                return callback({\n                    error: broadcast.code,\n                    message: this.weblgcy.toUtf8(broadcast.message)\n                })\n\n            if (!options.shouldPollResponse)\n                return callback(null, signedTransaction.txID);\n\n            const checkResult = async (index = 0) => {\n                if (index == 20) {\n                    return callback({\n                        error: 'Cannot find result in solidity node',\n                        transaction: signedTransaction\n                    });\n                }\n\n                const output = await this.weblgcy.legacy.getTransactionInfo(signedTransaction.txID);\n\n                if (!Object.keys(output).length) {\n                    return setTimeout(() => {\n                        checkResult(index + 1);\n                    }, 3000);\n                }\n\n                if (output.result && output.result == 'FAILED') {\n                    return callback({\n                        error: this.weblgcy.toUtf8(output.resMessage),\n                        transaction: signedTransaction,\n                        output\n                    });\n                }\n\n                if (!utils.hasProperty(output, 'contractResult')) {\n                    return callback({\n                        error: 'Failed to execute: ' + JSON.stringify(output, null, 2),\n                        transaction: signedTransaction,\n                        output\n                    });\n                }\n\n                if (options.rawResponse)\n                    return callback(null, output);\n\n                let decoded = decodeOutput(this.outputs, '0x' + output.contractResult[0]);\n\n                if (decoded.length === 1)\n                    decoded = decoded[0];\n\n                return callback(null, decoded);\n            }\n\n            checkResult();\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    async _watch(options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!utils.isFunction(callback))\n            throw new Error('Expected callback to be provided');\n\n        if (!this.contract.address)\n            return callback('Smart contract is missing address');\n\n        if (this.abi.type.toLowerCase() !== 'event')\n            return callback('Invalid method type for event watching');\n\n        if (!this.weblgcy.eventServer)\n            return callback('No event server configured');\n\n        let listener = false;\n        let lastBlock = false;\n        let since = Date.now() - 1000;\n\n        const getEvents = async () => {\n            try {\n\n                const params = {\n                    since,\n                    eventName: this.name,\n                    sort: 'block_timestamp',\n                    blockNumber: 'latest',\n                    filters: options.filters\n                }\n                if (options.resourceNode) {\n                    if (/full/i.test(options.resourceNode))\n                        params.onlyUnconfirmed = true\n                    else\n                        params.onlyConfirmed = true\n                }\n\n                const events = await this.weblgcy.event.getEventsByContactAddress(this.contract.address, params);\n                const [latestEvent] = events.sort((a, b) => b.block - a.block);\n                const newEvents = events.filter((event, index) => {\n\n                    if (options.resourceNode && event.resourceNode &&\n                        options.resourceNode.toLowerCase() !== event.resourceNode.toLowerCase()) {\n                        return false\n                    }\n\n                    const duplicate = events.slice(0, index).some(priorEvent => (\n                        JSON.stringify(priorEvent) == JSON.stringify(event)\n                    ));\n\n                    if (duplicate)\n                        return false;\n\n                    if (!lastBlock)\n                        return true;\n\n                    return event.block > lastBlock;\n                });\n\n                if (latestEvent)\n                    lastBlock = latestEvent.block;\n\n                return newEvents;\n            } catch (ex) {\n                return Promise.reject(ex);\n            }\n\n        };\n\n        const bindListener = () => {\n            if (listener)\n                clearInterval(listener);\n\n            listener = setInterval(() => {\n                getEvents().then(events => events.forEach(event => {\n                    callback(null, utils.parseEvent(event, this.abi))\n                })).catch(err => callback(err));\n            }, 3000);\n        };\n\n        await getEvents();\n        bindListener();\n\n        return {\n            start: bindListener(),\n            stop: () => {\n                if (!listener)\n                    return;\n\n                clearInterval(listener);\n                listener = false;\n            }\n        }\n    }\n}\n","import Weblgcy from 'index';\nimport utils from 'utils';\nimport Method from './method';\n\nexport default class Contract {\n    constructor(weblgcy = false, abi = [], address = false) {\n        if (!weblgcy || !weblgcy instanceof Weblgcy)\n            throw new Error('Expected instance of Weblgcy');\n\n        this.weblgcy = weblgcy;\n        this.injectPromise = utils.promiseInjector(this);\n\n        this.address = address;\n        this.abi = abi;\n\n        this.eventListener = false;\n        this.bytecode = false;\n        this.deployed = false;\n        this.lastBlock = false;\n\n        this.methods = {};\n        this.methodInstances = {};\n        this.props = [];\n\n        if (this.weblgcy.isAddress(address))\n            this.deployed = true;\n        else this.address = false;\n\n        this.loadAbi(abi);\n    }\n\n    async _getEvents(options = {}) {\n        const events = await this.weblgcy.event.getEventsByContactAddress(this.address, options);\n        const [latestEvent] = events.sort((a, b) => b.block - a.block);\n        const newEvents = events.filter((event, index) => {\n\n            if (options.resourceNode && event.resourceNode &&\n                options.resourceNode.toLowerCase() !== event.resourceNode.toLowerCase()) {\n                return false\n            }\n\n            const duplicate = events.slice(0, index).some(priorEvent => (\n                JSON.stringify(priorEvent) == JSON.stringify(event)\n            ));\n\n            if (duplicate)\n                return false;\n\n            if (!this.lastBlock)\n                return true;\n\n            return event.block > this.lastBlock;\n        });\n\n        if (latestEvent)\n            this.lastBlock = latestEvent.block;\n\n        return newEvents;\n    }\n\n    async _startEventListener(options = {}, callback) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (this.eventListener)\n            clearInterval(this.eventListener);\n\n        if (!this.weblgcy.eventServer)\n            throw new Error('Event server is not configured');\n\n        if (!this.address)\n            throw new Error('Contract is not configured with an address');\n\n        this.eventCallback = callback;\n        await this._getEvents(options);\n\n        this.eventListener = setInterval(() => {\n            this._getEvents(options).then(newEvents => newEvents.forEach(event => {\n                this.eventCallback && this.eventCallback(event)\n            })).catch(err => {\n                console.error('Failed to get event list', err);\n            });\n        }, 3000);\n    }\n\n    _stopEventListener() {\n        if (!this.eventListener)\n            return;\n\n        clearInterval(this.eventListener);\n        this.eventListener = false;\n        this.eventCallback = false;\n    }\n\n    hasProperty(property) {\n        return this.hasOwnProperty(property) || this.__proto__.hasOwnProperty(property);\n    }\n\n    loadAbi(abi) {\n        this.abi = abi;\n        this.methods = {};\n\n        this.props.forEach(prop => delete this[prop]);\n\n        abi.forEach(func => {\n            // Don't build a method for constructor function. That's handled through contract create.\n            if (func.type.toLowerCase() === 'constructor')\n                return;\n\n            const method = new Method(this, func);\n            const methodCall = method.onMethod.bind(method);\n\n            const {\n                name,\n                functionSelector,\n                signature\n            } = method;\n\n            this.methods[name] = methodCall;\n            this.methods[functionSelector] = methodCall;\n            this.methods[signature] = methodCall;\n\n            this.methodInstances[name] = method;\n            this.methodInstances[functionSelector] = method;\n            this.methodInstances[signature] = method;\n\n            if (!this.hasProperty(name)) {\n                this[name] = methodCall;\n                this.props.push(name);\n            }\n\n            if (!this.hasProperty(functionSelector)) {\n                this[functionSelector] = methodCall;\n                this.props.push(functionSelector);\n            }\n\n            if (!this.hasProperty(signature)) {\n                this[signature] = methodCall;\n                this.props.push(signature);\n            }\n        });\n    }\n\n    decodeInput(data) {\n\n        const methodName = data.substring(0, 8);\n        const inputData = data.substring(8);\n\n        if (!this.methodInstances[methodName])\n            throw new Error('Contract method ' + methodName + \" not found\");\n\n        const methodInstance = this.methodInstances[methodName];\n\n        return {\n            name: methodInstance.name,\n            params: this.methodInstances[methodName].decodeInput(inputData),\n        }\n    }\n\n    async new(options, privateKey = this.weblgcy.defaultPrivateKey, callback = false) {\n        if (utils.isFunction(privateKey)) {\n            callback = privateKey;\n            privateKey = this.weblgcy.defaultPrivateKey;\n        }\n\n        if (!callback)\n            return this.injectPromise(this.new, options, privateKey);\n\n        try {\n            const address = this.weblgcy.address.fromPrivateKey(privateKey);\n            const transaction = await this.weblgcy.transactionBuilder.createSmartContract(options, address);\n            const signedTransaction = await this.weblgcy.legacy.sign(transaction, privateKey);\n            const contract = await this.weblgcy.legacy.sendRawTransaction(signedTransaction);\n\n            if (contract.code)\n                return callback({\n                    error: contract.code,\n                    message: this.weblgcy.toUtf8(contract.message)\n                })\n\n            return this.at(signedTransaction.contract_address, callback);\n        } catch (ex) {\n            return callback(ex);\n        }\n    }\n\n    async at(contractAddress, callback = false) {\n        if (!callback)\n            return this.injectPromise(this.at, contractAddress);\n\n        try {\n            const contract = await this.weblgcy.legacy.getContract(contractAddress);\n\n            if (!contract.contract_address)\n                return callback('Unknown error: ' + JSON.stringify(contract, null, 2));\n\n            this.address = contract.contract_address;\n            this.bytecode = contract.bytecode;\n            this.deployed = true;\n\n            this.loadAbi(contract.abi.entrys);\n\n            return callback(null, this);\n        } catch (ex) {\n            if (ex.toString().includes('does not exist'))\n                return callback('Contract has not been deployed on the network');\n\n            return callback(ex);\n        }\n    }\n\n    events(options = {}, callback = false) {\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!utils.isFunction(callback))\n            throw new Error('Callback function expected');\n\n        const self = this;\n\n        return {\n            start(startCallback = false) {\n                if (!startCallback) {\n                    self._startEventListener(options, callback);\n                    return this;\n                }\n\n                self._startEventListener(options, callback).then(() => {\n                    startCallback();\n                }).catch(err => {\n                    startCallback(err)\n                });\n\n                return this;\n            },\n            stop() {\n                self._stopEventListener();\n            }\n        };\n    }\n}\n","import Weblgcy from 'index';\nimport utils from 'utils';\nimport semver from 'semver';\n\nexport default class Plugin {\n\n    constructor(weblgcy = false) {\n        if (!weblgcy || !weblgcy instanceof Weblgcy)\n            throw new Error('Expected instance of Weblgcy');\n        this.weblgcy = weblgcy;\n        this.pluginNoOverride = ['register'];\n    }\n\n    register(Plugin) {\n        let pluginInterface = {\n            requires: '0.0.0',\n            components: {}\n        }\n        let result = {\n            plugged: [],\n            skipped: []\n        }\n        const plugin = new Plugin(this.weblgcy)\n        if (utils.isFunction(plugin.pluginInterface)) {\n            pluginInterface = plugin.pluginInterface()\n        }\n        if (semver.satisfies(Weblgcy.version, pluginInterface.requires)) {\n            for (let component in pluginInterface.components) {\n                if (!this.weblgcy.hasOwnProperty(component)) {\n                    // TODO implement new sub-classes\n                    continue\n                }\n                let methods = pluginInterface.components[component]\n                let pluginNoOverride = this.weblgcy[component].pluginNoOverride || []\n                for (let method in methods) {\n                    if (method === 'constructor' || (this.weblgcy[component][method] &&\n                        (pluginNoOverride.includes(method) // blacklisted methods\n                            || /^_/.test(method)) // private methods\n                    )) {\n                        result.skipped.push(method)\n                        continue\n                    }\n                    this.weblgcy[component][method] = methods[method].bind(this.weblgcy[component])\n                    result.plugged.push(method)\n                }\n            }\n        } else {\n            throw new Error('The plugin is not compatible with this version of Weblgcy')\n        }\n        return result\n    }\n}\n\n","import Weblgcy from 'index';\nimport utils from 'utils';\nimport providers from \"./providers\";\nimport querystring from \"querystring\";\n\nexport default class Event {\n\n    constructor(weblgcy = false) {\n        if (!weblgcy || !(weblgcy instanceof Weblgcy))\n            throw new Error('Expected instance of Weblgcy');\n        this.weblgcy = weblgcy;\n        this.injectPromise = utils.promiseInjector(this);\n    }\n\n    setServer(eventServer = false, healthcheck = 'healthcheck') {\n        if (!eventServer)\n            return this.weblgcy.eventServer = false;\n\n        if (utils.isString(eventServer))\n            eventServer = new providers.HttpProvider(eventServer);\n\n        if (!this.weblgcy.isValidProvider(eventServer))\n            throw new Error('Invalid event server provided');\n\n        this.weblgcy.eventServer = eventServer;\n        this.weblgcy.eventServer.isConnected = () => this.weblgcy.eventServer.request(healthcheck).then(() => true).catch(() => false);\n    }\n\n    getEventsByContactAddress(contractAddress = false, options = {}, callback = false) {\n\n        let {\n            sinceTimestamp,\n            since,\n            fromTimestamp,\n            eventName,\n            blockNumber,\n            size,\n            page,\n            onlyConfirmed,\n            onlyUnconfirmed,\n            previousLastEventFingerprint,\n            previousFingerprint,\n            fingerprint,\n            rawResponse,\n            sort,\n            filters\n        } = Object.assign({\n            sinceTimestamp: 0,\n            eventName: false,\n            blockNumber: false,\n            size: 20,\n            page: 1\n        }, options)\n\n        if (!callback)\n            return this.injectPromise(this.getEventsByContactAddress, contractAddress, options);\n\n        fromTimestamp = fromTimestamp || sinceTimestamp || since;\n\n        if (!this.weblgcy.eventServer)\n            return callback('No event server configured');\n\n        const routeParams = [];\n\n        if (!this.weblgcy.isAddress(contractAddress))\n            return callback('Invalid contract address provided');\n\n        if (eventName && !contractAddress)\n            return callback('Usage of event name filtering requires a contract address');\n\n        if (typeof fromTimestamp !== 'undefined' && !utils.isInteger(fromTimestamp))\n            return callback('Invalid fromTimestamp provided');\n\n        if (!utils.isInteger(size))\n            return callback('Invalid size provided');\n\n        if (size > 200) {\n            console.warn('Defaulting to maximum accepted size: 200');\n            size = 200;\n        }\n\n        if (!utils.isInteger(page))\n            return callback('Invalid page provided');\n\n        if (blockNumber && !eventName)\n            return callback('Usage of block number filtering requires an event name');\n\n        if (contractAddress)\n            routeParams.push(this.weblgcy.address.fromHex(contractAddress));\n\n        if (eventName)\n            routeParams.push(eventName);\n\n        if (blockNumber)\n            routeParams.push(blockNumber);\n\n        const qs = {\n            size,\n            page\n        }\n        if (typeof filters === 'object' && Object.keys(filters).length > 0) {\n            qs.filters = JSON.stringify(filters);\n        }\n\n        if (fromTimestamp) {\n            qs.fromTimestamp = qs.since = fromTimestamp;\n        }\n\n        if (onlyConfirmed)\n            qs.onlyConfirmed = onlyConfirmed\n\n        if (onlyUnconfirmed && !onlyConfirmed)\n            qs.onlyUnconfirmed = onlyUnconfirmed\n\n        if (sort)\n            qs.sort = sort\n\n        fingerprint = fingerprint || previousFingerprint || previousLastEventFingerprint\n        if (fingerprint)\n            qs.fingerprint = fingerprint\n\n        return this.weblgcy.eventServer.request(`event/contract/${routeParams.join('/')}?${querystring.stringify(qs)}`).then((data = false) => {\n            if (!data)\n                return callback('Unknown error occurred');\n\n            if (!utils.isArray(data))\n                return callback(data);\n\n            return callback(null,\n                rawResponse === true ? data : data.map(event => utils.mapEvent(event))\n            );\n        }).catch(err => callback((err.response && err.response.data) || err));\n    }\n\n\n    getEventsByTransactionID(transactionID = false, options = {}, callback = false) {\n\n        if (utils.isFunction(options)) {\n            callback = options;\n            options = {};\n        }\n\n        if (!callback)\n            return this.injectPromise(this.getEventsByTransactionID, transactionID, options);\n\n        if (!this.weblgcy.eventServer)\n            return callback('No event server configured');\n\n        return this.weblgcy.eventServer.request(`event/transaction/${transactionID}`).then((data = false) => {\n            if (!data)\n                return callback('Unknown error occurred');\n\n            if (!utils.isArray(data))\n                return callback(data);\n\n            return callback(null,\n                options.rawResponse === true ? data : data.map(event => utils.mapEvent(event))\n            );\n        }).catch(err => callback((err.response && err.response.data) || err));\n    }\n\n}\n\n","import providers from 'lib/providers';\nimport utils from 'utils';\nimport BigNumber from 'bignumber.js';\nimport EventEmitter from 'eventemitter3';\nimport {version} from '../package.json';\n\nimport TransactionBuilder from 'lib/transactionBuilder';\nimport Legacy from 'lib/legacy';\nimport Contract from 'lib/contract';\nimport Plugin from 'lib/plugin';\nimport Event from 'lib/event';\nimport * as Ethers from 'ethers';\n\nexport default class Weblgcy extends EventEmitter {\n    static providers = providers;\n    static BigNumber = BigNumber;\n    static TransactionBuilder = TransactionBuilder;\n    static Legacy = Legacy;\n    static Contract = Contract;\n    static Plugin = Plugin;\n    static Event = Event;\n    static version = version;\n\n    constructor(options = false,\n                solidityNode = false, eventServer = false, privateKey = false) {\n        super();\n\n        let fullNode;\n        if (typeof options === 'object' && (options.fullNode || options.fullHost)) {\n            privateKey = options.privateKey || solidityNode;\n            fullNode = options.fullNode || options.fullHost;\n            solidityNode = options.solidityNode || options.fullHost;\n            eventServer = options.eventServer || options.fullHost;\n        } else {\n            fullNode = options;\n        }\n\n        if (utils.isString(fullNode))\n            fullNode = new providers.HttpProvider(fullNode);\n\n        if (utils.isString(solidityNode))\n            solidityNode = new providers.HttpProvider(solidityNode);\n\n        if (utils.isString(eventServer))\n            eventServer = new providers.HttpProvider(eventServer);\n\n        this.event = new Event(this);\n        this.transactionBuilder = new TransactionBuilder(this);\n        this.legacy = new Legacy(this);\n        this.plugin = new Plugin(this);\n        this.utils = utils;\n\n        this.setFullNode(fullNode);\n        this.setSolidityNode(solidityNode);\n        this.setEventServer(eventServer);\n\n        this.providers = providers;\n        this.BigNumber = BigNumber;\n\n        this.defaultBlock = false;\n        this.defaultPrivateKey = false;\n        this.defaultAddress = {\n            hex: false,\n            base58: false\n        };\n\n        [\n            'sha3', 'toHex', 'toUtf8', 'fromUtf8',\n            'toAscii', 'fromAscii', 'toDecimal', 'fromDecimal',\n            'toSun', 'fromSun', 'toBigNumber', 'isAddress',\n            'createAccount', 'address'\n        ].forEach(key => {\n            this[key] = Weblgcy[key];\n        });\n\n        if (privateKey)\n            this.setPrivateKey(privateKey);\n\n        this.injectPromise = utils.promiseInjector(this);\n    }\n\n    setDefaultBlock(blockID = false) {\n        if ([false, 'latest', 'earliest', 0].includes(blockID)) {\n            return this.defaultBlock = blockID;\n        }\n\n        if (!utils.isInteger(blockID) || !blockID)\n            throw new Error('Invalid block ID provided');\n\n        this.defaultBlock = Math.abs(blockID);\n    }\n\n    setPrivateKey(privateKey) {\n        try {\n            this.setAddress(\n                this.address.fromPrivateKey(privateKey)\n            );\n        } catch {\n            throw new Error('Invalid private key provided');\n        }\n\n        this.defaultPrivateKey = privateKey;\n        this.emit('privateKeyChanged', privateKey);\n    }\n\n    setAddress(address) {\n        if (!this.isAddress(address))\n            throw new Error('Invalid address provided');\n\n        const hex = this.address.toHex(address);\n        const base58 = this.address.fromHex(address);\n\n        if (this.defaultPrivateKey && this.address.fromPrivateKey(this.defaultPrivateKey) !== base58)\n            this.defaultPrivateKey = false;\n\n        this.defaultAddress = {\n            hex,\n            base58\n        };\n\n        this.emit('addressChanged', {hex, base58});\n    }\n\n    isValidProvider(provider) {\n        return Object.values(providers).some(knownProvider => provider instanceof knownProvider);\n    }\n\n    setFullNode(fullNode) {\n        if (utils.isString(fullNode))\n            fullNode = new providers.HttpProvider(fullNode);\n\n        if (!this.isValidProvider(fullNode))\n            throw new Error('Invalid full node provided');\n\n        this.fullNode = fullNode;\n        this.fullNode.setStatusPage('wallet/getnowblock');\n    }\n\n    setSolidityNode(solidityNode) {\n        if (utils.isString(solidityNode))\n            solidityNode = new providers.HttpProvider(solidityNode);\n\n        if (!this.isValidProvider(solidityNode))\n            throw new Error('Invalid solidity node provided');\n\n        this.solidityNode = solidityNode;\n        this.solidityNode.setStatusPage('walletsolidity/getnowblock');\n    }\n\n    setEventServer(...params) {\n        this.event.setServer(...params)\n    }\n\n    currentProviders() {\n        return {\n            fullNode: this.fullNode,\n            solidityNode: this.solidityNode,\n            eventServer: this.eventServer\n        };\n    }\n\n    currentProvider() {\n        return this.currentProviders();\n    }\n\n\n    getEventResult(...params) {\n\n        if (typeof params[1] !== 'object') {\n            params[1] = {\n                sinceTimestamp: params[1] || 0,\n                eventName: params[2] || false,\n                blockNumber: params[3] || false,\n                size: params[4] || 20,\n                page: params[5] || 1\n            }\n            params.splice(2, 4)\n\n            // callback:\n            if (!utils.isFunction(params[2])) {\n\n                if (utils.isFunction(params[1].page)) {\n                    params[2] = params[1].page;\n                    params[1].page = 1;\n                } else if (utils.isFunction(params[1].size)) {\n                    params[2] = params[1].size;\n                    params[1].size = 20;\n                    params[1].page = 1;\n                }\n            }\n        }\n\n        return this.event.getEventsByContactAddress(...params);\n    }\n\n    getEventByTransactionID(...params) {\n        return this.event.getEventsByTransactionID(...params)\n    }\n\n    contract(abi = [], address = false) {\n        return new Contract(this, abi, address);\n    }\n\n    static get address() {\n        return {\n            fromHex(address) {\n                if (!utils.isHex(address))\n                    return address;\n\n                return utils.crypto.getBase58CheckAddress(\n                    utils.code.hexStr2byteArray(address.replace(/^0x/, '30'))\n                );\n            },\n            toHex(address) {\n                if (utils.isHex(address))\n                    return address.toLowerCase().replace(/^0x/, '30');\n\n                return utils.code.byteArray2hexStr(\n                    utils.crypto.decodeBase58Address(address)\n                ).toLowerCase();\n            },\n            fromPrivateKey(privateKey) {\n                try {\n                    return utils.crypto.pkToAddress(privateKey);\n                } catch {\n                    return false;\n                }\n            }\n        }\n    }\n\n    static sha3(string, prefix = true) {\n        return (prefix ? '0x' : '') + Ethers.utils.keccak256(Buffer.from(string, 'utf-8')).toString().substring(2);\n    }\n\n    static toHex(val) {\n        if (utils.isBoolean(val))\n            return Weblgcy.fromDecimal(+val);\n\n        if (utils.isBigNumber(val))\n            return Weblgcy.fromDecimal(val);\n\n        if (typeof val === 'object')\n            return Weblgcy.fromUtf8(JSON.stringify(val));\n\n        if (utils.isString(val)) {\n            if (/^(-|)0x/.test(val))\n                return val;\n\n            if (!isFinite(val))\n                return Weblgcy.fromUtf8(val);\n        }\n\n        let result = Weblgcy.fromDecimal(val);\n        if (result === '0xNaN') {\n            throw new Error('The passed value is not convertible to a hex string');\n        } else {\n            return result;\n        }\n    }\n\n    static toUtf8(hex) {\n        if (utils.isHex(hex)) {\n            hex = hex.replace(/^0x/, '');\n            return Buffer.from(hex, 'hex').toString('utf8');\n        } else {\n            throw new Error('The passed value is not a valid hex string');\n        }\n    }\n\n    static fromUtf8(string) {\n        if (!utils.isString(string)) {\n            throw new Error('The passed value is not a valid utf-8 string')\n        }\n        return '0x' + Buffer.from(string, 'utf8').toString('hex');\n    }\n\n    static toAscii(hex) {\n        if (utils.isHex(hex)) {\n            let str = \"\";\n            let i = 0, l = hex.length;\n            if (hex.substring(0, 2) === '0x') {\n                i = 2;\n            }\n            for (; i < l; i += 2) {\n                let code = parseInt(hex.substr(i, 2), 16);\n                str += String.fromCharCode(code);\n            }\n            return str;\n        } else {\n            throw new Error('The passed value is not a valid hex string');\n        }\n    }\n\n    static fromAscii(string, padding) {\n        if (!utils.isString(string)) {\n            throw new Error('The passed value is not a valid utf-8 string')\n        }\n        return '0x' + Buffer.from(string, 'ascii').toString('hex').padEnd(padding, '0');\n    }\n\n\n    static toDecimal(value) {\n        return Weblgcy.toBigNumber(value).toNumber();\n    }\n\n    static fromDecimal(value) {\n        const number = Weblgcy.toBigNumber(value);\n        const result = number.toString(16);\n\n        return number.isLessThan(0) ? '-0x' + result.substr(1) : '0x' + result;\n    }\n\n    static fromSun(sun) {\n        const usdl = Weblgcy.toBigNumber(sun).div(1_000_000);\n        return utils.isBigNumber(sun) ? usdl : usdl.toString(10);\n    }\n\n    static toSun(usdl) {\n        const sun = Weblgcy.toBigNumber(usdl).times(1_000_000);\n        return utils.isBigNumber(usdl) ? sun : sun.toString(10);\n    }\n\n    static toBigNumber(amount = 0) {\n        if (utils.isBigNumber(amount))\n            return amount;\n\n        if (utils.isString(amount) && /^(-|)0x/.test(amount))\n            return new BigNumber(amount.replace('0x', ''), 16);\n\n        return new BigNumber(amount.toString(10), 10);\n    }\n\n    static isAddress(address = false) {\n        if (!utils.isString(address))\n            return false;\n\n        // Convert HEX to Base58\n        if (address.length === 42) {\n            try {\n                return Weblgcy.isAddress(\n                    utils.crypto.getBase58CheckAddress(\n                        utils.code.hexStr2byteArray(address) // it throws an error if the address starts with 0x\n                    )\n                );\n            } catch (err) {\n                return false;\n            }\n        }\n        try {\n            return utils.crypto.isAddressValid(address);\n        } catch (err) {\n            return false;\n        }\n    }\n\n    static async createAccount() {\n        const account = utils.accounts.generateAccount();\n\n        return account;\n    }\n\n    async isConnected(callback = false) {\n        if (!callback)\n            return this.injectPromise(this.isConnected);\n\n        return callback(null, {\n            fullNode: await this.fullNode.isConnected(),\n            solidityNode: await this.solidityNode.isConnected(),\n            eventServer: this.eventServer && await this.eventServer.isConnected()\n        });\n    }\n};\n"],"sourceRoot":""}